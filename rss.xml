<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[xiaohesong's Blog]]></title><description><![CDATA[xiaohesongçš„ä¸ªäººåšå®¢. å­¦ä¹ çš„è®°å½•ä»¥åŠä¸€äº›å­¦ä¹ èµ„æº.]]></description><link>https://github.com/xiaohesong</link><generator>RSS for Node</generator><lastBuildDate>Fri, 05 Jul 2019 10:03:21 GMT</lastBuildDate><item><title><![CDATA[ä¸€ä»½å®Œæ•´çš„effectsæŒ‡å—]]></title><description><![CDATA[ä½ ä½¿ç”¨ hooks å†™äº†ä¸€äº›ç»„ä»¶ã€‚ä¹Ÿè®¸åªæ˜¯ä¸€ä¸ªå°çš„åº”ç”¨ã€‚ä½ åŸºæœ¬ä¸Šå¯¹è¿™äº›æ˜¯æ»¡æ„çš„ã€‚ä½ å¯¹APIä¹Ÿæ¸¸åˆƒæœ‰ä½™ï¼Œå¹¶åœ¨æ­¤è¿‡ç¨‹ä¸­å­¦ä¼šäº†ä¸€äº›æŠ€å·§ã€‚ä½ ç”šè‡³åšäº†ä¸€äº› è‡ªå®šä¹‰Hook æ¥æå–é‡å¤é€»è¾‘ï¼ˆ30â€¦]]></description><link>https://github.com/xiaohesong/complete-effects/</link><guid isPermaLink="false">https://github.com/xiaohesong/complete-effects/</guid><pubDate>Wed, 27 Mar 2019 22:40:32 GMT</pubDate><content:encoded>&lt;p&gt;ä½ ä½¿ç”¨&lt;a href=&quot;https://github.com/xiaohesong/TIL/blob/master/front-end/react/hooks/intro.md&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;hooks&lt;/a&gt;å†™äº†ä¸€äº›ç»„ä»¶ã€‚ä¹Ÿè®¸åªæ˜¯ä¸€ä¸ªå°çš„åº”ç”¨ã€‚ä½ åŸºæœ¬ä¸Šå¯¹è¿™äº›æ˜¯æ»¡æ„çš„ã€‚ä½ å¯¹APIä¹Ÿæ¸¸åˆƒæœ‰ä½™ï¼Œå¹¶åœ¨æ­¤è¿‡ç¨‹ä¸­å­¦ä¼šäº†ä¸€äº›æŠ€å·§ã€‚ä½ ç”šè‡³åšäº†ä¸€äº›&lt;a href=&quot;https://github.com/xiaohesong/TIL/blob/master/front-end/react/hooks/custom-hook.md&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;è‡ªå®šä¹‰Hook&lt;/a&gt;æ¥æå–é‡å¤é€»è¾‘ï¼ˆ300è¡Œä»£ç æ¶ˆå¤±äº†ï¼ï¼‰å¹¶å‘ä½ çš„åŒäº‹å±•ç¤ºäº†å®ƒã€‚ä»–ä»¬ä¼šè¯´ï¼Œâ€œå¹²å¾—å¥½â€ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯æœ‰æ—¶å€™å½“ä½ ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt;çš„æ—¶å€™ï¼Œæœ‰äº›éƒ¨åˆ†å¹¶ä¸å®Œå…¨åˆé€‚ã€‚ä½ æœ‰ä¸€ç§æŒ¥ä¹‹ä¸å»çš„æ„Ÿè§‰ï¼Œè§‰å¾—è‡ªå·±é”™è¿‡äº†ä»€ä¹ˆã€‚å®ƒä¼¼ä¹ä¸ç±»ç”Ÿå‘½å‘¨æœŸç›¸ä¼¼â€¦ä½†å®ƒçœŸçš„å¦‚æ­¤å—ï¼Ÿä½ å‘ç°è‡ªå·±ä¼šé—®è¿™æ ·çš„é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ğŸ¤” å¦‚ä½•ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt;æ›¿ä»£&lt;code class=&quot;language-text&quot;&gt;componentDidMount&lt;/code&gt;ï¼Ÿ&lt;/li&gt;
&lt;li&gt;ğŸ¤” å¦‚ä½•åœ¨&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt;ä¸­æ­£ç¡®çš„è·å–æ•°æ®ï¼Ÿ&lt;code class=&quot;language-text&quot;&gt;[]&lt;/code&gt;æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/li&gt;
&lt;li&gt;ğŸ¤” æˆ‘æ˜¯å¦éœ€è¦å°†å‡½æ•°æŒ‡å®šä¸ºæ•ˆæœ(effect)ä¾èµ–é¡¹?&lt;/li&gt;
&lt;li&gt;ğŸ¤” ä¸ºä»€ä¹ˆæœ‰æ—¶ä¼šå¾—åˆ°ä¸€ä¸ªæ— é™é‡å¤è·å–å¾ªç¯?&lt;/li&gt;
&lt;li&gt;ğŸ¤” ä¸ºä»€ä¹ˆæˆ‘æœ‰æ—¶ä¼šåœ¨æ•ˆæœ(effect)ä¸­è·å¾—æ—§çš„çŠ¶æ€æˆ–propå€¼ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å½“æˆ‘åˆšåˆšå¼€å§‹ä½¿ç”¨Hooksæ—¶ï¼Œæˆ‘ä¹Ÿå¯¹æ‰€æœ‰è¿™äº›é—®é¢˜æ„Ÿåˆ°å›°æƒ‘ã€‚å³ä½¿åœ¨å†™æœ€åˆçš„æ–‡æ¡£æ—¶ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰å¯¹å…¶ä¸­çš„ä¸€äº›ç»†èŠ‚æœ‰ä¸€ä¸ªå¾ˆå¥½çš„æŠŠæ¡ã€‚ä»é‚£ä»¥åï¼Œæˆ‘æœ‰ä¸€äº›â€œå•Šå“ˆâ€(è±ç„¶å¼€æœ—)çš„æ—¶åˆ»ï¼Œæˆ‘æƒ³å’Œä½ ä»¬åˆ†äº«ã€‚&lt;strong&gt;è¿™ä¸ªçš„æ·±å…¥ç ”ç©¶å°†ä½¿è¿™äº›é—®é¢˜çš„ç­”æ¡ˆå¯¹ä½ æ¥è¯´æ˜¾è€Œæ˜“è§ã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;ä¸ºäº†&lt;em&gt;çœ‹&lt;/em&gt; åˆ°ç­”æ¡ˆï¼Œæˆ‘ä»¬éœ€è¦åé€€ä¸€æ­¥ã€‚æœ¬æ–‡çš„ç›®çš„ä¸æ˜¯ç»™ä½ ä¸€ä¸ªæ–¹æ³•åˆ—è¡¨å»ç”¨ã€‚ä¸»è¦æ˜¯ä¸ºäº†å¸®åŠ©ä½ çœŸæ­£â€œç†è§£â€&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt;ã€‚æ²¡æœ‰å¤ªå¤šè¦å­¦çš„ä¸œè¥¿ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬éœ€è¦èŠ±è´¹å¤§éƒ¨åˆ†æ—¶é—´å»å¿˜è®°å­¦ä¹ çš„ä¸œè¥¿(&lt;em&gt;unlearning&lt;/em&gt;)ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç›´åˆ°æˆ‘ä¸å†é€šè¿‡ç†Ÿæ‚‰çš„ç±»ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ¥çœ‹å¾…&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt; Hookä¹‹å, è¿™ä¸€åˆ‡æ‰èä¼šè´¯é€šã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;â€œå¿˜æ‰ä½ å­¦åˆ°çš„ä¸œè¥¿â€ã€‚â€” Yoda&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://overreacted.io/static/6203a1f1f2c771816a5ba0969baccd12/5ed8a/yoda.jpg&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;æœ¬æ–‡å‡è®¾ä½ å¯¹&lt;a href=&quot;https://github.com/xiaohesong/TIL/blob/master/front-end/react/hooks/effect-hook.md&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;useEffect&lt;/a&gt;APIæœ‰ç‚¹ç†Ÿæ‚‰ã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æœ¬æ–‡çš„ç¡®å¾ˆé•¿ã€‚å°±åƒä¸€æœ¬è¿·ä½ å°ä¹¦ã€‚è¿™åªæ˜¯æˆ‘å–œæ¬¢çš„ç‰ˆå¼ã€‚ä½†æ˜¯å¦‚æœä½ å¾ˆå¿™æˆ–è€…ä¸åœ¨ä¹ï¼Œæˆ‘åœ¨ä¸‹é¢å†™äº†ä¸€ä¸ªTLDRä¾›ä½ å¿«é€Ÿäº†è§£ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¦‚æœä½ å¯¹æ·±åº¦å­¦ä¹ ä¸æ€ä¹ˆå–œæ¬¢ï¼Œä½ å¯èƒ½æƒ³ç­‰åˆ°è¿™äº›è§£é‡Šå‡ºç°åœ¨å…¶ä»–åœ°æ–¹å†å­¦ä¹ ã€‚å°±åƒReactåœ¨2013å¹´æ¨å‡ºæ—¶ä¸€æ ·ï¼Œäººä»¬éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½è®¤è¯†åˆ°ä¸€ç§ä¸åŒçš„æ€ç»´æ¨¡å¼å¹¶è¿›è¡Œæ•™å­¦ã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;tldr&quot;&gt;&lt;a href=&quot;#tldr&quot; aria-label=&quot;tldr permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;TLDR&lt;/h2&gt;
&lt;p&gt;å¦‚æœä½ ä¸æƒ³é˜…è¯»æ•´ç¯‡æ–‡ç« ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå¿«é€Ÿçš„TLDRã€‚å¦‚æœæœ‰äº›éƒ¨åˆ†æ²¡æœ‰æ„ä¹‰ï¼Œå¯ä»¥å‘ä¸‹æ»šåŠ¨ï¼Œç›´åˆ°æ‰¾åˆ°ç›¸å…³çš„å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æ‰“ç®—é˜…è¯»æ•´ç¯‡æ–‡ç« ï¼Œå¯ä»¥è·³è¿‡å®ƒã€‚æˆ‘ä¼šåœ¨æœ€åé“¾æ¥åˆ°å®ƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ğŸ¤” é—®é¢˜ï¼šå¦‚ä½•ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt;æ›¿ä»£&lt;code class=&quot;language-text&quot;&gt;componentDidMount&lt;/code&gt; ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è™½ç„¶å¯ä»¥ç”¨&lt;code class=&quot;language-text&quot;&gt;useEffect(fn, [])&lt;/code&gt;ï¼Œä½†å®ƒå¹¶ä¸æ˜¯å®Œå…¨ç­‰ä»·çš„ã€‚ä¸&lt;code class=&quot;language-text&quot;&gt;componentDidMount&lt;/code&gt;ä¸åŒï¼Œå®ƒå°†&lt;em&gt;æ•è·(capture)&lt;/em&gt; propså’ŒçŠ¶æ€ã€‚æ‰€ä»¥å³ä½¿åœ¨å›è°ƒä¸­ï¼Œä½ ä¹Ÿä¼šçœ‹åˆ°æœ€åˆçš„propså’ŒçŠ¶æ€ã€‚å¦‚æœä½ æƒ³çœ‹åˆ°â€œæœ€æ–°â€çš„ä¸œè¥¿ï¼Œä½ å¯ä»¥æŠŠå®ƒå†™åˆ°refã€‚ä½†æ˜¯é€šå¸¸æœ‰ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•æ¥æ„é€ ä»£ç ï¼Œè¿™æ ·ä½ å°±ä¸å¿…è¿™æ ·åšäº†ã€‚è¯·è®°ä½ï¼Œæ•ˆæœ(effect)çš„å¿ƒç†æ¨¡å‹ä¸&lt;code class=&quot;language-text&quot;&gt;componentDidMount&lt;/code&gt;å’Œå…¶ä»–ç”Ÿå‘½å‘¨æœŸä¸åŒï¼Œè¯•å›¾æ‰¾åˆ°å®ƒä»¬çš„ç¡®åˆ‡å¯¹ç­‰ç‰©å¯èƒ½ä¼šè®©ä½ æ„Ÿåˆ°å›°æƒ‘ï¼Œè€Œä¸æ˜¯æœ‰æ‰€å¸®åŠ©ã€‚ä¸ºäº†æé«˜æ•ˆç‡ï¼Œä½ éœ€è¦â€œæ€è€ƒæ•ˆæœâ€ï¼Œä»–ä»¬çš„å¿ƒæ™ºæ¨¡å‹æ›´æ¥è¿‘äºå®ç°åŒæ­¥ï¼Œè€Œä¸æ˜¯å“åº”ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ğŸ¤” é—®é¢˜ï¼šå¦‚ä½•åœ¨&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt;ä¸­æ­£ç¡®è·å–æ•°æ®ï¼Ÿä»€ä¹ˆæ˜¯ &lt;code class=&quot;language-text&quot;&gt;[]&lt;/code&gt;ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.robinwieruch.de/react-hooks-fetch-data/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;è¿™ç¯‡æ–‡ç« &lt;/a&gt;æ˜¯ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt;è¿›è¡Œæ•°æ®è·å–çš„ä¸€ä¸ªå¾ˆå¥½çš„å…¥é—¨è¯»ç‰©ã€‚ä¸€å®šè¦æŠŠå®ƒè¯»å®Œï¼å®ƒä¸åƒè¿™ä¸ªé‚£ä¹ˆé•¿ã€‚&lt;code class=&quot;language-text&quot;&gt;[]&lt;/code&gt;è¡¨ç¤ºè¯¥æ•ˆæœä¸ä½¿ç”¨å‚ä¸Reactæ•°æ®æµçš„ä»»ä½•å€¼ï¼Œå› æ­¤å¯ä»¥å®‰å…¨åœ°åº”ç”¨ä¸€æ¬¡ã€‚å½“å®é™…ä½¿ç”¨è¯¥å€¼æ—¶ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¸¸è§çš„bugæºã€‚ä½ éœ€è¦å­¦ä¹ ä¸€äº›ç­–ç•¥(ä¸»è¦æ˜¯&lt;code class=&quot;language-text&quot;&gt;useReducer&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;useCallback&lt;/code&gt;)ï¼Œè¿™äº›ç­–ç•¥å¯ä»¥&lt;em&gt;æ¶ˆé™¤&lt;/em&gt;å¯¹ä¾èµ–é¡¹çš„éœ€è¦ï¼Œè€Œä¸æ˜¯é”™è¯¯åœ°å¿½ç•¥å®ƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ğŸ¤” é—®é¢˜ï¼šæˆ‘æ˜¯å¦éœ€è¦å°†å‡½æ•°æŒ‡å®šä¸ºæ•ˆæœä¾èµ–é¡¹ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å»ºè®®å°†ä¸éœ€è¦propsæˆ–çŠ¶æ€çš„å‡½æ•°æåˆ°ç»„ä»¶å¤–éƒ¨ï¼Œå¹¶å°†ä»…ç”±æ•ˆæœ&lt;em&gt;å†…éƒ¨&lt;/em&gt;ä½¿ç”¨çš„å‡½æ•°æ‹‰å‡ºæ¥ä½¿ç”¨ã€‚å¦‚æœåœ¨æ­¤ä¹‹åï¼Œä½ çš„æ•ˆæœä»ç„¶ä½¿ç”¨æ¸²æŸ“èŒƒå›´ä¸­çš„å‡½æ•°(åŒ…æ‹¬æ¥è‡ªpropsçš„å‡½æ•°)ï¼Œé‚£ä¹ˆå°†å®ƒä»¬å°è£…åˆ°å®šä¹‰å®ƒä»¬çš„&lt;code class=&quot;language-text&quot;&gt;useCallback&lt;/code&gt;ä¸­ï¼Œå¹¶é‡å¤è¯¥è¿‡ç¨‹ã€‚ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦?å‡½æ•°å¯ä»¥â€œçœ‹åˆ°â€æ¥è‡ªpropså’ŒçŠ¶æ€çš„å€¼â€”â€”å› æ­¤å®ƒä»¬å‚ä¸æ•°æ®æµã€‚æˆ‘ä»¬çš„å¸¸è§é—®é¢˜è§£ç­”ä¸­æœ‰&lt;a href=&quot;https://reactjs.org/docs/hooks-faq.html#is-it-safe-to-omit-functions-from-the-list-of-dependencies&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;æ›´è¯¦ç»†çš„ç­”æ¡ˆ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ğŸ¤” é—®é¢˜ï¼šä¸ºä»€ä¹ˆæœ‰æ—¶ä¼šå¾—åˆ°ä¸€ä¸ªæ— é™é‡å¤è·å–å¾ªç¯?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœåœ¨æ²¡æœ‰ç¬¬äºŒä¸ªä¾èµ–é¡¹å‚æ•°çš„æƒ…å†µä¸‹åœ¨ä¸€ä¸ªæ•ˆæœä¸­æ‰§è¡Œæ•°æ®è·å–ï¼Œåˆ™å¯èƒ½ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚æ²¡æœ‰å®ƒï¼Œæ•ˆæœä¼šåœ¨æ¯æ¬¡æ¸²æŸ“åè¿è¡Œ - è®¾ç½®çŠ¶æ€å°†å†æ¬¡è§¦å‘æ•ˆæœã€‚å¦‚æœæŒ‡å®šçš„è¿™ä¸ªå€¼&lt;em&gt;å§‹ç»ˆ&lt;/em&gt;åœ¨ä¾èµ–å…³ç³»æ•°ç»„ä¸­æ”¹å˜ï¼Œä¹Ÿå¯èƒ½å‘ç”Ÿæ— é™å¾ªç¯ã€‚ä½ å¯ä»¥é€šè¿‡ä¸€ä¸ªä¸€ä¸ªåœ°æŠŠå®ƒä»¬ç§»é™¤æ¥è¾¨åˆ«æ˜¯å“ªä¸ªã€‚ä½†æ˜¯ï¼Œåˆ é™¤ä½ ä½¿ç”¨çš„ä¾èµ–é¡¹ï¼ˆæˆ–ç›²ç›®æŒ‡å®š&lt;code class=&quot;language-text&quot;&gt;[]&lt;/code&gt;ï¼‰é€šå¸¸æ˜¯é”™è¯¯çš„ä¿®å¤ã€‚ç›¸åï¼Œä»æºå¤´è§£å†³é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œå‡½æ•°å¯èƒ½ä¼šå¯¼è‡´è¿™ä¸ªé—®é¢˜ï¼Œå°†å®ƒä»¬æ”¾åœ¨æ•ˆæœä¸­ã€å°†å®ƒä»¬æå‡ºæ¥æˆ–ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;useCallback&lt;/code&gt;åŒ…è£…å®ƒä»¬ä¼šæœ‰æ‰€å¸®åŠ©ã€‚ä¸ºé¿å…é‡æ–°åˆ›å»ºå¯¹è±¡ï¼Œ&lt;code class=&quot;language-text&quot;&gt;useMemo&lt;/code&gt;å¯ç”¨äºç±»ä¼¼ç›®çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ğŸ¤” ä¸ºä»€ä¹ˆæˆ‘æœ‰æ—¶ä¼šåœ¨æ•ˆæœä¸­è·å¾—æ—§çš„çŠ¶æ€æˆ–propså€¼ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ•ˆæœæ€»æ˜¯ä»å®šä¹‰çš„æ¸²æŸ“ä¸­â€œçœ‹åˆ°â€propså’ŒçŠ¶æ€ã€‚è¿™&lt;a href=&quot;https://github.com/xiaohesong/TIL/blob/master/front-end/react/overreact/%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6%E4%B8%8E%E7%B1%BB%E6%9C%89%E4%BB%80%E4%B9%88%E4%B8%8D%E5%90%8C.md&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;æœ‰åŠ©äºé˜²æ­¢é”™è¯¯&lt;/a&gt;ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šä»¤äººè®¨åŒã€‚å¯¹äºè¿™äº›æƒ…å†µï¼Œä½ å¯ä»¥æ˜¾å¼åœ°åœ¨å¯å˜refä¸­ç»´æŠ¤ä¸€äº›å€¼(é“¾æ¥é‡Œçš„æ–‡ç« åœ¨æœ€åå¯¹æ­¤è¿›è¡Œäº†è§£é‡Š)ã€‚å¦‚æœä½ è®¤ä¸ºä½ ä»æ—§çš„æ¸²æŸ“ä¸­çœ‹åˆ°äº†ä¸€äº›propsæˆ–çŠ¶æ€ï¼Œä½†å¹¶ä¸æ˜¯ä½ æœŸæœ›çš„ï¼Œé‚£ä¹ˆä½ å¯èƒ½é”™è¿‡äº†ä¸€äº›ä¾èµ–é¡¹ã€‚å°è¯•ä½¿ç”¨&lt;a href=&quot;https://github.com/facebook/react/issues/14920&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;lintè§„åˆ™&lt;/a&gt;æ¥é”»ç‚¼è‡ªå·±å‘ç°å®ƒä»¬ã€‚è¿‡å‡ å¤©ï¼Œå®ƒå°±ä¼šæˆä¸ºä½ çš„ç¬¬äºŒå¤©æ€§ã€‚è¯·å‚é˜…å¸¸è§é—®é¢˜è§£ç­”ä¸­çš„&lt;a href=&quot;https://reactjs.org/docs/hooks-faq.html#why-am-i-seeing-stale-props-or-state-inside-my-function&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;æ­¤ç­”æ¡ˆ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æˆ‘å¸Œæœ›è¿™ä¸ªTLDRå¾ˆæœ‰å¸®åŠ©ï¼å¦åˆ™ï¼Œæˆ‘ä»¬ç»§ç»­å§ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ¯ä¸ªæ¸²æŸ“éƒ½æœ‰è‡ªå·±çš„propså’ŒçŠ¶æ€&quot;&gt;&lt;a href=&quot;#%E6%AF%8F%E4%B8%AA%E6%B8%B2%E6%9F%93%E9%83%BD%E6%9C%89%E8%87%AA%E5%B7%B1%E7%9A%84props%E5%92%8C%E7%8A%B6%E6%80%81&quot; aria-label=&quot;æ¯ä¸ªæ¸²æŸ“éƒ½æœ‰è‡ªå·±çš„propså’ŒçŠ¶æ€ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;æ¯ä¸ªæ¸²æŸ“éƒ½æœ‰è‡ªå·±çš„propså’ŒçŠ¶æ€&lt;/h2&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬è°ˆè®ºæ•ˆæœä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è®¨è®ºæ¸²æŸ“ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªcounterã€‚ä»”ç»†æŸ¥çœ‹çªå‡ºæ˜¾ç¤ºçš„è¡Œï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setCount&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;&lt;span class=&quot;token plain-text&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;You clicked &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt; times&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;count &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;token plain-text&quot;&gt;        Click me&lt;/span&gt;
&lt;span class=&quot;token plain-text&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;token plain-text&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™æ˜¯ä»€ä¹ˆæ„æ€?æ˜¯å¦&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;ä»¥æŸç§æ–¹å¼â€œç›‘è§†â€çŠ¶æ€çš„æ›´æ”¹å¹¶è‡ªåŠ¨æ›´æ–°? å½“ä½ å­¦ä¹ Reactæ—¶ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„ç¬¬ä¸€ç›´è§‰ï¼Œä½†å®ƒä¸æ˜¯ä¸€ä¸ªå‡†ç¡®çš„&lt;a href=&quot;https://github.com/xiaohesong/TIL/blob/master/front-end/react/overreact/react%E4%BD%9C%E4%B8%BAui%E8%BF%90%E8%A1%8C.md&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;å¿ƒç†æ¨¡å‹&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œ&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;åªæ˜¯ä¸€ä¸ªæ•°å­—ã€‚&lt;/strong&gt; å®ƒä¸æ˜¯ç¥å¥‡çš„â€œæ•°æ®ç»‘å®šâ€ï¼Œâ€œè§‚å¯Ÿè€…â€ï¼Œâ€œä»£ç†â€æˆ–å…¶ä»–ä»»ä½•ä¸œè¥¿ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¤è€çš„æ•°å­—:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;You clicked &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; times&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬çš„ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ï¼Œæˆ‘ä»¬ä»&lt;code class=&quot;language-text&quot;&gt;useState()&lt;/code&gt;å¾—åˆ°çš„&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;å˜é‡æ˜¯&lt;code class=&quot;language-text&quot;&gt;0&lt;/code&gt;ã€‚å½“æˆ‘ä»¬è°ƒç”¨&lt;code class=&quot;language-text&quot;&gt;setCount(1)&lt;/code&gt;æ—¶ï¼ŒReactå†æ¬¡è°ƒç”¨æˆ‘ä»¬çš„ç»„ä»¶ã€‚è¿™ä¸€æ¬¡ï¼Œ&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;å°†æ˜¯&lt;code class=&quot;language-text&quot;&gt;1&lt;/code&gt;ã€‚ä¾æ­¤ç±»æ¨ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// During first render&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Returned by useState()&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;You clicked &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; times&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// After a click, our function is called again&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Returned by useState()&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;You clicked &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; times&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// After another click, our function is called again&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Returned by useState()&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;You clicked &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; times&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;æ¯å½“æˆ‘ä»¬æ›´æ–°çŠ¶æ€æ—¶ï¼ŒReactéƒ½ä¼šè°ƒç”¨æˆ‘ä»¬çš„ç»„ä»¶ã€‚æ¯ä¸ªæ¸²æŸ“ç»“æœâ€œçœ‹åˆ°â€å®ƒè‡ªå·±çš„&lt;code class=&quot;language-text&quot;&gt;counter&lt;/code&gt;çŠ¶æ€å€¼ï¼Œè¿™æ˜¯æˆ‘ä»¬å‡½æ•°å†…çš„å¸¸é‡ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥è¿™ä¸€è¡Œæ²¡æœ‰åšä»»ä½•ç‰¹æ®Šçš„æ•°æ®ç»‘å®šï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;You clicked &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt; times&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;å®ƒåªæ˜¯åœ¨æ¸²æŸ“è¾“å‡ºä¸­åµŒå…¥ä¸€ä¸ªæ•°å€¼ã€‚&lt;/strong&gt; è¯¥æ•°å­—ç”±Reactæä¾›ã€‚å½“æˆ‘ä»¬&lt;code class=&quot;language-text&quot;&gt;setCount&lt;/code&gt;æ—¶ï¼ŒReactå†æ¬¡ä½¿ç”¨ä¸åŒçš„&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;å€¼è°ƒç”¨æˆ‘ä»¬çš„ç»„ä»¶ã€‚ç„¶åReactæ›´æ–°DOMä»¥åŒ¹é…æˆ‘ä»¬æœ€æ–°çš„æ¸²æŸ“è¾“å‡ºã€‚&lt;/p&gt;
&lt;p&gt;å…³é”®æ˜¯ï¼Œä»»ä½•ç‰¹å®šæ¸²æŸ“ä¸­çš„&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;å¸¸é‡éƒ½ä¸ä¼šéšæ—¶é—´å˜åŒ–ã€‚å†æ¬¡è°ƒç”¨çš„æ˜¯æˆ‘ä»¬çš„ç»„ä»¶â€”â€”æ¯ä¸ªæ¸²æŸ“éƒ½â€œçœ‹åˆ°â€è‡ªå·±çš„&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;å€¼ï¼Œè¯¥å€¼åœ¨æ¸²æŸ“ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ã€‚&lt;/p&gt;
&lt;p&gt;(æœ‰å…³æ­¤è¿‡ç¨‹çš„æ·±å…¥æ¦‚è¿°ï¼Œè¯·æŸ¥çœ‹æˆ‘çš„å¸–å­&lt;a href=&quot;https://github.com/xiaohesong/TIL/blob/master/front-end/react/overreact/react%E4%BD%9C%E4%B8%BAui%E8%BF%90%E8%A1%8C.md&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Reactä½œä¸ºUIè¿è¡Œæ—¶&lt;/a&gt;ã€‚)&lt;/p&gt;
&lt;h2 id=&quot;æ¯ä¸ªæ¸²æŸ“éƒ½æœ‰è‡ªå·±çš„äº‹ä»¶å¤„ç†ç¨‹åº&quot;&gt;&lt;a href=&quot;#%E6%AF%8F%E4%B8%AA%E6%B8%B2%E6%9F%93%E9%83%BD%E6%9C%89%E8%87%AA%E5%B7%B1%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F&quot; aria-label=&quot;æ¯ä¸ªæ¸²æŸ“éƒ½æœ‰è‡ªå·±çš„äº‹ä»¶å¤„ç†ç¨‹åº permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;æ¯ä¸ªæ¸²æŸ“éƒ½æœ‰è‡ªå·±çš„äº‹ä»¶å¤„ç†ç¨‹åº&lt;/h2&gt;
&lt;p&gt;åˆ°ç°åœ¨ä¸ºæ­¢è¿˜æŒºå¥½ã€‚é‚£ä¹ˆå…³äºäº‹ä»¶å¤„ç†ç¨‹åºæ˜¯æ€æ ·çš„ï¼Ÿ&lt;/p&gt;
&lt;p&gt;çœ‹çœ‹è¿™ä¸ªä¾‹å­ã€‚å®ƒä¼šåœ¨ä¸‰ç§’é’Ÿåæ˜¾ç¤º&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;çš„å¼¹æ¡†ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setCount&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleAlertClick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;You clicked on: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; count&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;You clicked &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt; times&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;count &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        Click me
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;handleAlertClick&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        Show alert
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å‡è®¾æˆ‘æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¢åŠ &lt;/strong&gt; è®¡æ•°åˆ°3&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‚¹å‡»&lt;/strong&gt; â€œShow alertâ€&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¢åŠ &lt;/strong&gt; åˆ°5ï¼Œåœ¨timeoutè§¦å‘ä¹‹å‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://overreacted.io/counter-46c55d5f1f749462b7a173f1e748e41e.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä½ å¸Œæœ›å¼¹å‡ºæ¡†æ˜¾ç¤ºä»€ä¹ˆï¼Ÿå®ƒä¼šæ˜¾ç¤º5 - è¿™æ˜¯å¼¹æ¡†æ—¶çš„è®¡æ•°å™¨çŠ¶æ€å—ï¼Ÿæˆ–è€…å®ƒä¼šæ˜¾ç¤º3 - æˆ‘ç‚¹å‡»æ—¶çš„çŠ¶æ€ï¼Ÿ&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;å‰§é€&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æ¥å§ï¼Œ&lt;a href=&quot;%5Btry%20it%20yourself!%5D(https://codesandbox.io/s/w2wxl3yo0l)&quot;&gt;äº²è‡ªå°è¯•ä¸€ä¸‹&lt;/a&gt;ï¼&lt;/p&gt;
&lt;p&gt;å¦‚æœè¿™ç§è¡Œä¸ºå¯¹ä½ æ²¡æœ‰æ„ä¹‰ï¼Œæƒ³è±¡ä¸€ä¸ªæ›´å®é™…çš„ä¾‹å­ï¼šä¸€ä¸ªèŠå¤©åº”ç”¨ç¨‹åºï¼Œå½“å‰æ”¶ä»¶äººIDåœ¨çŠ¶æ€ä¸­ï¼Œå¹¶æœ‰ä¸€ä¸ªå‘é€æŒ‰é’®ã€‚&lt;a href=&quot;https://github.com/xiaohesong/TIL/blob/master/front-end/react/overreact/%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6%E4%B8%8E%E7%B1%BB%E6%9C%89%E4%BB%80%E4%B9%88%E4%B8%8D%E5%90%8C.md&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;è¿™ç¯‡æ–‡ç« &lt;/a&gt;æ·±å…¥æ¢è®¨äº†åŸå› ï¼Œä½†æ­£ç¡®çš„ç­”æ¡ˆæ˜¯3ã€‚&lt;/p&gt;
&lt;p&gt;å¼¹æ¡†(alert)å°†åœ¨æˆ‘å•å‡»æŒ‰é’®æ—¶â€œæ•è·â€çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;(&lt;em&gt;æœ‰ä¸€äº›æ–¹æ³•å¯ä»¥å®ç°å…¶ä»–è¡Œä¸ºï¼Œä½†æˆ‘ç°åœ¨å°†å…³æ³¨é»˜è®¤æƒ…å†µã€‚å½“æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªå¿ƒç†æ¨¡å‹æ—¶ï¼Œé‡è¦çš„æ˜¯æˆ‘ä»¬è¦åŒºåˆ†â€œæœ€å°é˜»åŠ›è·¯å¾„â€å’Œé€‰æ‹©è¿›å…¥é€ƒç”Ÿèˆ±ã€‚&lt;/em&gt;)&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ä½†å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å·²ç»è®¨è®ºè¿‡&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;å€¼å¯¹äºæˆ‘ä»¬å‡½æ•°çš„æ¯ä¸ªç‰¹å®šè°ƒç”¨éƒ½æ˜¯å¸¸é‡ã€‚å€¼å¾—å¼ºè°ƒçš„æ˜¯è¿™ä¸€ç‚¹ â€” &lt;strong&gt;æˆ‘ä»¬çš„å‡½æ•°è¢«è°ƒç”¨äº†å¾ˆå¤šæ¬¡(æ¯æ¬¡æ¸²æŸ“ä¸€æ¬¡)ï¼Œä½†æ˜¯æ¯æ¬¡è°ƒç”¨çš„&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;å€¼éƒ½æ˜¯å¸¸é‡ï¼Œå¹¶è¢«è®¾ç½®ä¸ºä¸€ä¸ªç‰¹å®šçš„å€¼(è¯¥æ¸²æŸ“çš„çŠ¶æ€)ã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;è¿™ä¸æ˜¯Reactæ‰€ç‰¹æœ‰çš„ - å¸¸è§„å‡½æ•°ä»¥ç±»ä¼¼çš„æ–¹å¼å·¥ä½œï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sayHi&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; person&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Hello, &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; someone &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Dan&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;sayHi&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;someone&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

someone &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Yuzhi&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;sayHi&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;someone&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

someone &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Dominic&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;sayHi&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;someone&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åœ¨&lt;a href=&quot;https://codesandbox.io/s/mm6ww11lk8&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;æ­¤ç¤ºä¾‹&lt;/a&gt;ä¸­ï¼Œå¤–éƒ¨&lt;code class=&quot;language-text&quot;&gt;someone&lt;/code&gt;å˜é‡è¢«é‡æ–°åˆ†é…å¤šæ¬¡ã€‚(å°±åƒReactä¸­çš„æŸä¸ªåœ°æ–¹ä¸€æ ·ï¼Œ&lt;em&gt;å½“å‰&lt;/em&gt; çš„ç»„ä»¶çŠ¶æ€å¯ä»¥æ”¹å˜ã€‚) &lt;strong&gt;ä½†æ˜¯ï¼Œåœ¨&lt;code class=&quot;language-text&quot;&gt;sayHi&lt;/code&gt;ä¸­ï¼Œæœ‰ä¸€ä¸ªæœ¬åœ°&lt;code class=&quot;language-text&quot;&gt;name&lt;/code&gt;å¸¸é‡ä¸ç‰¹å®šè°ƒç”¨ä¸­çš„&lt;code class=&quot;language-text&quot;&gt;person&lt;/code&gt;ç›¸å…³è”ã€‚&lt;/strong&gt; é‚£ä¸ªå¸¸é‡æ˜¯æœ¬åœ°çš„ï¼Œæ‰€ä»¥å®ƒåœ¨è°ƒç”¨ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ï¼å› æ­¤ï¼Œå½“è¶…æ—¶è§¦å‘æ—¶ï¼Œæ¯ä¸ªå¼¹æ¡†éƒ½ä¼šâ€œè®°ä½â€ä»–è‡ªå·±çš„&lt;code class=&quot;language-text&quot;&gt;name&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™è§£é‡Šäº†æˆ‘ä»¬çš„äº‹ä»¶å¤„ç†ç¨‹åºå¦‚ä½•åœ¨å•å‡»æ—¶æ•è·&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;ã€‚å¦‚æœæˆ‘ä»¬åº”ç”¨ç›¸åŒçš„æ›¿æ¢åŸåˆ™ï¼Œæ¯ä¸ªæ¸²æŸ“â€œçœ‹åˆ°â€å®ƒè‡ªå·±çš„&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// During first render&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Returned by useState()  // ...&lt;/span&gt;&lt;/span&gt;  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleAlertClick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;You clicked on: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; count&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// After a click, our function is called again&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Returned by useState()  // ...&lt;/span&gt;&lt;/span&gt;  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleAlertClick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;You clicked on: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; count&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// After another click, our function is called again&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Returned by useState()  // ...&lt;/span&gt;&lt;/span&gt;  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleAlertClick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;You clicked on: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; count&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¦‚æ­¤æœ‰æ•ˆï¼Œæ¯ä¸ªæ¸²æŸ“éƒ½è¿”å›è‡ªå·±â€œç‰ˆæœ¬â€çš„&lt;code class=&quot;language-text&quot;&gt;handleAlertClick&lt;/code&gt;ã€‚æ¯ä¸ªç‰ˆæœ¬éƒ½â€œè®°ä½â€è‡ªå·±çš„&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// During first render&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleAlertClick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;      &lt;span class=&quot;token function&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;You clicked on: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;handleAlertClick&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// The one with 0 inside&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// After a click, our function is called again&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleAlertClick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;      &lt;span class=&quot;token function&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;You clicked on: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;handleAlertClick&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// The one with 1 inside&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// After another click, our function is called again&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleAlertClick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;      &lt;span class=&quot;token function&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;You clicked on: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;handleAlertClick&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// The one with 2 inside&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ&lt;a href=&quot;https://codesandbox.io/s/w2wxl3yo0l&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;åœ¨è¿™ä¸ªæ¼”ç¤º&lt;/a&gt;ä¸­ äº‹ä»¶å¤„ç†ç¨‹åºâ€œå±äºâ€ç‰¹å®šæ¸²æŸ“ï¼Œå½“ä½ ç‚¹å‡»æ—¶ï¼Œå®ƒä¼šç»§ç»­ä½¿ç”¨ &lt;em&gt;è¯¥&lt;/em&gt; æ¸²æŸ“ä¸­çš„&lt;code class=&quot;language-text&quot;&gt;counter&lt;/code&gt;çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åœ¨ä»»ä½•ç‰¹å®šæ¸²æŸ“ä¸­ï¼Œpropså’ŒçŠ¶æ€æ°¸è¿œä¿æŒä¸å˜ã€‚&lt;/strong&gt; ä½†æ˜¯ï¼Œå¦‚æœåœ¨æ¸²æŸ“ä¹‹é—´éš”ç¦»äº†propså’ŒçŠ¶æ€ï¼Œé‚£ä¹ˆä½¿ç”¨å®ƒä»¬çš„ä»»ä½•å€¼(åŒ…æ‹¬äº‹ä»¶å¤„ç†ç¨‹åº)éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚å®ƒä»¬ä¹Ÿâ€œå±äºâ€ç‰¹å®šçš„æ¸²æŸ“ã€‚å› æ­¤ï¼Œå³ä½¿äº‹ä»¶å¤„ç†ç¨‹åºä¸­çš„å¼‚æ­¥å‡½æ•°ä¹Ÿä¼šâ€œçœ‹åˆ°â€ç›¸åŒçš„&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;å€¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;æ—æ³¨ï¼šæˆ‘å°†å…·ä½“&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;å€¼å†…è”åˆ°ä¸Šé¢çš„&lt;code class=&quot;language-text&quot;&gt;handleAlertClick&lt;/code&gt;å‡½æ•°ä¸­ã€‚è¿™ç§å¿ƒç†æ›¿ä»£æ˜¯å®‰å…¨çš„ï¼Œå› ä¸º&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;ä¸å¯èƒ½åœ¨ç‰¹å®šæ¸²æŸ“ä¸­æ”¹å˜ã€‚å®ƒè¢«å£°æ˜ä¸º&lt;code class=&quot;language-text&quot;&gt;const&lt;/code&gt;å¹¶ä¸”æ˜¯ä¸€ä¸ªæ•°å­—ã€‚ä»¥åŒæ ·çš„æ–¹å¼è€ƒè™‘å…¶ä»–å€¼(æ¯”å¦‚å¯¹è±¡)æ˜¯å®‰å…¨çš„ï¼Œä½†å‰ææ˜¯æˆ‘ä»¬åŒæ„é¿å…çŠ¶æ€çš„å˜åŒ–ã€‚ä½¿ç”¨æ–°åˆ›å»ºçš„å¯¹è±¡è°ƒç”¨&lt;code class=&quot;language-text&quot;&gt;setSomething(newObj)&lt;/code&gt;è€Œä¸æ˜¯å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œå› ä¸ºå±äºä»¥å‰æ¸²æŸ“çš„çŠ¶æ€æ˜¯å®Œæ•´çš„ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;æ¯ä¸ªæ¸²æŸ“éƒ½æœ‰è‡ªå·±çš„æ•ˆæœeffects&quot;&gt;&lt;a href=&quot;#%E6%AF%8F%E4%B8%AA%E6%B8%B2%E6%9F%93%E9%83%BD%E6%9C%89%E8%87%AA%E5%B7%B1%E7%9A%84%E6%95%88%E6%9E%9Ceffects&quot; aria-label=&quot;æ¯ä¸ªæ¸²æŸ“éƒ½æœ‰è‡ªå·±çš„æ•ˆæœeffects permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;æ¯ä¸ªæ¸²æŸ“éƒ½æœ‰è‡ªå·±çš„æ•ˆæœ(effects)&lt;/h2&gt;
&lt;p&gt;è¿™åº”è¯¥æ˜¯ä¸€ä¸ªå…³äºæ•ˆæœçš„è®ºè¿°ï¼Œä½†æˆ‘ä»¬è¿˜æ²¡æœ‰è°ˆåˆ°æ•ˆæœ!æˆ‘ä»¬ç°åœ¨è¦çº æ­£è¿™ä¸ªé—®é¢˜ã€‚äº‹å®è¯æ˜ï¼Œæ•ˆæœå¹¶æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬å›åˆ°&lt;a href=&quot;https://github.com/xiaohesong/TIL/blob/master/front-end/react/hooks/effect-hook.md&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;æ–‡æ¡£ä¸­&lt;/a&gt;çš„ä¸€ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setCount&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`You clicked &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;count&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; times`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;You clicked &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt; times&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;count &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        Click me
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼šæ•ˆæœå¦‚ä½•è¯»å–æœ€æ–°çš„&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;çŠ¶æ€ï¼Ÿ&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;ä¹Ÿè®¸ï¼Œæœ‰æŸç§â€œæ•°æ®ç»‘å®šâ€æˆ–â€œè§‚æŸ¥â€ä½¿å¾—&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;æ›´æ–°åœ¨æ•ˆæœå‡½æ•°ä¸­ç”Ÿæ•ˆï¼Ÿä¹Ÿè®¸&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;æ˜¯ä¸€ä¸ªå¯å˜å˜é‡ï¼ŒReactåœ¨æˆ‘ä»¬çš„ç»„ä»¶ä¸­è®¾ç½®ï¼Œä»¥ä¾¿æˆ‘ä»¬çš„æ•ˆæœæ€»èƒ½çœ‹åˆ°æœ€æ–°å€¼ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ä¸ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å·²ç»çŸ¥é“&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;åœ¨ç‰¹å®šç»„ä»¶æ¸²æŸ“ä¸­æ˜¯æ’å®š(å¸¸é‡)çš„ã€‚äº‹ä»¶å¤„ç†ç¨‹åºä»æ¸²æŸ“ä¸­â€œæŸ¥çœ‹â€å®ƒä»¬â€œæ‰€å±â€çš„&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;çŠ¶æ€ï¼Œå› ä¸º&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;æ˜¯å®ƒä»¬ä½œç”¨åŸŸä¸­çš„ä¸€ä¸ªå˜é‡ã€‚æ•ˆæœä¹Ÿæ˜¯å¦‚æ­¤ï¼&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;å˜é‡ä¸æ˜¯ä»¥æŸç§æ–¹å¼åœ¨â€œä¸å˜â€æ•ˆæœä¸­å‘ç”Ÿå˜åŒ–ã€‚&lt;em&gt;æ•ˆæœå‡½æ•°æœ¬èº«&lt;/em&gt; åœ¨æ¯ä¸ªæ¸²æŸ“ä¸Šéƒ½æ˜¯ä¸åŒçš„ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªç‰ˆæœ¬ä»å…¶â€œæ‰€å±â€çš„æ¸²æŸ“ä¸­â€œçœ‹åˆ°â€&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;å€¼ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// During first render&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ä¸»è¦æ˜¯çœ‹è¿™é‡Œ&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Effect function from first render&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`You clicked &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; times`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// After a click, our function is called again&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ä¸»è¦æ˜¯çœ‹è¿™é‡Œ&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Effect function from second render&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`You clicked &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; times`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// After another click, our function is called again&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ä¸»è¦æ˜¯çœ‹è¿™é‡Œ&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Effect function from third render&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`You clicked &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; times`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ..&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Reactä¼šè®°ä½ä½ æä¾›çš„æ•ˆæœå‡½æ•°ï¼Œåˆ·æ–°å¯¹DOMçš„æ›´æ”¹å¹¶è®©æµè§ˆå™¨ç»˜åˆ¶åˆ°å±å¹•åè¿è¡Œè¯¥å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œå³ä½¿æˆ‘ä»¬åœ¨è¿™é‡Œè°ˆåˆ°å•ä¸€æ¦‚å¿µçš„&lt;em&gt;æ•ˆæœ&lt;/em&gt;(ç¤ºä¾‹ä¸­çš„æ›´æ–°æ–‡æ¡£æ ‡é¢˜(&lt;code class=&quot;language-text&quot;&gt;document.title=&amp;#39;&amp;#39;&lt;/code&gt;))ï¼Œå®ƒä¹Ÿä¼šåœ¨æ¯ä¸ªæ¸²æŸ“ä¸Šç”¨&lt;em&gt;ä¸åŒçš„å‡½æ•°&lt;/em&gt; è¡¨ç¤º â€” å¹¶ä¸”æ¯ä¸ªæ•ˆæœå‡½æ•°ä»å®ƒæ‰€å±çš„ç‰¹å®šæ¸²æŸ“ä¸­â€œçœ‹åˆ°â€propså’ŒçŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä»æ¦‚å¿µä¸Šè®²ï¼Œä½ å¯ä»¥æƒ³è±¡æ•ˆæœæ˜¯ &lt;em&gt;æ¸²æŸ“ç»“æœçš„ä¸€éƒ¨åˆ†&lt;/em&gt; ã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;ä¸¥æ ¼åœ°è¯´ï¼Œå®ƒä»¬ä¸æ˜¯(ä¸ºäº†&lt;a href=&quot;https://github.com/xiaohesong/TIL/blob/master/front-end/react/overreact/Why-Do-React-Hooks-Rely-on-Call-Order.md&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;å…è®¸Hookç»„åˆ&lt;/a&gt;è€Œæ²¡æœ‰ç¬¨æ‹™çš„è¯­æ³•æˆ–è¿è¡Œæ—¶å¼€é”€)ã€‚ä½†æ˜¯åœ¨æˆ‘ä»¬æ„å»ºçš„å¿ƒç†æ¨¡å‹ä¸­ï¼Œæ•ˆæœå‡½æ•°å±äºç‰¹å®šçš„æ¸²æŸ“ï¼Œå°±åƒäº‹ä»¶å¤„ç†ç¨‹åºä¸€æ ·ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ä¸ºäº†ç¡®ä¿æˆ‘ä»¬æœ‰ä¸€ä¸ªæ‰å®çš„ç†è§£ï¼Œè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹æˆ‘ä»¬çš„ç¬¬ä¸€æ¬¡æ¸²æŸ“ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;React:&lt;/strong&gt; ç»™æˆ‘ä¸€ä¸ªå½“çŠ¶æ€ä¸º&lt;code class=&quot;language-text&quot;&gt;0&lt;/code&gt;æ—¶UIã€‚&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½ çš„ç»„ä»¶:&lt;/strong&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿™æ˜¯æ¸²æŸ“ç»“æœï¼š&lt;code class=&quot;language-text&quot;&gt;&amp;lt;p&amp;gt;You clicked 0 times&amp;lt;/p&amp;gt;&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è¿˜è®°å¾—åœ¨å®Œæˆåè¿è¡Œæ­¤æ•ˆæœï¼š&lt;code class=&quot;language-text&quot;&gt;() =&amp;gt; { document.title = &amp;#39;You clicked 0 times&amp;#39; }&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;React:&lt;/strong&gt; å½“ç„¶ã€‚æ›´æ–°UIã€‚å˜¿æµè§ˆå™¨ï¼Œæˆ‘æ­£åœ¨å‘DOMæ·»åŠ ä¸€äº›ä¸œè¥¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Browser:&lt;/strong&gt; å¾ˆé…·ï¼Œæˆ‘æŠŠå®ƒç”»åˆ°äº†å±å¹•ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;React:&lt;/strong&gt; å¥½çš„ï¼Œç°åœ¨æˆ‘è¦è¿è¡Œä½ ç»™æˆ‘çš„æ•ˆæœäº†ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿è¡Œ &lt;code class=&quot;language-text&quot;&gt;() =&amp;gt; { document.title = &amp;#39;You clicked 0 times&amp;#39; }&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;ç°åœ¨è®©æˆ‘ä»¬å›é¡¾ç‚¹å‡»åå‘ç”Ÿçš„äº‹æƒ…ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½ çš„ç»„ä»¶:&lt;/strong&gt; å˜¿Reactï¼ŒæŠŠæˆ‘çš„çŠ¶æ€è®¾ç½®ä¸º&lt;code class=&quot;language-text&quot;&gt;1&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;React:&lt;/strong&gt; ç»™æˆ‘çŠ¶æ€ä¸º&lt;code class=&quot;language-text&quot;&gt;1&lt;/code&gt;æ—¶çš„UIã€‚&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½ çš„ç»„ä»¶:&lt;/strong&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿™æ˜¯æ¸²æŸ“ç»“æœï¼š&lt;code class=&quot;language-text&quot;&gt;&amp;lt;p&amp;gt;You clicked 1 times&amp;lt;/p&amp;gt;&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è¿˜è®°å¾—åœ¨å®Œæˆåè¿è¡Œæ­¤æ•ˆæœï¼š&lt;code class=&quot;language-text&quot;&gt;() =&amp;gt; { document.title = &amp;#39;You clicked 1 times&amp;#39; }&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;React:&lt;/strong&gt; å½“ç„¶ã€‚æ›´æ–°UIã€‚å˜¿æµè§ˆå™¨ï¼Œæˆ‘æ”¹å˜äº†DOMã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Browser:&lt;/strong&gt; å¾ˆé…·ï¼Œæˆ‘æŠŠä½ çš„æ›´æ”¹ç”»åˆ°äº†å±å¹•ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;React:&lt;/strong&gt; å¥½çš„ï¼Œç°åœ¨æˆ‘å°†è¿è¡Œå±äºæˆ‘åˆšåˆšåšçš„æ¸²æŸ“çš„æ•ˆæœã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿è¡Œ &lt;code class=&quot;language-text&quot;&gt;() =&amp;gt; { document.title = &amp;#39;You clicked 1 times&amp;#39; }&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;æ¯ä¸ªæ¸²æŸ“éƒ½æœ‰å®ƒè‡ªå·±ä¸€åˆ‡&quot;&gt;&lt;a href=&quot;#%E6%AF%8F%E4%B8%AA%E6%B8%B2%E6%9F%93%E9%83%BD%E6%9C%89%E5%AE%83%E8%87%AA%E5%B7%B1%E4%B8%80%E5%88%87&quot; aria-label=&quot;æ¯ä¸ªæ¸²æŸ“éƒ½æœ‰å®ƒè‡ªå·±ä¸€åˆ‡ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;æ¯ä¸ªæ¸²æŸ“éƒ½æœ‰å®ƒè‡ªå·±â€¦ä¸€åˆ‡&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æˆ‘ä»¬ç°åœ¨çŸ¥é“åœ¨æ¯æ¬¡æ¸²æŸ“ä¹‹åè¿è¡Œçš„æ•ˆæœåœ¨æ¦‚å¿µä¸Šæ˜¯ç»„ä»¶è¾“å‡ºçš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”â€œçœ‹åˆ°â€æ¥è‡ªè¯¥ç‰¹å®šæ¸²æŸ“çš„propså’ŒçŠ¶æ€ã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ¥è¯•è¯•å§ã€‚è€ƒè™‘ä»¥ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setCount&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// æ‰‹åŠ¨é«˜äº®&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`You clicked &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;count&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; times`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;You clicked &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt; times&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;count &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        Click me
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¦‚æœæˆ‘ç¨å¾®ç‚¹å‡»å‡ æ¬¡ï¼Œé‚£ä¹ˆlogä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿ&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;å‰§é€&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ä½ å¯èƒ½è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œæœ€ç»ˆç»“æœæ˜¯ä¸ç›´è§‚çš„ã€‚ä¸æ˜¯è¿™æ ·çš„ï¼æˆ‘ä»¬å°†çœ‹åˆ°ä¸€ç³»åˆ—æ—¥å¿— - æ¯ä¸ªæ—¥å¿—å±äºç‰¹å®šçš„æ¸²æŸ“ï¼Œå› æ­¤å…·æœ‰è‡ªå·±çš„&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;å€¼ã€‚ä½ å¯ä»¥&lt;a href=&quot;https://codesandbox.io/s/lyx20m1ol&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;è‡ªå·±è¯•è¯•&lt;/a&gt;ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://overreacted.io/timeout_counter-a5727d333c270e05942f508707265378.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä½ å¯èƒ½ä¼šæƒ³ï¼šâ€œå½“ç„¶ï¼Œè¿™å°±æ˜¯å®ƒçš„å·¥ä½œåŸç†ï¼ä¸ç„¶å®ƒè¿˜èƒ½æ€æ ·å·¥ä½œï¼Ÿâ€œ&lt;/p&gt;
&lt;p&gt;å¥½å§ï¼Œè¿™ä¸æ˜¯&lt;code class=&quot;language-text&quot;&gt;this.state&lt;/code&gt;åœ¨ç±»ä¸Šçš„è¿ä½œæ–¹å¼ã€‚å¾ˆå®¹æ˜“é”™è¯¯åœ°è®¤ä¸ºè¿™ä¸ª&lt;a href=&quot;https://codesandbox.io/s/kkymzwjqz3&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ç±»çš„å®ç°&lt;/a&gt;æ˜¯ç­‰ä»·çš„:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token function&quot;&gt;componentDidUpdate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`You clicked &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;count&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; times`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œ&lt;code class=&quot;language-text&quot;&gt;this.state.count&lt;/code&gt;å§‹ç»ˆæŒ‡å‘æœ€æ–°è®¡æ•°è€Œä¸æ˜¯å±äºç‰¹å®šæ¸²æŸ“çš„è®¡æ•°ã€‚æ‰€ä»¥ä½ ä¼šçœ‹åˆ°æ¯æ¬¡è®°å½•&lt;code class=&quot;language-text&quot;&gt;5&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://overreacted.io/timeout_counter_class-264b329edc111a1973003bdf2bcacd65.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘è®¤ä¸ºå…·æœ‰è®½åˆºæ„å‘³çš„æ˜¯ï¼ŒHookä¸¥é‡ä¾èµ–äºJavaScripté—­åŒ…ï¼Œç„¶è€Œæ­£æ˜¯ç±»å®ç°é­å—äº†&lt;a href=&quot;https://wsvincent.com/javascript-closure-settimeout-for-loop/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;å…¸å‹çš„è¶…æ—¶é”™è¯¯å€¼çš„æ··æ·†&lt;/a&gt;ï¼Œè€Œè¿™ç§æ··æ·†é€šå¸¸ä¸é—­åŒ…ç›¸å…³ã€‚è¿™æ˜¯å› ä¸ºæœ¬ä¾‹ä¸­æ··æ·†çš„å®é™…æ¥æºæ˜¯çªå˜ï¼ˆreactä½¿ç±»ä¸­çš„&lt;code class=&quot;language-text&quot;&gt;this.state&lt;/code&gt;å‘ç”Ÿçªå˜ï¼Œä»¥æŒ‡å‘æœ€æ–°çŠ¶æ€ï¼‰ï¼Œè€Œä¸æ˜¯é—­åŒ…æœ¬èº«ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å½“ä½ ç›¸å…³çš„å€¼æ°¸è¿œä¸å˜æ—¶ï¼Œé—­åŒ…æ˜¯éå¸¸æ£’çš„ã€‚è¿™ä½¿å¾—å®ƒä»¬æ˜“äºæ€è€ƒï¼Œå› ä¸ºä½ å®è´¨ä¸Šæ˜¯æŒ‡å‘å¸¸é‡ã€‚&lt;/strong&gt; æ­£å¦‚æˆ‘ä»¬æ‰€è®¨è®ºçš„ï¼Œpropså’ŒçŠ¶æ€æ°¸è¿œä¸ä¼šåœ¨ç‰¹å®šæ¸²æŸ“ä¸­å‘ç”Ÿå˜åŒ–ã€‚é¡ºä¾¿è¯´ä¸€å¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡&lt;a href=&quot;https://codesandbox.io/s/w7vjo07055&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ä½¿ç”¨é—­åŒ…&lt;/a&gt;ä¿®å¤ç±»ç‰ˆæœ¬ä¸­çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&quot;é€†åŠ¿è€Œè¡Œé€†æµè€Œä¸Šswimming-against-the-tide&quot;&gt;&lt;a href=&quot;#%E9%80%86%E5%8A%BF%E8%80%8C%E8%A1%8C%E9%80%86%E6%B5%81%E8%80%8C%E4%B8%8Aswimming-against-the-tide&quot; aria-label=&quot;é€†åŠ¿è€Œè¡Œé€†æµè€Œä¸Šswimming against the tide permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;é€†åŠ¿è€Œè¡Œ(é€†æµè€Œä¸Š)(Swimming Against the Tide)&lt;/h2&gt;
&lt;p&gt;åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘ä»¬æ˜ç¡®åœ°ç§°ä¹‹ä¸ºï¼šç»„ä»¶æ¸²æŸ“ä¸­çš„ &lt;strong&gt;æ¯ä¸ª&lt;/strong&gt; å‡½æ•°(åŒ…æ‹¬äº‹ä»¶å¤„ç†ç¨‹åºã€æ•ˆæœã€è¶…æ—¶æˆ–å…¶ä¸­çš„APIè°ƒç”¨)éƒ½ä¼šæ•è·å®šä¹‰å®ƒçš„æ¸²æŸ“è°ƒç”¨çš„propså’ŒçŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥è¿™ä¸¤ä¸ªä¾‹å­æ˜¯ç­‰ä»·çš„ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Example&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;      console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;counter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Example&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; counter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;counter&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;      console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;counter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;æ— è®ºä½ æ˜¯å¦åœ¨ç»„ä»¶å†…éƒ¨ä»propsæˆ–çŠ¶æ€ä¸­â€æå‰â€è¯»å–éƒ½æ— å…³ç´§è¦ã€‚&lt;/strong&gt; ä»–ä»¬ä¸ä¼šæ”¹å˜ï¼åœ¨å•ä¸ªæ¸²æŸ“çš„ä½œç”¨åŸŸå†…ï¼Œpropså’ŒçŠ¶æ€ä¿æŒä¸å˜ã€‚ ï¼ˆè§£æ„propsä½¿è¿™æ›´åŠ æ˜æ˜¾ã€‚ï¼‰&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼Œæœ‰æ—¶ä½ å¸Œæœ›åœ¨æ•ˆæœä¸­å®šä¹‰çš„æŸäº›å›è°ƒä¸­è¯»å–æœ€æ–°è€Œéæ•è·çš„å€¼ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨refsï¼Œå¦‚&lt;a href=&quot;#1&quot;&gt;æœ¬æ–‡&lt;/a&gt;æœ€åä¸€èŠ‚æ‰€è¿°ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼Œå½“ä½ æƒ³ä» &lt;em&gt;è¿‡å»&lt;/em&gt; æ¸²æŸ“çš„å‡½æ•°ä¸­è¯»å– &lt;em&gt;æœªæ¥&lt;/em&gt; çš„propsæˆ–çŠ¶æ€æ—¶ï¼Œä½ æ˜¯åœ¨é€†æ½®æµè€Œä¸Šã€‚è¿™å¹¶æ²¡æœ‰é”™(åœ¨æŸäº›æƒ…å†µä¸‹æ˜¯å¿…è¦çš„)ï¼Œä½†æ‰“ç ´è¿™ç§æ¨¡å¼å¯èƒ½çœ‹èµ·æ¥ä¸é‚£ä¹ˆâ€œå¹²å‡€â€ã€‚è¿™æ˜¯ä¸€ä¸ªæœ‰æ„çš„ç»“æœï¼Œå› ä¸ºå®ƒæœ‰åŠ©äºçªå‡ºå“ªäº›ä»£ç æ˜¯è„†å¼±çš„ï¼Œå¹¶ä¸”ä¾èµ–äºæ—¶é—´è€Œæ”¹å˜ã€‚åœ¨ç±»ä¸Šï¼Œå‘ç”Ÿè¿™ç§æƒ…å†µæ—¶ä¸å¤ªæ˜æ˜¾ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æˆ‘ä»¬çš„&lt;a href=&quot;https://codesandbox.io/s/rm7z22qnlp&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;è®¡æ•°å™¨ç¤ºä¾‹çš„ä¸€ä¸ªç‰ˆæœ¬&lt;/a&gt;ï¼Œå®ƒå¤åˆ¶äº†ç±»çš„è¡Œä¸ºï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Example&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setCount&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; latestCount &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useRef&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Set the mutable latest value&lt;/span&gt;
    latestCount&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; count&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// Read the mutable latest value&lt;/span&gt;
      console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`You clicked &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;latestCount&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; times`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://overreacted.io/timeout_counter_refs-78f7948263dd13b023498b23cb99f4fc.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨Reactä¸­æ”¹å˜ä¸€äº›ä¸œè¥¿ä¼¼ä¹å¾ˆå¤æ€ªã€‚ä½†æ˜¯ï¼Œè¿™æ­£æ˜¯Reactæœ¬èº«åœ¨ç±»ä¸­é‡æ–°åˆ†é…&lt;code class=&quot;language-text&quot;&gt;this.state&lt;/code&gt;çš„æ–¹å¼ã€‚ä¸æ•è·çš„propså’Œstateä¸åŒï¼Œä½ æ— æ³•ä¿è¯è¯»å–&lt;code class=&quot;language-text&quot;&gt;latestCount.current&lt;/code&gt;ä¼šåœ¨ä»»ä½•ç‰¹å®šå›è°ƒä¸­ä¸ºä½ æä¾›ç›¸åŒçš„å€¼ã€‚æ ¹æ®å®šä¹‰ï¼Œä½ å¯ä»¥éšæ—¶æ”¹å˜å®ƒã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒä¸æ˜¯é»˜è®¤å€¼ï¼Œä½ å¿…é¡»é€‰æ‹©å®ƒã€‚&lt;/p&gt;
&lt;h2 id=&quot;é‚£ä¹ˆæ¸…ç†å‘¢&quot;&gt;&lt;a href=&quot;#%E9%82%A3%E4%B9%88%E6%B8%85%E7%90%86%E5%91%A2&quot; aria-label=&quot;é‚£ä¹ˆæ¸…ç†å‘¢ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;é‚£ä¹ˆæ¸…ç†å‘¢?&lt;/h2&gt;
&lt;p&gt;æ­£å¦‚&lt;a href=&quot;https://github.com/xiaohesong/TIL/blob/master/front-end/react/hooks/effect-hook.md#%E9%9C%80%E8%A6%81%E6%B8%85%E7%90%86%E7%9A%84%E5%89%AF%E4%BD%9C%E7%94%A8&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;æ–‡æ¡£æ‰€è§£é‡Š&lt;/a&gt;çš„é‚£æ ·ï¼ŒæŸäº›effectå¯èƒ½ä¼šæœ‰ä¸€ä¸ªæ¸…ç†é˜¶æ®µã€‚æœ¬è´¨ä¸Šï¼Œå®ƒçš„ç›®çš„æ˜¯â€œæ’¤æ¶ˆâ€è®¢é˜…ç­‰æƒ…å†µçš„æ•ˆæœã€‚&lt;/p&gt;
&lt;p&gt;è€ƒè™‘ä»¥ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  ChatAPI&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;subscribeToFriendStatus&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; handleStatusChange&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    ChatAPI&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unsubscribeFromFriendStatus&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; handleStatusChange&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å‡è®¾&lt;code class=&quot;language-text&quot;&gt;props&lt;/code&gt;åœ¨ç¬¬ä¸€ä¸ªæ¸²æŸ“æ—¶ä¸º&lt;code class=&quot;language-text&quot;&gt;{idï¼š10}&lt;/code&gt;ï¼Œåœ¨ç¬¬äºŒä¸ªæ¸²æŸ“ä¸Šä¸º&lt;code class=&quot;language-text&quot;&gt;{idï¼š20}&lt;/code&gt;ã€‚ä½  &lt;em&gt;å¯èƒ½&lt;/em&gt; è®¤ä¸ºä¼šå‘ç”Ÿè¿™æ ·çš„äº‹æƒ…:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Reactæ¸…é™¤&lt;code class=&quot;language-text&quot;&gt;{idï¼š10}&lt;/code&gt;çš„æ•ˆæœã€‚&lt;/li&gt;
&lt;li&gt;Reactä¸º&lt;code class=&quot;language-text&quot;&gt;{idï¼š20}&lt;/code&gt;æ¸²æŸ“UIã€‚&lt;/li&gt;
&lt;li&gt;Reactè¿è¡Œ&lt;code class=&quot;language-text&quot;&gt;{idï¼š20}&lt;/code&gt;çš„æ•ˆæœã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(æƒ…å†µå¹¶éå¦‚æ­¤ã€‚)&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨è¿™ä¸ªå¿ƒç†æ¨¡å‹ï¼Œä½ å¯èƒ½è®¤ä¸ºæ¸…ç†â€œçœ‹åˆ°â€äº†æ—§çš„propsï¼Œå› ä¸ºå®ƒåœ¨æˆ‘ä»¬é‡æ–°æ¸²æŸ“ä¹‹å‰è¿è¡Œï¼Œç„¶åæ–°çš„æ•ˆæœâ€œçœ‹åˆ°â€äº†æ–°propsï¼Œå› ä¸ºå®ƒåœ¨é‡æ–°æ¸²æŸ“ä¹‹åè¿è¡Œã€‚è¿™æ˜¯ç›´æ¥ä»ç±»ç”Ÿå‘½å‘¨æœŸä¸­æå–çš„å¿ƒæ™ºæ¨¡å‹ï¼Œ&lt;strong&gt;è¿™é‡Œå¹¶ä¸å‡†ç¡®&lt;/strong&gt; ã€‚è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ˜¯ä¸ºä»€ä¹ˆã€‚&lt;/p&gt;
&lt;p&gt;Reactä»…åœ¨&lt;a href=&quot;https://medium.com/@dan_abramov/this-benchmark-is-indeed-flawed-c3d6b5b6f97f&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;è®©æµè§ˆå™¨ç»˜åˆ¶&lt;/a&gt;åè¿è¡Œæ•ˆæœã€‚è¿™ä½¿ä½ çš„åº”ç”¨ç¨‹åºæ›´å¿«ï¼Œå› ä¸ºå¤§å¤šæ•°æ•ˆæœä¸éœ€è¦é˜»æ­¢å±å¹•æ›´æ–°ã€‚æ•ˆæœæ¸…ç†ä¹Ÿä¼šå»¶è¿Ÿã€‚&lt;strong&gt;ä½¿ç”¨æ–°propsé‡æ–°æ¸²æŸ“&lt;em&gt;å&lt;/em&gt;ï¼Œå‰ä¸€ä¸ªæ•ˆæœä¼šè¢«æ¸…é™¤ï¼š&lt;/strong&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Reactä¸º&lt;code class=&quot;language-text&quot;&gt;{idï¼š20}&lt;/code&gt;æ¸²æŸ“UIã€‚&lt;/strong&gt; &lt;/li&gt;
&lt;li&gt;æµè§ˆå™¨ç»˜åˆ¶ç”»é¢ã€‚æˆ‘ä»¬åœ¨å±å¹•ä¸Šçœ‹åˆ°äº†&lt;code class=&quot;language-text&quot;&gt;{idï¼š20}&lt;/code&gt;çš„ç”¨æˆ·ç•Œé¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Reactæ¸…é™¤&lt;code class=&quot;language-text&quot;&gt;{idï¼š10}&lt;/code&gt;çš„æ•ˆæœã€‚&lt;/strong&gt; &lt;/li&gt;
&lt;li&gt;Reactè¿è¡Œ&lt;code class=&quot;language-text&quot;&gt;{idï¼š20}&lt;/code&gt;çš„æ•ˆæœã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½ å¯èƒ½æƒ³çŸ¥é“ï¼šä½†æ˜¯å¦‚æœåœ¨propså˜ä¸º&lt;code class=&quot;language-text&quot;&gt;{idï¼š20}&lt;/code&gt;ä¹‹åè¿è¡Œï¼Œé‚£ä¹ˆå‰ä¸€æ•ˆæœçš„æ¸…ç†å¦‚ä½•ä»èƒ½â€œçœ‹åˆ°â€æ—§çš„&lt;code class=&quot;language-text&quot;&gt;{idï¼š10}&lt;/code&gt; propsï¼Ÿ&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä»¥å‰æ¥è¿‡è¿™é‡Œâ€¦ğŸ¤”&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://overreacted.io/deja_vu-5fe238cf03a21dfa32af624124fcdcff.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¼•ç”¨ä¸Šä¸€èŠ‚ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç»„ä»¶æ¸²æŸ“ä¸­çš„ &lt;strong&gt;æ¯ä¸ª&lt;/strong&gt; å‡½æ•°(åŒ…æ‹¬äº‹ä»¶å¤„ç†ç¨‹åºã€æ•ˆæœã€è¶…æ—¶æˆ–å…¶ä¸­çš„APIè°ƒç”¨)éƒ½ä¼šæ•è·å®šä¹‰å®ƒçš„æ¸²æŸ“è°ƒç”¨çš„propså’ŒçŠ¶æ€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç°åœ¨ç­”æ¡ˆå¾ˆæ˜ç¡®ï¼ä¸ç®¡è¿™æ„å‘³ç€ä»€ä¹ˆï¼Œæ•ˆæœæ¸…ç†ä¸ä¼šè¯»å–â€œæœ€æ–°â€çš„propsã€‚å®ƒè¯»å–å±äºå®ƒå®šä¹‰çš„æ¸²æŸ“çš„props:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// First render, props are {id: 10}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Example&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Effect from first render&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      ChatAPI&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;subscribeToFriendStatus&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; handleStatusChange&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// Cleanup for effect from first render&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// å˜¿ï¼Œä½ çš„å…³æ³¨ç‚¹æ”¾åœ¨è¿™é‡Œ(æ‰‹åŠ¨é«˜äº®)&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        ChatAPI&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unsubscribeFromFriendStatus&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; handleStatusChange&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Next render, props are {id: 20}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Example&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Effect from second render&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      ChatAPI&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;subscribeToFriendStatus&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; handleStatusChange&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// Cleanup for effect from second render&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        ChatAPI&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unsubscribeFromFriendStatus&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; handleStatusChange&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç‹å›½å°†ä¼šå‡èµ·å¹¶åŒ–ä¸ºç°çƒ¬ï¼Œå¤ªé˜³å°†ä¼šè¤ªå»å®ƒçš„å¤–å±‚æˆä¸ºä¸€é¢—ç™½çŸ®æ˜Ÿï¼Œæœ€åçš„æ–‡æ˜å°†ä¼šç»ˆç»“ã€‚ä½†æ˜¯é™¤äº†&lt;code class=&quot;language-text&quot;&gt;{idï¼š10}&lt;/code&gt;ä¹‹å¤–ï¼Œæ²¡æœ‰ä»»ä½•ä¸œè¥¿å¯ä»¥ä½¿ç¬¬ä¸€ä¸ªæ¸²æŸ“æ•ˆæœçš„æ¸…ç†â€œçœ‹åˆ°â€propsã€‚&lt;/p&gt;
&lt;p&gt;è¿™å°±æ˜¯è®©Reactåœ¨ç»˜åˆ¶åç«‹å³å¤„ç†æ•ˆæœçš„åŸå› â€”â€”é»˜è®¤æƒ…å†µä¸‹è®©ä½ çš„åº”ç”¨ç¨‹åºè¿è¡Œå¾—æ›´å¿«ã€‚å¦‚æœæˆ‘ä»¬çš„ä»£ç éœ€è¦å®ƒä»¬ï¼Œæ—§çš„propsä»ç„¶å­˜åœ¨ã€‚&lt;/p&gt;
&lt;h2 id=&quot;åŒæ­¥ï¼Œè€Œä¸æ˜¯ç”Ÿå‘½å‘¨æœŸ&quot;&gt;&lt;a href=&quot;#%E5%90%8C%E6%AD%A5%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F&quot; aria-label=&quot;åŒæ­¥ï¼Œè€Œä¸æ˜¯ç”Ÿå‘½å‘¨æœŸ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;åŒæ­¥ï¼Œè€Œä¸æ˜¯ç”Ÿå‘½å‘¨æœŸ&lt;/h2&gt;
&lt;p&gt;å…³äºReactï¼Œæˆ‘æœ€å–œæ¬¢çš„ä¸€ç‚¹æ˜¯å®ƒç»Ÿä¸€äº†å¯¹åˆå§‹æ¸²æŸ“ç»“æœå’Œæ›´æ–°çš„æè¿°ã€‚è¿™ä¼šä½¿ä½ çš„ç¨‹åº&lt;a href=&quot;https://overreacted.io/the-bug-o-notation/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;é™ä½ç†µ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾æˆ‘çš„ç»„ä»¶æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Greeting&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; name &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;Greeting&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      Hello, &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¦‚æœæˆ‘æ¸²æŸ“&lt;code class=&quot;language-text&quot;&gt;&amp;lt;Greeting name =&amp;quot;Dan&amp;quot;/&amp;gt;&lt;/code&gt;å¹¶ä¸”åé¢åŠ ä¸Š&lt;code class=&quot;language-text&quot;&gt;&amp;lt;Greeting name =&amp;quot;Yuzhi&amp;quot;/&amp;gt;&lt;/code&gt;ï¼Œæˆ–è€…æˆ‘åªæ¸²æŸ“&lt;code class=&quot;language-text&quot;&gt;&amp;lt;Greeting name =&amp;quot;Yuzhi&amp;quot;/&amp;gt;&lt;/code&gt;ï¼Œéƒ½æ— å…³ç´§è¦ã€‚æœ€åï¼Œæˆ‘ä»¬å°†åœ¨ä¸¤ç§æƒ…å†µä¸‹çœ‹åˆ°â€œHello, Yuzhiâ€ã€‚&lt;/p&gt;
&lt;p&gt;äººä»¬å¸¸è¯´:â€œé‡è¦çš„æ˜¯è¿‡ç¨‹ï¼Œè€Œä¸æ˜¯ç›®çš„åœ°ã€‚â€è€Œå¯¹äºReactï¼Œæƒ…å†µæ­£å¥½ç›¸åã€‚&lt;strong&gt;é‡è¦çš„æ˜¯ç›®çš„åœ°ï¼Œè€Œä¸æ˜¯æ—…ç¨‹ã€‚&lt;/strong&gt; è¿™å°±æ˜¯jQueryä»£ç ä¸­çš„&lt;code class=&quot;language-text&quot;&gt;$.addClass&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;$.removeClass&lt;/code&gt;è°ƒç”¨ä¹‹é—´(æˆ‘ä»¬çš„â€œæ—…ç¨‹â€)çš„åŒºåˆ«ï¼Œå¹¶æŒ‡å®šäº†åœ¨Reactä»£ç ä¸­CSSç±»&lt;em&gt;åº”è¯¥æ˜¯&lt;/em&gt; ä»€ä¹ˆ(æˆ‘ä»¬çš„â€œç›®çš„åœ°â€)ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Reactæ ¹æ®æˆ‘ä»¬å½“å‰çš„propså’ŒçŠ¶æ€åŒæ­¥DOMã€‚&lt;/strong&gt; æ¸²æŸ“æ—¶â€œmountâ€æˆ–â€œupdateâ€ä¹‹é—´æ²¡æœ‰åŒºåˆ«ã€‚&lt;/p&gt;
&lt;p&gt;ä½ åº”è¯¥ä»¥ç±»ä¼¼çš„æ–¹å¼æ€è€ƒæ•ˆæœã€‚&lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt;å…è®¸ä½ æ ¹æ®æˆ‘ä»¬çš„propså’ŒçŠ¶æ€&lt;em&gt;åŒæ­¥&lt;/em&gt;Reactæ ‘ä¹‹å¤–çš„ä¸œè¥¿ã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Greeting&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; name &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Hello, &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;Greeting&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      Hello, &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™ä¸ç†Ÿæ‚‰çš„ &lt;em&gt;mount&lt;/em&gt;/&lt;em&gt;update&lt;/em&gt;/&lt;em&gt;unmount&lt;/em&gt;  å¿ƒç†æ¨¡å‹ç•¥æœ‰ä¸åŒã€‚å°†å…¶å†…åœ¨åŒ–æ˜¯éå¸¸é‡è¦çš„ã€‚&lt;strong&gt;å¦‚æœä½ è¯•å›¾ç¼–å†™ä¸€ä¸ªæ ¹æ®ç»„ä»¶æ˜¯å¦ç¬¬ä¸€æ¬¡æ¸²æŸ“è€Œè¡¨ç°ä¸åŒçš„æ•ˆæœï¼Œé‚£ä¹ˆä½ å°±æ˜¯åœ¨é€†æµè€Œä¸Š!&lt;/strong&gt; å¦‚æœæˆ‘ä»¬çš„ç»“æœå–å†³äºâ€œæ—…ç¨‹â€è€Œä¸æ˜¯â€œç›®çš„åœ°â€ï¼Œæˆ‘ä»¬å°±æ— æ³•åŒæ­¥ã€‚&lt;/p&gt;
&lt;p&gt;æ— è®ºæˆ‘ä»¬æ˜¯ä½¿ç”¨props Aï¼ŒBå’ŒCæ¸²æŸ“ï¼Œè¿˜æ˜¯ä½¿ç”¨Cç«‹å³æ¸²æŸ“ï¼Œéƒ½æ— å…³ç´§è¦ã€‚è™½ç„¶å¯èƒ½ä¼šæœ‰ä¸€äº›æš‚æ—¶çš„å·®å¼‚(ä¾‹å¦‚ï¼Œåœ¨è·å–æ•°æ®æ—¶)ï¼Œä½†æœ€ç»ˆçš„ç»“æœåº”è¯¥æ˜¯ç›¸åŒçš„ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼Œåœ¨æ¯ä¸ªæ¸²æŸ“ä¸Šè¿è¡Œæ‰€æœ‰æ•ˆæœå¯èƒ½å¹¶ä¸æ˜¯å¾ˆé«˜æ•ˆã€‚(åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™ä¼šå¯¼è‡´æ— é™å¾ªç¯ã€‚)&lt;/p&gt;
&lt;p&gt;é‚£æˆ‘ä»¬æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ&lt;/p&gt;
&lt;h2 id=&quot;æ•™reactå»diffä½ çš„effects&quot;&gt;&lt;a href=&quot;#%E6%95%99react%E5%8E%BBdiff%E4%BD%A0%E7%9A%84effects&quot; aria-label=&quot;æ•™reactå»diffä½ çš„effects permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;æ•™Reactå»Diffä½ çš„Effects&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å·²ç»ä»DOMæœ¬èº«å¸å–äº†æ•™è®­ã€‚Reactåªæ›´æ–°DOMä¸­å®é™…å‘ç”Ÿæ›´æ”¹çš„éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯åœ¨æ¯æ¬¡é‡æ–°æ¸²æŸ“æ—¶éƒ½ä¿®æ”¹å®ƒã€‚&lt;/p&gt;
&lt;p&gt;å½“ä½ æ›´æ–°&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;Greeting&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
  Hello, Dan
&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åˆ°&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;Greeting&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
  Hello, Yuzhi
&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Reactçœ‹åˆ°ä¸¤ä¸ªå¯¹è±¡ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; oldProps &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;className&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Greeting&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; children&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Hello, Dan&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; newProps &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;className&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Greeting&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; children&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Hello, Yuzhi&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å®ƒæ£€æŸ¥å®ƒä»¬çš„æ¯ä¸ªpropsï¼Œå¹¶ç¡®å®šå­å…ƒç´ å·²ç»æ›´æ”¹ï¼Œéœ€è¦DOMæ›´æ–°ï¼Œä½†&lt;code class=&quot;language-text&quot;&gt;className&lt;/code&gt;æ²¡æœ‰ã€‚æ‰€ä»¥å®ƒå¯ä»¥è¿™æ ·åš:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;domNode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerText &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Hello, Yuzhi&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// No need to touch domNode.className&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;æˆ‘ä»¬å¯ä»¥ç”¨æ•ˆæœåšè¿™æ ·çš„äº‹å—ï¼Ÿå¦‚æœä¸éœ€è¦åº”ç”¨æ•ˆæœï¼Œæœ€å¥½é¿å…é‡æ–°è¿è¡Œå®ƒä»¬ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œç”±äºçŠ¶æ€æ›´æ”¹ï¼Œæˆ‘ä»¬çš„ç»„ä»¶å¯èƒ½ä¼šé‡æ–°æ¸²æŸ“ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Greeting&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; name &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;counter&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setCounter&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Hello, &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;Greeting&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      Hello, &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* ä½ çš„å…³æ³¨ç‚¹åœ¨è¿™é‡Œ */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* åŸæ–‡æ­¤å¤„æ˜¯count, å®åˆ™ä¸ºcounter */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setCounter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;count &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        Increment
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä½†æ˜¯æˆ‘ä»¬çš„æ•ˆæœä¸ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;counter&lt;/code&gt;çŠ¶æ€ã€‚&lt;strong&gt;æˆ‘ä»¬çš„æ•ˆæœå°†&lt;code class=&quot;language-text&quot;&gt;document.title&lt;/code&gt;ä¸&lt;code class=&quot;language-text&quot;&gt;name&lt;/code&gt; propåŒæ­¥ï¼Œä½†&lt;code class=&quot;language-text&quot;&gt;name&lt;/code&gt; propæ˜¯ç›¸åŒçš„ã€‚&lt;/strong&gt; åœ¨æ¯æ¬¡è®¡æ•°å™¨æ›´æ”¹æ—¶é‡æ–°åˆ†é…&lt;code class=&quot;language-text&quot;&gt;document.title&lt;/code&gt;ä¼¼ä¹å¹¶ä¸ç†æƒ³ã€‚&lt;/p&gt;
&lt;p&gt;å¥½å§ï¼Œé‚£ä¹ˆReactä¼šä¸ä¼šåªæ˜¯â€¦å·®å¼‚æ•ˆæœ(diff effects)?&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;oldEffect&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Hello, Dan&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;newEffect&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Hello, Dan&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// Can React see these functions do the same thing?&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¹¶ä¸æ˜¯çš„ã€‚Reactæ— æ³•åœ¨ä¸è°ƒç”¨è¯¥å‡½æ•°çš„æƒ…å†µä¸‹çŒœæµ‹è¯¥å‡½æ•°çš„åŠŸèƒ½ã€‚(æºä»£ç å®é™…ä¸Šå¹¶ä¸åŒ…å«ç‰¹å®šçš„å€¼ï¼Œå®ƒåªæ˜¯åœ¨&lt;code class=&quot;language-text&quot;&gt;name&lt;/code&gt; propä¸Šç»“æŸã€‚)&lt;/p&gt;
&lt;p&gt;è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¦‚æœä½ æƒ³é¿å…ä¸å¿…è¦åœ°é‡æ–°è¿è¡Œæ•ˆæœï¼Œä½ å¯ä»¥ä¸º&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt;æä¾›ä¸€ä¸ªä¾èµ–æ•°ç»„ï¼ˆä¹Ÿç§°ä¸ºâ€œdepsâ€ï¼‰å‚æ•°ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token function&quot;&gt;seEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Hello, &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Our deps&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;å°±åƒæˆ‘ä»¬å‘Šè¯‰Reactä¸€æ ·ï¼šâ€œå˜¿ï¼Œæˆ‘çŸ¥é“ä½ çœ‹ä¸åˆ°è¿™ä¸ªå‡½æ•°&lt;em&gt;å†…éƒ¨&lt;/em&gt;ï¼Œä½†æˆ‘ä¿è¯å®ƒåªä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;name&lt;/code&gt;è€Œä¸æ˜¯æ¸²æŸ“ä½œç”¨åŸŸä¸­çš„ä»»ä½•å…¶ä»–å†…å®¹ã€‚â€&lt;/strong&gt;  &lt;/p&gt;
&lt;p&gt;å¦‚æœè¿™ä¸ªæ•ˆæœåœ¨å½“å‰å’Œä¸Šæ¬¡ä¹‹é—´çš„æ¯ä¸ªå€¼éƒ½ç›¸åŒï¼Œåˆ™æ— æ³•åŒæ­¥ï¼Œå› æ­¤Reactå¯ä»¥è·³è¿‡æ•ˆæœï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;oldEffect&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Hello, Dan&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; oldDeps &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Dan&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;newEffect&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Hello, Dan&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; newDeps &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Dan&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¦‚æœç”šè‡³ä¾èµ–é¡¹æ•°ç»„ä¸­çš„ä¸€ä¸ªå€¼åœ¨æ¸²æŸ“ä¹‹é—´æ˜¯ä¸åŒçš„ï¼Œæˆ‘ä»¬çŸ¥é“è¿è¡Œæ•ˆæœä¸èƒ½è¢«è·³è¿‡ã€‚åŒæ­¥æ‰€æœ‰çš„ä¸œè¥¿ï¼&lt;/p&gt;
&lt;h2 id=&quot;ä¸è¦å› ä¸ºä¾èµ–è€Œæ’’è°&quot;&gt;&lt;a href=&quot;#%E4%B8%8D%E8%A6%81%E5%9B%A0%E4%B8%BA%E4%BE%9D%E8%B5%96%E8%80%8C%E6%92%92%E8%B0%8E&quot; aria-label=&quot;ä¸è¦å› ä¸ºä¾èµ–è€Œæ’’è° permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ä¸è¦å› ä¸ºä¾èµ–è€Œæ’’è°&lt;/h2&gt;
&lt;p&gt;åœ¨ä¾èµ–å…³ç³»ä¸Šæ’’è°ä¼šå¸¦æ¥ä¸å¥½çš„åæœã€‚ä»ç›´è§‰ä¸Šçœ‹, è¿™æ˜¯æœ‰é“ç†çš„, ä½†æˆ‘çœ‹åˆ°å‡ ä¹æ¯ä¸ªäººéƒ½å°è¯•ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt;ä¸ç±»ä¸­çš„å¿ƒç†æ¨¡å‹è¯•å›¾æ¬ºéª—è§„åˆ™ã€‚(ä¸€å¼€å§‹æˆ‘ä¹Ÿè¿™ä¹ˆåšäº†!)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SearchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Is this okay? Not always -- and there&apos;s a better way to write it.&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(&lt;a href=&quot;https://reactjs.org/docs/hooks-faq.html#is-it-safe-to-omit-functions-from-the-list-of-dependencies&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Hook FAQ&lt;/a&gt;è§£é‡Šäº†åº”è¯¥æ€ä¹ˆåšã€‚æˆ‘ä»¬å°†åœ¨&lt;a href=&quot;https://overreacted.io/a-complete-guide-to-useeffect/#moving-functions-inside-effects&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ä¸‹é¢&lt;/a&gt;å›åˆ°è¿™ä¸ªä¾‹å­ã€‚)&lt;/p&gt;
&lt;p&gt;â€œä½†æˆ‘åªæƒ³åœ¨mountæ—¶è¿è¡Œå®ƒï¼â€ï¼Œä½ ä¼šè¿™ä¹ˆè¯´ã€‚ç°åœ¨ï¼Œè¯·è®°ä½ï¼šå¦‚æœä½ æŒ‡å®šdepsï¼Œ&lt;strong&gt;ç»„ä»¶å†…éƒ¨çš„æ•ˆæœæ‰€ä½¿ç”¨çš„&lt;em&gt;æ‰€æœ‰&lt;/em&gt; å€¼éƒ½ &lt;em&gt;å¿…é¡»&lt;/em&gt; åœ¨é‚£é‡Œã€‚&lt;/strong&gt; åŒ…æ‹¬propsï¼ŒçŠ¶æ€ï¼Œå‡½æ•° - ç»„ä»¶ä¸­çš„ä»»ä½•å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰æ—¶ï¼Œå½“ä½ è¿™æ ·åšæ—¶ï¼Œå®ƒä¼šå¯¼è‡´é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°ä¸€ä¸ªæ— é™é‡å–å¾ªç¯ï¼Œæˆ–è€…ä¸€ä¸ªsocketè¢«é‡æ–°åˆ›å»ºå¾—å¤ªé¢‘ç¹ã€‚ &lt;strong&gt;è¯¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆä¸æ˜¯åˆ é™¤ä¾èµ–é¡¹ã€‚&lt;/strong&gt; æˆ‘ä»¬å¾ˆå¿«å°±ä¼šçœ‹åˆ°è¿™äº›è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;ä½†åœ¨æˆ‘ä»¬è·³åˆ°è§£å†³æ–¹æ¡ˆä¹‹å‰ï¼Œè®©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å½“ä¾èµ–å…³ç³»æ¬ºéª—æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ&quot;&gt;&lt;a href=&quot;#%E5%BD%93%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB%E6%AC%BA%E9%AA%97%E6%97%B6%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88&quot; aria-label=&quot;å½“ä¾èµ–å…³ç³»æ¬ºéª—æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;å½“ä¾èµ–å…³ç³»æ¬ºéª—æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ&lt;/h2&gt;
&lt;p&gt;å¦‚æœdeps(ä¾èµ–é¡¹)åŒ…å«äº†æ•ˆæœä½¿ç”¨çš„æ‰€æœ‰å€¼ï¼ŒReactçŸ¥é“ä»€ä¹ˆæ—¶å€™é‡æ–°è¿è¡Œå®ƒ:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Hello, &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// å…³æ³¨è¿™ä¸ªä¾èµ–é¡¹&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://overreacted.io/deps-compare-correct-fae247cd068eedbd4b62ba50592d2b3d.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;(&lt;em&gt;ä¾èµ–å…³ç³»æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡æ–°è¿è¡Œæ•ˆæœã€‚&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ä¸ºæ­¤æ•ˆæœæŒ‡å®šäº†&lt;code class=&quot;language-text&quot;&gt;[]&lt;/code&gt;ï¼Œåˆ™æ–°æ•ˆæœå‡½æ•°å°†ä¸ä¼šè¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Hello, &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Wrong: name is missing in deps&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://overreacted.io/deps-compare-wrong-25f75db3f9f57ffe1426912093577445.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;(&lt;em&gt;ä¾èµ–é¡¹æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è·³è¿‡è¿™ä¸ªæ•ˆæœã€‚&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé—®é¢˜å¯èƒ½æ˜¾è€Œæ˜“è§ã€‚ä½†æ˜¯ï¼Œåœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œå½“ç±»è§£å†³æ–¹æ¡ˆä»ä½ çš„è®°å¿†ä¸­â€œè·³å‡ºâ€æ—¶ï¼Œè¿™ç§ç›´è§‰å¯èƒ½ä¼šæ¬ºéª—ä½ ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æ­£åœ¨ç¼–å†™ä¸€ä¸ªæ¯ç§’é€’å¢ä¸€æ¬¡çš„è®¡æ•°å™¨ã€‚å¯¹äºç±»ï¼Œæˆ‘ä»¬çš„ç›´è§‰æ˜¯ï¼šâ€œè®¾ç½®é—´éš”(interval)ä¸€æ¬¡ï¼Œé”€æ¯é—´éš”ä¸€æ¬¡â€ã€‚è¿™æ˜¯ä¸€ä¸ªæˆ‘ä»¬å¦‚ä½•åšçš„&lt;a href=&quot;https://codesandbox.io/s/n5mjzjy9kl&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ä¾‹å­&lt;/a&gt;ã€‚å½“æˆ‘ä»¬åœ¨å¿ƒç†ä¸Šå°†æ­¤ä»£ç ç¿»è¯‘ä¸º&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt;æ—¶ï¼Œæˆ‘ä»¬æœ¬èƒ½åœ°å°†&lt;code class=&quot;language-text&quot;&gt;[]&lt;/code&gt;æ·»åŠ åˆ°depsä¸­ã€‚â€œæˆ‘æƒ³è®©å®ƒè·‘ä¸€æ¬¡â€ï¼Œå¯¹å—ï¼Ÿ&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setCount&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;setCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;count &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;clearInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;//ä½ çš„å…³æ³¨ç‚¹åœ¨è¿™é‡Œ&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œæ­¤ç¤ºä¾‹&lt;a href=&quot;https://codesandbox.io/s/91n5z8jo7r&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ä»…é€’å¢ä¸€æ¬¡&lt;/a&gt;ã€‚å“å‘€ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ çš„å¿ƒç†æ¨¡å‹æ˜¯â€œä¾èµ–å…³ç³»è®©æˆ‘æŒ‡å®šä½•æ—¶æˆ‘æƒ³é‡æ–°è§¦å‘æ•ˆæœâ€ï¼Œè¿™ä¸ªä¾‹å­å¯èƒ½ä¼šç»™ä½ ä¸€ä¸ªå­˜åœ¨çš„å±æœºã€‚ä½ æƒ³è¦è§¦å‘å®ƒä¸€æ¬¡ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªé—´éš” - æ‰€ä»¥å®ƒä¸ºä»€ä¹ˆä¼šå¼•èµ·é—®é¢˜ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œå¦‚æœä½ çŸ¥é“ä¾èµ–é¡¹æ˜¯æˆ‘ä»¬çš„æç¤ºï¼Œç”¨äºå¯¹æ•ˆæœåœ¨æ¸²æŸ“èŒƒå›´ä¸­ä½¿ç”¨çš„æ‰€æœ‰å†…å®¹ä½œå‡ºååº”ï¼Œé‚£ä¹ˆè¿™æ ·åšæ˜¯æœ‰æ„ä¹‰çš„ã€‚å®ƒä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;ï¼Œä½†æˆ‘ä»¬ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;[]&lt;/code&gt;æ’’è°è¯´å®ƒæ²¡æœ‰ä¾èµ–ã€‚å®ƒä¼šå‘é“æˆ‘ä»¬ï¼Œè¿™åªæ˜¯æ—¶é—´é—®é¢˜!&lt;/p&gt;
&lt;p&gt;åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¸­ï¼Œ&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;ä¸º&lt;code class=&quot;language-text&quot;&gt;0&lt;/code&gt;ã€‚å› æ­¤ï¼Œç¬¬ä¸€ä¸ªæ¸²æŸ“æ•ˆæœä¸­çš„&lt;code class=&quot;language-text&quot;&gt;setCount(count + 1)&lt;/code&gt;è¡¨ç¤º&lt;code class=&quot;language-text&quot;&gt;setCount(0 + 1)&lt;/code&gt;ã€‚å› ä¸º&lt;code class=&quot;language-text&quot;&gt;[]&lt;/code&gt; depsæˆ‘ä»¬æ°¸è¿œä¸ä¼šé‡æ–°è¿è¡Œæ•ˆæœï¼Œæ‰€ä»¥å®ƒä¼šæ¯ç§’è°ƒç”¨&lt;code class=&quot;language-text&quot;&gt;setCount(0 + 1)&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// First render, state is 0&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Effect from first render&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;        &lt;span class=&quot;token function&quot;&gt;setCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Always setCount(1)&lt;/span&gt;&lt;/span&gt;      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;clearInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Never re-runs&lt;/span&gt;&lt;/span&gt;  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Every next render, state is 1&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token comment&quot;&gt;// This effect is always ignored because&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token comment&quot;&gt;// we lied to React about empty deps.&lt;/span&gt;&lt;/span&gt;    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;setCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;clearInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬æ’’è°è¯´æˆ‘ä»¬çš„æ•ˆæœä¸ä¾èµ–äºç»„ä»¶å†…éƒ¨çš„å€¼ï¼Œè€Œå®é™…ä¸Šå®ƒä¾èµ–äºç»„ä»¶å†…éƒ¨çš„å€¼!&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çš„æ•ˆæœä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt; - ç»„ä»¶å†…éƒ¨çš„å€¼ï¼ˆä½†åœ¨æ•ˆæœä¹‹å¤–ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token function&quot;&gt;setCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;count &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;clearInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å› æ­¤ï¼Œå°†&lt;code class=&quot;language-text&quot;&gt;[]&lt;/code&gt;æŒ‡å®šä¸ºä¾èµ–é¡¹å°†äº§ç”Ÿä¸€ä¸ªé”™è¯¯ã€‚Reactå°†æ¯”è¾ƒä¾èµ–é¡¹ï¼Œå¹¶è·³è¿‡æ›´æ–°æ­¤æ•ˆæœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://overreacted.io/interval-wrong-29e53bd0c9b7d2ac70d3cd924886b030.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;(&lt;em&gt;ä¾èµ–æ€§æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è·³è¿‡è¿™ä¸ªæ•ˆæœã€‚&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;åƒè¿™æ ·çš„é—®é¢˜å¾ˆéš¾æƒ³åˆ°ã€‚å› æ­¤ï¼Œæˆ‘é¼“åŠ±ä½ å°†å…¶ä½œä¸ºä¸€é¡¹ç¡¬æ€§è§„åˆ™ï¼Œå§‹ç»ˆè¯šå®åœ°éµå¾ªæ•ˆæœä¾èµ–å…³ç³»ï¼Œå¹¶å°†å…¶å…¨éƒ¨(æ•ˆæœæ‰€ç”¨åˆ°çš„)æŒ‡å®šã€‚(å¦‚æœä½ æƒ³åœ¨å›¢é˜Ÿä¸­å¼ºåˆ¶æ‰§è¡Œæ­¤æ“ä½œï¼Œæˆ‘ä»¬ä¼šæä¾›ä¸€ä¸ª&lt;a href=&quot;%5Blint%20rule%5D(https://github.com/facebook/react/issues/14920)&quot;&gt;lintè§„åˆ™&lt;/a&gt;ã€‚)&lt;/p&gt;
&lt;h2 id=&quot;è¯šå®å¯¹å¾…ä¾èµ–å…³ç³»çš„ä¸¤ç§æ–¹æ³•&quot;&gt;&lt;a href=&quot;#%E8%AF%9A%E5%AE%9E%E5%AF%B9%E5%BE%85%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%B3%95&quot; aria-label=&quot;è¯šå®å¯¹å¾…ä¾èµ–å…³ç³»çš„ä¸¤ç§æ–¹æ³• permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;è¯šå®å¯¹å¾…ä¾èµ–å…³ç³»çš„ä¸¤ç§æ–¹æ³•&lt;/h2&gt;
&lt;p&gt;æœ‰ä¸¤ç§ç­–ç•¥å¯ä»¥è¯šå®åœ°å¯¹å¾…ä¾èµ–å…³ç³»ã€‚é€šå¸¸åº”è¯¥ä»ç¬¬ä¸€ä¸ªå¼€å§‹ï¼Œç„¶åæ ¹æ®éœ€è¦åº”ç”¨ç¬¬äºŒä¸ªã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¬¬ä¸€ç§ç­–ç•¥æ˜¯ä¿®å¤ä¾èµ–å…³ç³»æ•°ç»„ï¼Œä»¥åŒ…å«åœ¨æ•ˆæœä¸­ä½¿ç”¨çš„ç»„ä»¶å†…çš„&lt;em&gt;æ‰€æœ‰&lt;/em&gt; å€¼ã€‚&lt;/strong&gt; æˆ‘ä»¬å°†&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;ä½œä¸ºdep(ä¾èµ–)åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;count &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;clearInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™ä½¿ä¾èµ–é¡¹æ•°ç»„æ­£ç¡®ã€‚å®ƒå¯èƒ½ä¸å¤ª&lt;em&gt;ç†æƒ³&lt;/em&gt;ï¼Œä½†è¿™æ˜¯æˆ‘ä»¬éœ€è¦è§£å†³çš„ç¬¬ä¸€ä¸ªé—®é¢˜ã€‚ç°åœ¨æ”¹å˜&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;å°†é‡æ–°è¿è¡Œæ•ˆæœï¼Œæ¯ä¸€ä¸ªä¸‹ä¸€ä¸ªé—´éš”å¼•ç”¨&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;ä»å…¶æ¸²æŸ“åœ¨&lt;code class=&quot;language-text&quot;&gt;setCount(count + 1)&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// First render, state is 0&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Effect from first render&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;        &lt;span class=&quot;token function&quot;&gt;setCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// setCount(count + 1)&lt;/span&gt;&lt;/span&gt;      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;clearInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [count]&lt;/span&gt;&lt;/span&gt;  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Second render, state is 1&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Effect from second render&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;        &lt;span class=&quot;token function&quot;&gt;setCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// setCount(count + 1)&lt;/span&gt;&lt;/span&gt;      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;clearInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [count]&lt;/span&gt;&lt;/span&gt;  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™æ ·å¯ä»¥&lt;a href=&quot;https://codesandbox.io/s/0x0mnlyq8l&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;è§£å†³é—®é¢˜&lt;/a&gt;ï¼Œä½†åªè¦&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;å‘ç”Ÿå˜åŒ–ï¼Œæˆ‘ä»¬çš„é—´éš”å°±ä¼šè¢«æ¸…é™¤å¹¶å†æ¬¡è®¾ç½®ã€‚è¿™å¯èƒ½æ˜¯ä¸å—æ¬¢è¿çš„ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://overreacted.io/interval-rightish-5734271ddfa94d2d65ac6160515e0069.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;(&lt;em&gt;ä¾èµ–å…³ç³»æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡æ–°è¿è¡Œæ•ˆæœã€‚&lt;/em&gt;)&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;ç¬¬äºŒç§ç­–ç•¥æ˜¯æ›´æ”¹æˆ‘ä»¬çš„effectä»£ç ï¼Œè¿™æ ·å®ƒå°±ä¸éœ€è¦æ¯”æˆ‘ä»¬æƒ³è¦çš„å€¼é¢‘ç¹çš„æ›´æ”¹ã€‚&lt;/strong&gt; æˆ‘ä»¬ä¸æƒ³åœ¨ä¾èµ–å…³ç³»ä¸Šæ’’è°â€”â€”æˆ‘ä»¬åªæ˜¯æƒ³æ”¹å˜æˆ‘ä»¬çš„æ•ˆæœï¼Œä½¿ä¾èµ–å…³ç³»&lt;em&gt;æ›´å°‘&lt;/em&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬çœ‹ä¸€äº›åˆ é™¤ä¾èµ–é¡¹çš„å¸¸ç”¨æŠ€å·§ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä½¿æ•ˆæœè‡ªç»™è‡ªè¶³&quot;&gt;&lt;a href=&quot;#%E4%BD%BF%E6%95%88%E6%9E%9C%E8%87%AA%E7%BB%99%E8%87%AA%E8%B6%B3&quot; aria-label=&quot;ä½¿æ•ˆæœè‡ªç»™è‡ªè¶³ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ä½¿æ•ˆæœè‡ªç»™è‡ªè¶³&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å¸Œæœ›æ‘†è„±æ•ˆæœä¸­çš„&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;ä¾èµ–æ€§ã€‚&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;count &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;clearInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦é—®è‡ªå·±ï¼š&lt;strong&gt;æˆ‘ä»¬ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;ç”¨æ¥åšä»€ä¹ˆï¼Ÿ&lt;/strong&gt; å¥½åƒæˆ‘ä»¬åªå°†å®ƒç”¨äº&lt;code class=&quot;language-text&quot;&gt;setCount&lt;/code&gt;è°ƒç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å®é™…ä¸Šåœ¨ä½œç”¨åŸŸé‡Œæ ¹æœ¬ä¸éœ€è¦&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;ã€‚å½“æˆ‘ä»¬æƒ³è¦æ ¹æ®ä»¥å‰çš„çŠ¶æ€æ›´æ–°çŠ¶æ€æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;setState&lt;/code&gt;çš„&lt;a href=&quot;https://github.com/xiaohesong/TIL/blob/master/front-end/react/hooks/hooks-api.md#%E4%BD%9C%E4%B8%BA%E5%8A%9F%E8%83%BD%E6%9B%B4%E6%96%B0&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;å‡½æ•°æ›´æ–°å½¢å¼&lt;/a&gt;ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ä½ çš„å…³æ³¨ç‚¹åœ¨è¿™é‡Œ&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;c &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; c &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;clearInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æˆ‘å–œæ¬¢å°†è¿™äº›æƒ…å†µè§†ä¸ºâ€œé”™è¯¯(å‡çš„)ä¾èµ–â€ã€‚æ˜¯çš„ï¼Œ&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;æ˜¯ä¸€ä¸ªå¿…è¦çš„ä¾èµ–é¡¹ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨æ•ˆæœä¸­ç¼–å†™äº†&lt;code class=&quot;language-text&quot;&gt;setCount(count + 1)&lt;/code&gt;ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬çœŸæ­£çš„éœ€è¦&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;åªæ˜¯å»å°†å…¶è½¬æ¢ä¸º&lt;code class=&quot;language-text&quot;&gt;count + 1&lt;/code&gt;å¹¶å°†å…¶â€œå‘å›â€ç»™Reactã€‚ä½†æ˜¯React&lt;em&gt;å·²ç»çŸ¥é“äº†&lt;/em&gt; å½“å‰çš„&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;ã€‚&lt;strong&gt;æˆ‘ä»¬éœ€è¦å‘Šè¯‰Reactçš„æ˜¯å¢åŠ è¿™ä¸ªçŠ¶æ€â€”â€”ä¸ç®¡å®ƒç°åœ¨æ˜¯ä»€ä¹ˆçŠ¶æ€ã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;è¿™æ­£æ˜¯&lt;code class=&quot;language-text&quot;&gt;setCount(c =&amp;gt; c + 1)&lt;/code&gt;çš„ä½œç”¨ã€‚ä½ å¯ä»¥å°†å…¶çœ‹ä½œæ˜¯å‘Reactâ€œå‘é€ä¸€æ¡æŒ‡ä»¤â€æ¥å¯¹çŠ¶æ€åº”è¯¥å¦‚ä½•å˜åŒ–åšå‡ºååº”ã€‚è¿™ç§â€œæ›´æ–°å½¢å¼â€åœ¨å…¶ä»–æƒ…å†µä¸‹ä¹Ÿæœ‰å¸®åŠ©ï¼Œä¾‹å¦‚&lt;a href=&quot;https://github.com/xiaohesong/TIL/blob/master/front-end/react/overreact/react%E4%BD%9C%E4%B8%BAui%E8%BF%90%E8%A1%8C.md#batching&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;æ‰¹é‡å¤šæ¬¡æ›´æ–°&lt;/a&gt;æ—¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¯·æ³¨æ„ï¼Œæˆ‘ä»¬å®é™…ä¸Šå·²ç»&lt;em&gt;å®Œæˆ&lt;/em&gt;äº†åˆ é™¤ä¾èµ–é¡¹çš„å·¥ä½œã€‚æˆ‘ä»¬æ²¡æœ‰æ¬ºéª—ä»–ã€‚æˆ‘ä»¬çš„æ•ˆæœä¸å†ä»æ¸²æŸ“ä½œç”¨åŸŸè¯»å–&lt;code class=&quot;language-text&quot;&gt;counter&lt;/code&gt;å€¼ï¼š&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://overreacted.io/interval-right-f128ad20c28317ed27a3cb68197fc906.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;(&lt;em&gt;ä¾èµ–é¡¹æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è·³è¿‡è¿™ä¸ªæ•ˆæœã€‚&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥åœ¨&lt;a href=&quot;https://codesandbox.io/s/q3181xz1pj&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;è¿™é‡Œ&lt;/a&gt;è¯•è¯•ã€‚&lt;/p&gt;
&lt;p&gt;å³ä½¿æ­¤æ•ˆæœä»…è¿è¡Œä¸€æ¬¡ï¼Œå±äºç¬¬ä¸€ä¸ªæ¸²æŸ“çš„é—´éš”å›è°ƒå®Œå…¨èƒ½å¤Ÿåœ¨æ¯æ¬¡é—´éš”è§¦å‘æ—¶å‘é€&lt;code class=&quot;language-text&quot;&gt;c =&amp;gt; c + 1&lt;/code&gt;æ›´æ–°æŒ‡ä»¤ã€‚å®ƒä¸å†éœ€è¦çŸ¥é“å½“å‰çš„è®¡æ•°å™¨çŠ¶æ€ã€‚ Reactå·²ç»çŸ¥é“äº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;åŠŸèƒ½æ›´æ–°å’Œgoogleæ–‡æ¡£&quot;&gt;&lt;a href=&quot;#%E5%8A%9F%E8%83%BD%E6%9B%B4%E6%96%B0%E5%92%8Cgoogle%E6%96%87%E6%A1%A3&quot; aria-label=&quot;åŠŸèƒ½æ›´æ–°å’Œgoogleæ–‡æ¡£ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;åŠŸèƒ½æ›´æ–°å’ŒGoogleæ–‡æ¡£&lt;/h2&gt;
&lt;p&gt;è¿˜è®°å¾—æˆ‘ä»¬å¦‚ä½•è°ˆè®ºåŒæ­¥æ˜¯æ•ˆæœçš„å¿ƒç†æ¨¡å‹å—ï¼ŸåŒæ­¥çš„ä¸€ä¸ªæœ‰è¶£æ–¹é¢æ˜¯ï¼Œä½ ç»å¸¸å¸Œæœ›ä¿æŒç³»ç»Ÿä¹‹é—´çš„â€œæ¶ˆæ¯â€ä¸å…¶çŠ¶æ€æ— å…³ã€‚ä¾‹å¦‚ï¼Œåœ¨Google Docsä¸­ç¼–è¾‘æ–‡æ¡£å®é™…ä¸Šå¹¶ä¸ä¼šå°†&lt;em&gt;æ•´ä¸ª&lt;/em&gt;é¡µé¢å‘é€åˆ°æœåŠ¡å™¨ã€‚é‚£å°†æ˜¯éå¸¸ä½æ•ˆçš„ã€‚ç›¸åï¼Œå®ƒä¼šå‘é€ç”¨æˆ·å°è¯•æ‰§è¡Œæ“ä½œçš„è¡¨ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶æˆ‘ä»¬çš„ç”¨ä¾‹æ˜¯ä¸åŒçš„ï¼Œä½†æ˜¯ç±»ä¼¼çš„å“²å­¦é€‚ç”¨äºæ•ˆæœã€‚&lt;strong&gt;å®ƒåªæœ‰åŠ©äºå°†æœ€å°‘çš„å¿…è¦ä¿¡æ¯ä»æ•ˆæœå†…éƒ¨å‘é€åˆ°ç»„ä»¶ã€‚&lt;/strong&gt; åƒ&lt;code class=&quot;language-text&quot;&gt;setCount(c =&amp;gt; c + 1)&lt;/code&gt;è¿™æ ·çš„æ›´æ–°å½¢å¼ä¼ é€’çš„ä¿¡æ¯ä¸¥æ ¼å°‘äº&lt;code class=&quot;language-text&quot;&gt;setCount(count + 1)&lt;/code&gt;ï¼Œå› ä¸ºå®ƒæ²¡æœ‰è¢«å½“å‰è®¡æ•°(count)â€œæ±¡æŸ“â€ã€‚å®ƒåªè¡¨ç¤ºåŠ¨ä½œ(â€œé€’å¢â€)ã€‚åœ¨Reactä¸­æ€è€ƒæ¶‰åŠåˆ°&lt;a href=&quot;https://reactjs.org/docs/thinking-in-react.html#step-3-identify-the-minimal-but-complete-representation-of-ui-state&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;æ‰¾åˆ°æœ€å°çš„çŠ¶æ€&lt;/a&gt;ã€‚è¿™æ˜¯ç›¸åŒçš„åŸåˆ™ï¼Œä½†å¯¹äºæ›´æ–°ã€‚&lt;/p&gt;
&lt;p&gt;ç¼–ç æ„å›¾(è€Œä¸æ˜¯ç»“æœ)ç±»ä¼¼äºè°·æ­Œæ–‡æ¡£&lt;a href=&quot;https://medium.com/@srijancse/how-real-time-collaborative-editing-work-operational-transformation-ac4902d75682&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;è§£å†³&lt;/a&gt;åä½œç¼–è¾‘çš„æ–¹å¼ã€‚è™½ç„¶è¿™æ˜¯å»¶ä¼¸çš„ç±»æ¯”ï¼Œä½†åŠŸèƒ½æ›´æ–°åœ¨Reactä¸­ä¹Ÿæ‰®æ¼”ç€ç±»ä¼¼çš„è§’è‰²ã€‚å®ƒä»¬ç¡®ä¿æ¥è‡ªå¤šä¸ªæºçš„æ›´æ–°(äº‹ä»¶å¤„ç†ç¨‹åºã€æ•ˆæœè®¢é˜…ç­‰)èƒ½å¤Ÿä»¥å¯é¢„æµ‹çš„æ–¹å¼æ­£ç¡®åœ°åº”ç”¨äºæ‰¹å¤„ç†ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä½†æ˜¯ï¼Œå³ä½¿æ˜¯&lt;code class=&quot;language-text&quot;&gt;setCount(c =&amp;gt; c + 1)&lt;/code&gt;ä¹Ÿä¸æ˜¯é‚£ä¹ˆå¥½ã€‚&lt;/strong&gt; å®ƒçœ‹èµ·æ¥æœ‰ç‚¹å¥‡æ€ªï¼Œå®ƒèƒ½åšçš„éå¸¸æœ‰é™ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸¤ä¸ªçŠ¶æ€å˜é‡ï¼Œå®ƒä»¬çš„å€¼ç›¸äº’ä¾èµ–ï¼Œæˆ–è€…å¦‚æœæˆ‘ä»¬éœ€è¦æ ¹æ®propæ¥è®¡ç®—ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼Œè¿™å¯¹æˆ‘ä»¬æ²¡æœ‰å¸®åŠ©ã€‚å¹¸è¿çš„æ˜¯ï¼Œ&lt;code class=&quot;language-text&quot;&gt;setCount(c =&amp;gt; c + 1)&lt;/code&gt;æœ‰ä¸€ä¸ªæ›´å¼ºå¤§çš„å§å¦¹æ¨¡å¼ã€‚å®ƒçš„åç§°æ˜¯&lt;code class=&quot;language-text&quot;&gt;useReducer&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å°†æ›´æ–°ä¸æ“ä½œè§£è€¦&quot;&gt;&lt;a href=&quot;#%E5%B0%86%E6%9B%B4%E6%96%B0%E4%B8%8E%E6%93%8D%E4%BD%9C%E8%A7%A3%E8%80%A6&quot; aria-label=&quot;å°†æ›´æ–°ä¸æ“ä½œè§£è€¦ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;å°†æ›´æ–°ä¸æ“ä½œè§£è€¦&lt;/h2&gt;
&lt;p&gt;è®©æˆ‘ä»¬ä¿®æ”¹å‰é¢çš„ä¾‹å­ï¼Œè®©å®ƒæœ‰ä¸¤ä¸ªçŠ¶æ€å˜é‡ï¼š&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;step&lt;/code&gt;ã€‚æˆ‘ä»¬çš„é—´éš”å°†ä½¿&lt;code class=&quot;language-text&quot;&gt;count&lt;/code&gt;å¢åŠ &lt;code class=&quot;language-text&quot;&gt;step&lt;/code&gt;è¾“å…¥çš„å€¼ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setCount&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;step&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setStep&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;setCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;c &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; c &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; step&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;clearInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;step&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;step&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;onChange&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;e &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setStep&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(è¿™é‡Œæ˜¯ä¸€ä¸ª&lt;a href=&quot;https://codesandbox.io/s/zxn70rnkx&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ä¾‹å­&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼Œ&lt;strong&gt;æˆ‘ä»¬æ²¡æœ‰æ¬ºéª—ã€‚&lt;/strong&gt; ç”±äºæˆ‘å¼€å§‹åœ¨æ•ˆæœä¸­ä½¿ç”¨stepï¼Œæˆ‘å°†å®ƒæ·»åŠ åˆ°ä¾èµ–é¡¹ä¸­ã€‚è¿™å°±æ˜¯ä»£ç æ­£ç¡®è¿è¡Œçš„åŸå› ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤ç¤ºä¾‹ä¸­çš„å½“å‰è¡Œä¸ºæ˜¯æ›´æ”¹&lt;code class=&quot;language-text&quot;&gt;step&lt;/code&gt;é‡æ–°å¯åŠ¨é—´éš” - å› ä¸ºå®ƒæ˜¯å…¶ä¸­ä¸€ä¸ªä¾èµ–é¡¹ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè¿™æ­£æ˜¯ä½ æƒ³è¦çš„ï¼æ‹†é™¤ä¸€ä¸ªæ•ˆæœå¹¶é‡æ–°è®¾ç½®å®ƒæ²¡æœ‰é”™ï¼Œé™¤éæˆ‘ä»¬æœ‰å¾ˆå¥½çš„ç†ç”±ï¼Œå¦åˆ™æˆ‘ä»¬ä¸åº”è¯¥é¿å…è¿™æ ·åšã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œå‡è®¾æˆ‘ä»¬å¸Œæœ›é—´éš”æ—¶é’Ÿä¸ä¼šåœ¨&lt;code class=&quot;language-text&quot;&gt;step&lt;/code&gt;æ›´æ”¹æ—¶é‡ç½®ã€‚æˆ‘ä»¬å¦‚ä½•ä»æ•ˆæœä¸­åˆ é™¤&lt;code class=&quot;language-text&quot;&gt;step&lt;/code&gt;ä¾èµ–ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è®¾ç½®çŠ¶æ€å˜é‡æ—¶ï¼Œå–å†³äºå¦ä¸€ä¸ªçŠ¶æ€å˜é‡çš„å½“å‰å€¼ï¼Œä½ å¯èƒ½å¸Œæœ›å°è¯•ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;useReducer&lt;/code&gt;æ›¿æ¢å®ƒä»¬ã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;å½“ä½ å‘ç°è‡ªå·±æ­£åœ¨ç¼–å†™&lt;code class=&quot;language-text&quot;&gt;setSomething(something =&amp;gt;â€¦)&lt;/code&gt;æ—¶ï¼Œæ˜¯æ—¶å€™è€ƒè™‘ä½¿ç”¨reduceräº†ã€‚reducerå…è®¸ä½  &lt;strong&gt;å°†è¡¨ç¤ºç»„ä»¶ä¸­å‘ç”Ÿçš„â€œæ“ä½œâ€ä¸çŠ¶æ€æ›´æ–°çš„å“åº”æ–¹å¼è§£è€¦ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬çš„æ•ˆæœä¸­ï¼Œè®©æˆ‘ä»¬å°†&lt;code class=&quot;language-text&quot;&gt;step&lt;/code&gt;ä¾èµ–å…³ç³»æ›¿æ¢ä¸º&lt;code class=&quot;language-text&quot;&gt;dispatch&lt;/code&gt;ä¾èµ–å…³ç³»:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dispatch&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useReducer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;reducer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; initialState&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; count&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; step &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; type&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;tick&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Instead of setCount(c =&gt; c + step);&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;clearInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;dispatch&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(æŸ¥çœ‹è¿™é‡Œ&lt;a href=&quot;https://codesandbox.io/s/xzr480k0np&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ä¾‹å­&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;ä½ å¯èƒ½ä¼šé—®æˆ‘ï¼šâ€œè¿™æ€ä¹ˆä¼šæ›´å¥½ï¼Ÿâ€ç­”æ¡ˆæ˜¯ &lt;strong&gt;Reactä¿è¯&lt;code class=&quot;language-text&quot;&gt;dispatch&lt;/code&gt;å‡½æ•°åœ¨æ•´ä¸ªç»„ä»¶ç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜ã€‚æ‰€ä»¥ä¸Šé¢çš„ä¾‹å­ä¸éœ€è¦é‡æ–°è®¢é˜…é—´éš”ã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬è§£å†³äº†é—®é¢˜ï¼&lt;/p&gt;
&lt;p&gt;(&lt;em&gt;ä½ å¯ä»¥çœç•¥depsä¸­çš„&lt;code class=&quot;language-text&quot;&gt;dispatch&lt;/code&gt;ï¼Œ&lt;code class=&quot;language-text&quot;&gt;setState&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;useRef&lt;/code&gt;å®¹å™¨å€¼ï¼Œå› ä¸ºReactä¿è¯å®ƒä»¬æ˜¯é™æ€çš„ã€‚ä½†æŒ‡å®šå®ƒä»¬ä¹Ÿæ²¡æœ‰åå¤„ã€‚&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;å®ƒä¸æ˜¯åœ¨æ•ˆæœä¸­è¯»å–çŠ¶æ€ï¼Œè€Œæ˜¯å‘é€ä¸€ä¸ªåŠ¨ä½œæ¥ç¼–ç  &lt;em&gt;å‘ç”Ÿäº†ä»€ä¹ˆ&lt;/em&gt; çš„ä¿¡æ¯ã€‚è¿™å…è®¸æˆ‘ä»¬çš„æ•ˆæœä¿æŒä¸&lt;code class=&quot;language-text&quot;&gt;step&lt;/code&gt;çŠ¶æ€è§£è€¦ã€‚æˆ‘ä»¬çš„æ•ˆæœå¹¶ä¸å…³å¿ƒæˆ‘ä»¬å¦‚ä½•æ›´æ–°çŠ¶æ€ï¼Œå®ƒåªæ˜¯å‘Šè¯‰æˆ‘ä»¬&lt;em&gt;å‘ç”Ÿäº†ä»€ä¹ˆ&lt;/em&gt;ã€‚reduceré›†ä¸­äº†æ›´æ–°é€»è¾‘ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; initialState &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  count&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  step&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;reducer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; action&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; count&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; step &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;tick&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; count&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; count &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; step&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; step &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;step&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; count&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; step&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; action&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;step &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(å¦‚æœä½ ä¹‹å‰é”™è¿‡äº†ï¼Œé‚£ä¹ˆè¿™æ˜¯ä¸€ä¸ª&lt;a href=&quot;https://codesandbox.io/s/xzr480k0np&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;æ¼”ç¤º&lt;/a&gt;)&lt;/p&gt;
&lt;h2 id=&quot;ä¸ºä»€ä¹ˆusereduceræ˜¯hooksçš„æ¬ºéª—æ¨¡å¼&quot;&gt;&lt;a href=&quot;#%E4%B8%BA%E4%BB%80%E4%B9%88usereducer%E6%98%AFhooks%E7%9A%84%E6%AC%BA%E9%AA%97%E6%A8%A1%E5%BC%8F&quot; aria-label=&quot;ä¸ºä»€ä¹ˆusereduceræ˜¯hooksçš„æ¬ºéª—æ¨¡å¼ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ä¸ºä»€ä¹ˆuseReduceræ˜¯Hooksçš„æ¬ºéª—æ¨¡å¼&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å·²ç»çœ‹åˆ°å½“æ•ˆæœéœ€è¦æ ¹æ®ä»¥å‰çš„çŠ¶æ€æˆ–å¦ä¸€ä¸ªçŠ¶æ€å˜é‡è®¾ç½®çŠ¶æ€æ—¶å¦‚ä½•åˆ é™¤ä¾èµ–å…³ç³»ã€‚&lt;strong&gt;ä½†æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦propsæ¥è®¡ç®—ä¸‹ä¸€ä¸ªçŠ¶æ€å‘¢ï¼Ÿ&lt;/strong&gt; ä¾‹å¦‚ï¼Œæˆ‘ä»¬çš„APIå¯èƒ½æ˜¯&lt;code class=&quot;language-text&quot;&gt;&amp;lt;Counter step = {1} /&amp;gt;&lt;/code&gt;ã€‚å½“ç„¶ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸èƒ½é¿å…å°†&lt;code class=&quot;language-text&quot;&gt;props.step&lt;/code&gt;æŒ‡å®šä¸ºä¾èµ–é¡¹ï¼Ÿ&lt;/p&gt;
&lt;p&gt;äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ï¼æˆ‘ä»¬å¯ä»¥å°†&lt;em&gt;reduceræœ¬èº«&lt;/em&gt; æ”¾åœ¨æˆ‘ä»¬çš„ç»„ä»¶ä¸­æ¥è¯»å–propsï¼š &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; step &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dispatch&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useReducer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;reducer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;reducer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; action&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;tick&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// ä½ çš„å…³æ³¨ç‚¹åº”è¯¥åœ¨è¿™é‡Œ&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; state &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; step&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; type&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;tick&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;clearInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;dispatch&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™ä¸ªæ¨¡å¼ç¦ç”¨äº†ä¸€äº›ä¼˜åŒ–ï¼Œæ‰€ä»¥å°½é‡ä¸è¦åœ¨ä»»ä½•åœ°æ–¹éƒ½ä½¿ç”¨å®ƒï¼Œä½†æ˜¯å¦‚æœéœ€è¦ï¼Œä½ å¯ä»¥å®Œå…¨ä»reducerè®¿é—®propsã€‚(è¿™é‡Œæ˜¯ä¸€ä¸ª&lt;a href=&quot;https://codesandbox.io/s/7ypm405o8q&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ä¾‹å­&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å³ä½¿åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé‡æ–°æ¸²æŸ“ä¹‹é—´ä»ç„¶ä¿è¯&lt;code class=&quot;language-text&quot;&gt;dispatch&lt;/code&gt;æ ‡è¯†æ˜¯ç¨³å®šçš„ã€‚&lt;/strong&gt; å› æ­¤ï¼Œå¦‚æœéœ€è¦ï¼Œä½ å¯ä»¥ä»æ•ˆæœdepsä¸­çœç•¥å®ƒã€‚å®ƒä¸ä¼šå¯¼è‡´é‡æ–°è¿è¡Œæ•ˆæœã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯èƒ½æƒ³çŸ¥é“ï¼šè¿™æ€ä¹ˆå¯èƒ½æœ‰æ•ˆå‘¢ï¼Ÿå½“ä»å±äºå¦ä¸€ä¸ªæ¸²æŸ“æ•ˆæœçš„å†…éƒ¨è°ƒç”¨æ—¶ï¼Œreducerå¦‚ä½•â€œçŸ¥é“â€props?ç­”æ¡ˆæ˜¯ï¼Œå½“ä½ &lt;code class=&quot;language-text&quot;&gt;dispatch&lt;/code&gt;æ—¶ï¼ŒReactä¼šè®°ä½è¯¥æ“ä½œ - ä½†å®ƒä¼šåœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“æœŸé—´è°ƒç”¨ä½ çš„reducerã€‚åœ¨é‚£æ—¶ï¼Œæ–°çš„propså°†åœ¨ä½œç”¨åŸŸå†…ï¼Œä½ ä¸ä¼šåœ¨ä¸€ä¸ªæ•ˆæœå†…ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘å–œæ¬¢å°†&lt;code class=&quot;language-text&quot;&gt;useReducer&lt;/code&gt;è§†ä¸ºHooksçš„â€œä½œå¼Š(æ¬ºéª—)æ¨¡å¼â€ã€‚å®ƒè®©æˆ‘å°†æ›´æ–°é€»è¾‘ä»æè¿°æ‰€å‘ç”Ÿçš„äº‹æƒ…ä¸­è§£è€¦å‡ºæ¥ã€‚åè¿‡æ¥ï¼Œè¿™æœ‰åŠ©äºæˆ‘ä»æˆ‘çš„æ•ˆæœä¸­åˆ é™¤ä¸å¿…è¦çš„ä¾èµ–é¡¹ï¼Œå¹¶é¿å…æ›´é¢‘ç¹åœ°é‡æ–°è¿è¡Œå®ƒä»¬ã€‚&lt;/strong&gt;  &lt;/p&gt;
&lt;h2 id=&quot;ç§»åŠ¨å‡½æ•°åˆ°æ•ˆæœå†…&quot;&gt;&lt;a href=&quot;#%E7%A7%BB%E5%8A%A8%E5%87%BD%E6%95%B0%E5%88%B0%E6%95%88%E6%9E%9C%E5%86%85&quot; aria-label=&quot;ç§»åŠ¨å‡½æ•°åˆ°æ•ˆæœå†… permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ç§»åŠ¨å‡½æ•°åˆ°æ•ˆæœå†…&lt;/h2&gt;
&lt;p&gt;ä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ˜¯è®¤ä¸ºå‡½æ•°ä¸åº”è¯¥æ˜¯ä¾èµ–å…³ç³»ã€‚ä¾‹å¦‚ï¼Œè¿™ä¼¼ä¹å¯ä»¥å·¥ä½œï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SearchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setData&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; hits&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;axios&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token string&quot;&gt;&apos;https://hn.algolia.com/api/v1/search?query=react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Is this okay?&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(&lt;em&gt;&lt;a href=&quot;https://codesandbox.io/s/8j4ykjyv0&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;è¿™ä¸ªä¾‹å­&lt;/a&gt;æ”¹ç¼–è‡ªRobin Wieruchçš„ä¸€ç¯‡ç²¾å½©æ–‡ç«  - &lt;a href=&quot;https://www.robinwieruch.de/react-hooks-fetch-data/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;çœ‹çœ‹å§&lt;/a&gt;ï¼&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;éœ€è¦æ˜ç¡®çš„æ˜¯ï¼Œæ­¤ä»£ç ç¡®å®æœ‰æ•ˆã€‚&lt;strong&gt;ä½†æ˜¯ç®€å•åœ°å¿½ç•¥å±€éƒ¨å‡½æ•°çš„é—®é¢˜æ˜¯ï¼Œå½“ç»„ä»¶å¢é•¿æ—¶ï¼Œå¾ˆéš¾åˆ¤æ–­æˆ‘ä»¬æ˜¯å¦åœ¨å¤„ç†æ‰€æœ‰çš„æƒ…å†µ!&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;æƒ³è±¡ä¸€ä¸‹ï¼Œæˆ‘ä»¬çš„ä»£ç æ˜¯è¿™æ ·æ‹†åˆ†çš„ï¼Œæ¯ä¸ªå‡½æ•°éƒ½è¦å¤§(å¾ˆé•¿ï¼Œä¸æ˜“ç»´æŠ¤)äº”å€ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SearchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// Imagine this function is long&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;https://hn.algolia.com/api/v1/search?query=react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// Imagine this function is also long&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;axios&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç°åœ¨è®©æˆ‘ä»¬è¯´æˆ‘ä»¬ç¨ååœ¨å…¶ä¸­ä¸€ä¸ªå‡½æ•°ä¸­ä½¿ç”¨ä¸€äº›çŠ¶æ€æˆ–propï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SearchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setQuery&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// Imagine this function is also long&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;https://hn.algolia.com/api/v1/search?query=&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// Imagine this function is also long&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;axios&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬å¿˜è®°æ›´æ–°è°ƒç”¨è¿™äº›å‡½æ•°çš„ä»»ä½•æ•ˆæœçš„deps(å¯èƒ½é€šè¿‡å…¶ä»–å‡½æ•°ï¼)ï¼Œæˆ‘ä»¬çš„æ•ˆæœå°†æ— æ³•åŒæ­¥æ¥è‡ªpropså’Œstateçš„æ›´æ”¹ã€‚è¿™å¬èµ·æ¥ä¸å¤ªå¥½ã€‚&lt;/p&gt;
&lt;p&gt;å¹¸è¿çš„æ˜¯ï¼Œè¿™ä¸ªé—®é¢˜æœ‰ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ¡ˆã€‚&lt;strong&gt;å¦‚æœä½ åªåœ¨æ•ˆæœä¸­ä½¿ç”¨æŸäº›å‡½æ•°ï¼Œè¯·å°†å®ƒä»¬ç›´æ¥ç§»åŠ¨åˆ°è¯¥æ•ˆæœä¸­ï¼š&lt;/strong&gt; &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SearchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ä½ çš„å…³æ³¨ç‚¹åœ¨è¿™é‡Œ&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// We moved these functions inside!&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;https://hn.algolia.com/api/v1/search?query=react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;axios&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;setData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// âœ… Deps are OK&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(&lt;a href=&quot;https://codesandbox.io/s/04kp3jwwql&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;è¿™é‡Œæ˜¯ä¸€ä¸ªç¤ºä¾‹&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿæˆ‘ä»¬ä¸å†éœ€è¦è€ƒè™‘â€œä¼ é€’ä¾èµ–â€ã€‚æˆ‘ä»¬çš„ä¾èµ–æ•°ç»„ä¸å†æ¬ºéª—ä½ : &lt;strong&gt;æˆ‘ä»¬çœŸçš„æ²¡æœ‰åœ¨æˆ‘ä»¬çš„æ•ˆæœä¸­ä½¿ç”¨æ¥è‡ªç»„ä»¶å¤–éƒ¨ä½œç”¨åŸŸçš„ä»»ä½•ä¸œè¥¿ã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬ç¨åä¿®æ”¹&lt;code class=&quot;language-text&quot;&gt;getFetchUrl&lt;/code&gt;ä»¥ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;query&lt;/code&gt;çŠ¶æ€ï¼Œæˆ‘ä»¬æ›´æœ‰å¯èƒ½æ³¨æ„åˆ°æˆ‘ä»¬åœ¨æ•ˆæœ&lt;em&gt;ä¸­&lt;/em&gt;ç¼–è¾‘å®ƒ - å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å‘æ•ˆæœä¾èµ–é¡¹æ·»åŠ &lt;code class=&quot;language-text&quot;&gt;query&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SearchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setQuery&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;https://hn.algolia.com/api/v1/search?query=&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;axios&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;setData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// âœ… Deps are OK&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(è¿™é‡Œæ˜¯ä¸€ä¸ª&lt;a href=&quot;https://codesandbox.io/s/pwm32zx7z7&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ä¾‹å­&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;é€šè¿‡æ·»åŠ æ­¤ä¾èµ–é¡¹ï¼Œæˆ‘ä»¬ä¸ä»…ä»…æ˜¯â€œå®‰æŠšReactâ€ã€‚å½“&lt;code class=&quot;language-text&quot;&gt;query&lt;/code&gt;å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œé‡æ–°è·å–æ•°æ®æ˜¯æœ‰æ„ä¹‰çš„ã€‚&lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt;çš„è®¾è®¡è¿«ä½¿ä½ æ³¨æ„åˆ°æˆ‘ä»¬çš„æ•°æ®æµä¸­çš„å˜åŒ–ï¼Œå¹¶é€‰æ‹©æˆ‘ä»¬çš„æ•ˆæœåº”è¯¥å¦‚ä½•åŒæ­¥å®ƒâ€”â€”è€Œä¸æ˜¯å¿½ç•¥å®ƒï¼Œç›´åˆ°æˆ‘ä»¬çš„äº§å“ç”¨æˆ·é‡åˆ°bugã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;æ„Ÿè°¢&lt;code class=&quot;language-text&quot;&gt;eslint-plugin-react-hooks&lt;/code&gt;æ’ä»¶ä¸­çš„&lt;code class=&quot;language-text&quot;&gt;exhaustive-deps&lt;/code&gt; lintè§„åˆ™ï¼Œä½ å¯ä»¥&lt;a href=&quot;https://github.com/facebook/react/issues/14920&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;åœ¨ç¼–è¾‘å™¨ä¸­è¾“å…¥æ—¶åˆ†ææ•ˆæœ&lt;/a&gt;ï¼Œå¹¶è·å¾—æœ‰å…³ç¼ºå°‘å“ªäº›ä¾èµ–é¡¹çš„å»ºè®®ã€‚æ¢å¥è¯è¯´ï¼Œè®¡ç®—æœºå¯ä»¥å‘Šè¯‰ä½ ç»„ä»¶æœªæ­£ç¡®å¤„ç†å“ªäº›æ•°æ®æµæ›´æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://overreacted.io/exhaustive-deps-04a90dcbacb01105d634964880ebed19.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¾ˆç”œèœœã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä½†æˆ‘ä¸èƒ½æŠŠè¿™ä¸ªå‡½æ•°æ”¾åœ¨ä¸€ä¸ªæ•ˆæœä¸­&quot;&gt;&lt;a href=&quot;#%E4%BD%86%E6%88%91%E4%B8%8D%E8%83%BD%E6%8A%8A%E8%BF%99%E4%B8%AA%E5%87%BD%E6%95%B0%E6%94%BE%E5%9C%A8%E4%B8%80%E4%B8%AA%E6%95%88%E6%9E%9C%E4%B8%AD&quot; aria-label=&quot;ä½†æˆ‘ä¸èƒ½æŠŠè¿™ä¸ªå‡½æ•°æ”¾åœ¨ä¸€ä¸ªæ•ˆæœä¸­ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ä½†æˆ‘ä¸èƒ½æŠŠè¿™ä¸ªå‡½æ•°æ”¾åœ¨ä¸€ä¸ªæ•ˆæœä¸­&lt;/h2&gt;
&lt;p&gt;æœ‰æ—¶ä½ å¯èƒ½ä¸æƒ³æŠŠå‡½æ•°ç§»åˆ°æ•ˆæœ&lt;em&gt;ä¸­&lt;/em&gt;ã€‚ä¾‹å¦‚ï¼ŒåŒä¸€ç»„ä»¶ä¸­çš„å¤šä¸ªæ•ˆæœå¯èƒ½ä¼šè°ƒç”¨ç›¸åŒçš„å‡½æ•°ï¼Œå¹¶ä¸”ä½ ä¸å¸Œæœ›å¤åˆ¶å’Œç²˜è´´å…¶é€»è¾‘ã€‚æˆ–è®¸è¿™æ˜¯ä¸€ä¸ªpropã€‚&lt;/p&gt;
&lt;p&gt;ä½ åº”è¯¥åœ¨æ•ˆæœä¾èµ–ä¸­è·³è¿‡è¿™æ ·çš„å‡½æ•°å—ï¼Ÿæˆ‘æƒ³ä¸æ˜¯ã€‚åŒæ ·ï¼Œ&lt;strong&gt;æ•ˆæœä¸åº”è¯¥åœ¨ä¾èµ–å…³ç³»ä¸Šæ’’è°ã€‚&lt;/strong&gt; é€šå¸¸æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚ä¸€ä¸ªå¸¸è§çš„è¯¯è§£æ˜¯â€œä¸€ä¸ªå‡½æ•°æ°¸è¿œä¸ä¼šæ”¹å˜â€ã€‚ä½†æ­£å¦‚æˆ‘ä»¬åœ¨æ•´ç¯‡æ–‡ç« ä¸­æ‰€å­¦åˆ°çš„ï¼Œè¿™ä¸å¯èƒ½æ˜¯äº‹å®ã€‚å®é™…ä¸Šï¼Œç»„ä»¶å†…å®šä¹‰çš„å‡½æ•°ä¼šåœ¨æ¯ä¸ªæ¸²æŸ“ä¸­å‘ç”Ÿå˜åŒ–ï¼&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¿™æœ¬èº«å°±æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚&lt;/strong&gt; å‡è®¾ä¸¤ä¸ªæ•ˆæœè°ƒç”¨&lt;code class=&quot;language-text&quot;&gt;getFetchUrl&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SearchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;https://hn.algolia.com/api/v1/search?query=&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ... Fetch data and do something ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// ğŸ”´ Missing dep: getFetchUrl&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;redux&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ... Fetch data and do something ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// ğŸ”´ Missing dep: getFetchUrl&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½ä¸å¸Œæœ›åœ¨ä»»ä½•ä¸€ä¸ªæ•ˆæœä¸­ç§»åŠ¨&lt;code class=&quot;language-text&quot;&gt;getFetchUrl&lt;/code&gt;ï¼Œå› ä¸ºè¿™æ ·ä½ å°±æ— æ³•å…±äº«é€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä½ å¯¹æ•ˆæœä¾èµ–æ€§â€œè¯šå®â€ï¼Œåˆ™å¯èƒ½ä¼šé‡åˆ°é—®é¢˜ã€‚ç”±äºæˆ‘ä»¬çš„æ•ˆæœéƒ½ä¾èµ–äº&lt;code class=&quot;language-text&quot;&gt;getFetchUrl&lt;/code&gt;ï¼ˆ&lt;strong&gt;æ¯ä¸ªæ¸²æŸ“éƒ½ä¸åŒ&lt;/strong&gt; ï¼‰ï¼Œæˆ‘ä»¬çš„ä¾èµ–æ•°ç»„æ˜¯æ— ç”¨çš„ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SearchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ğŸ”´ Re-triggers all effects on every render&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ä½ çš„å…³æ³¨ç‚¹åœ¨è¿™é‡Œ&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;https://hn.algolia.com/api/v1/search?query=&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ... Fetch data and do something ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;getFetchUrl&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// ğŸš§ Deps are correct but they change too often&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;redux&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ... Fetch data and do something ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;getFetchUrl&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// ğŸš§ Deps are correct but they change too often&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä¸€ä¸ªè¯±äººçš„è§£å†³æ–¹æ¡ˆæ˜¯ç›´æ¥è·³è¿‡depsåˆ—è¡¨ä¸­çš„&lt;code class=&quot;language-text&quot;&gt;getFetchUrl&lt;/code&gt;å‡½æ•°ã€‚ä½†æ˜¯ï¼Œæˆ‘ä¸è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆã€‚è¿™ä½¿æˆ‘ä»¬å¾ˆéš¾æ³¨æ„åˆ°ä½•æ—¶å‘æ•°æ®æµæ·»åŠ &lt;em&gt;éœ€è¦&lt;/em&gt;ç”±æ•ˆæœå¤„ç†çš„æ›´æ”¹ã€‚è¿™ä¼šå¯¼è‡´æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„â€œæ°¸ä¸æ›´æ–°é—´éš”(interval)â€ç­‰é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸åï¼Œè¿˜æœ‰å¦å¤–ä¸¤ç§æ›´ç®€å•çš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¦–å…ˆï¼Œå¦‚æœå‡½æ•°ä¸ä½¿ç”¨ç»„ä»¶èŒƒå›´ä¸­çš„ä»»ä½•å†…å®¹ï¼Œä½ å¯ä»¥å°†å…¶æå‡åˆ°ç»„ä»¶å¤–éƒ¨ï¼Œç„¶ååœ¨æ•ˆæœä¸­è‡ªç”±ä½¿ç”¨å®ƒï¼š&lt;/strong&gt; &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// âœ… Not affected by the data flow&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;https://hn.algolia.com/api/v1/search?query=&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SearchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ... Fetch data and do something ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// âœ… Deps are OK&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;redux&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ... Fetch data and do something ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// âœ… Deps are OK&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ— éœ€åœ¨depsä¸­æŒ‡å®šå®ƒï¼Œå› ä¸ºå®ƒä¸åœ¨æ¸²æŸ“èŒƒå›´å†…ï¼Œå¹¶ä¸”ä¸å—æ•°æ®æµçš„å½±å“ã€‚å®ƒä¸èƒ½å¶ç„¶åœ°ä¾èµ–äºpropsæˆ–çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;æˆ–è€…ï¼Œä½ å¯ä»¥å°†å…¶åŒ…è£…åˆ°&lt;a href=&quot;https://github.com/xiaohesong/TIL/blob/master/front-end/react/hooks/hooks-api.md#usecallback&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;useCallback&lt;/code&gt; Hook&lt;/a&gt;ä¸­ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SearchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// âœ… Preserves identity when its own deps are the same&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ä½ çš„å…³æ³¨ç‚¹åœ¨è¿™é‡Œ&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; getFetchUrl &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useCallback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;https://hn.algolia.com/api/v1/search?query=&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// âœ… Callback deps are OK&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ... Fetch data and do something ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;getFetchUrl&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// âœ… Effect deps are OK&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;redux&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ... Fetch data and do something ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;getFetchUrl&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// âœ… Effect deps are OK&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;useCallback&lt;/code&gt;å®é™…ä¸Šå°±åƒæ·»åŠ å¦ä¸€å±‚ä¾èµ–æ€§æ£€æŸ¥ã€‚å®ƒæ­£åœ¨å¦ä¸€ç«¯è§£å†³é—®é¢˜ â€” &lt;strong&gt;æˆ‘ä»¬åªåœ¨å¿…è¦æ—¶æ›´æ”¹å‡½æ•°æœ¬èº«ï¼Œè€Œä¸æ˜¯é¿å…å‡½æ•°ä¾èµ–ã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬çœ‹çœ‹ä¸ºä»€ä¹ˆè¿™ç§æ–¹æ³•å¾ˆæœ‰ç”¨ã€‚ä»¥å‰ï¼Œæˆ‘ä»¬çš„ç¤ºä¾‹æ˜¾ç¤ºäº†ä¸¤ä¸ªæœç´¢ç»“æœï¼ˆé’ˆå¯¹&lt;code class=&quot;language-text&quot;&gt;&amp;#39;react&amp;#39;&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;&amp;#39;redux&amp;#39;&lt;/code&gt;æœç´¢æŸ¥è¯¢ï¼‰ã€‚ä½†æ˜¯ï¼Œå‡è®¾æˆ‘ä»¬è¦æ·»åŠ ä¸€ä¸ªè¾“å…¥ï¼Œä»¥ä¾¿å¯ä»¥æœç´¢ä»»æ„&lt;code class=&quot;language-text&quot;&gt;query&lt;/code&gt;ã€‚å› æ­¤ï¼Œ&lt;code class=&quot;language-text&quot;&gt;getFetchUrl&lt;/code&gt;ç°åœ¨ä¸ä¼šå°†&lt;code class=&quot;language-text&quot;&gt;query&lt;/code&gt;ä½œä¸ºå‚æ•°ï¼Œè€Œæ˜¯ä»æœ¬åœ°çŠ¶æ€è¯»å–å®ƒã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¼šç«‹å³çœ‹åˆ°å®ƒç¼ºå°‘&lt;code class=&quot;language-text&quot;&gt;query&lt;/code&gt;ä¾èµ–é¡¹ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SearchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setQuery&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; getFetchUrl &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useCallback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// No query argument&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;https://hn.algolia.com/api/v1/search?query=&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// ğŸ”´ Missing dep: query&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¦‚æœæˆ‘ä¿®å¤äº†&lt;code class=&quot;language-text&quot;&gt;useCallback&lt;/code&gt; depsä»¥åŒ…å«&lt;code class=&quot;language-text&quot;&gt;query&lt;/code&gt;ï¼Œé‚£ä¹ˆæ¯å½“&lt;code class=&quot;language-text&quot;&gt;query&lt;/code&gt;æ›´æ”¹æ—¶ï¼Œdepsä¸­çš„&lt;code class=&quot;language-text&quot;&gt;getFetchUrl&lt;/code&gt;çš„ä»»ä½•æ•ˆæœéƒ½ä¼šé‡æ–°è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SearchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setQuery&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// âœ… Preserves identity until query changes&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; getFetchUrl &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useCallback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;https://hn.algolia.com/api/v1/search?query=&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// âœ… Callback deps are OK&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ... Fetch data and do something ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;getFetchUrl&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// âœ… Effect deps are OK&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ„Ÿè°¢&lt;code class=&quot;language-text&quot;&gt;useCallback&lt;/code&gt;ï¼Œå¦‚æœ&lt;code class=&quot;language-text&quot;&gt;query&lt;/code&gt;ç›¸åŒï¼Œåˆ™&lt;code class=&quot;language-text&quot;&gt;getFetchUrl&lt;/code&gt;ä¹Ÿä¿æŒä¸å˜ï¼Œå¹¶ä¸”æˆ‘ä»¬çš„æ•ˆæœä¸ä¼šé‡æ–°è¿è¡Œã€‚ä½†æ˜¯å¦‚æœ&lt;code class=&quot;language-text&quot;&gt;query&lt;/code&gt;æ›´æ”¹ï¼Œ&lt;code class=&quot;language-text&quot;&gt;getFetchUrl&lt;/code&gt;ä¹Ÿä¼šæ›´æ”¹ï¼Œæˆ‘ä»¬å°†é‡æ–°è·å–æ•°æ®ã€‚è¿™å¾ˆåƒåœ¨Excelç”µå­è¡¨æ ¼ä¸­æ›´æ”¹æŸäº›å•å…ƒæ ¼æ—¶ï¼Œä½¿ç”¨å®ƒçš„å…¶ä»–å•å…ƒæ ¼ä¼šè‡ªåŠ¨é‡æ–°è®¡ç®—ã€‚&lt;/p&gt;
&lt;p&gt;è¿™åªæ˜¯æ‹¥æŠ±æ•°æ®æµå’ŒåŒæ­¥æ€ç»´çš„ç»“æœã€‚&lt;strong&gt;ç›¸åŒçš„è§£å†³æ–¹æ¡ˆé€‚ç”¨äºä»çˆ¶çº§ä¼ é€’çš„å‡½æ•°propsï¼š&lt;/strong&gt; &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Parent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setQuery&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// ä½ çš„å…³æ³¨ç‚¹åœ¨è¿™é‡Œ&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// âœ… Preserves identity until query changes&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; fetchData &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useCallback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;https://hn.algolia.com/api/v1/search?query=&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ... Fetch data and return it ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// âœ… Callback deps are OK&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Child&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;fetchData&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Child&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; fetchData &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setData&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;setData&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;fetchData&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// âœ… Effect deps are OK&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç”±äº&lt;code class=&quot;language-text&quot;&gt;fetchData&lt;/code&gt;åªåœ¨&lt;code class=&quot;language-text&quot;&gt;query&lt;/code&gt;çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šåœ¨&lt;code class=&quot;language-text&quot;&gt;Parent&lt;/code&gt;å†…éƒ¨å‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„&lt;code class=&quot;language-text&quot;&gt;Child&lt;/code&gt;åœ¨åº”ç”¨ç¨‹åºçœŸæ­£éœ€è¦æ—¶æ‰ä¼šé‡æ–°è·å–æ•°æ®ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å‡½æ•°æ˜¯æ•°æ®æµçš„ä¸€éƒ¨åˆ†å—ï¼Ÿ&quot;&gt;&lt;a href=&quot;#%E5%87%BD%E6%95%B0%E6%98%AF%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E4%B8%80%E9%83%A8%E5%88%86%E5%90%97%EF%BC%9F&quot; aria-label=&quot;å‡½æ•°æ˜¯æ•°æ®æµçš„ä¸€éƒ¨åˆ†å—ï¼Ÿ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;å‡½æ•°æ˜¯æ•°æ®æµçš„ä¸€éƒ¨åˆ†å—ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;æœ‰è¶£çš„æ˜¯ï¼Œç”¨ç±»æ‰“ç ´äº†è¿™ç§æ¨¡å¼ï¼ŒçœŸæ­£æ˜¾ç¤ºäº†æ•ˆæœå’Œç”Ÿå‘½å‘¨æœŸèŒƒä¾‹ä¹‹é—´çš„å·®å¼‚ã€‚è€ƒè™‘ä¸€ä¸‹è¿™ä¸ªè½¬æ¢:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Parent&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    query&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ä½ çš„å…³æ³¨ç‚¹åœ¨è¿™é‡Œ(æ‰‹åŠ¨é«˜äº®)&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;fetchData&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;https://hn.algolia.com/api/v1/search?query=&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ... Fetch data and do something ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Child&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fetchData&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Child&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;componentDidMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä½ å¯èƒ½ä¼šæƒ³ï¼šâ€œå¾—äº†å§ï¼ŒDanï¼Œæˆ‘ä»¬éƒ½çŸ¥é“&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt;å°±åƒ&lt;code class=&quot;language-text&quot;&gt;componentDidMount&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;componentDidUpdate&lt;/code&gt;ç»“åˆåœ¨ä¸€èµ·ï¼Œä½ æ— æ³•ç»§ç»­å†æ‘‡æ——å‘å–Šäº†ï¼â€ &lt;strong&gt;ç„¶è€Œï¼Œå³ä½¿ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;componentDidUpdate&lt;/code&gt;ï¼Œè¿™ä¹Ÿä¸èµ·ä½œç”¨ï¼š&lt;/strong&gt; &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Child&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;componentDidMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;componentDidUpdate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prevProps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ğŸ”´ This condition will never be true&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fetchData &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; prevProps&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fetchData&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å½“ç„¶ï¼Œ&lt;code class=&quot;language-text&quot;&gt;fetchData&lt;/code&gt;æ˜¯ä¸€ä¸ªç±»çš„æ–¹æ³•ï¼(æˆ–è€…ï¼Œæ›´ç¡®åˆ‡åœ°è¯´ï¼Œä¸€ä¸ªç±»å±æ€§â€”â€”ä½†è¿™ä¸ä¼šæ”¹å˜ä»»ä½•ä¸œè¥¿ã€‚)ç”±äºçŠ¶æ€çš„å˜åŒ–ï¼Œå®ƒä¸ä¼šæœ‰æ‰€ä¸åŒã€‚æ‰€ä»¥&lt;code class=&quot;language-text&quot;&gt;this.props.fetchData&lt;/code&gt;å°†ä¿æŒç­‰äº&lt;code class=&quot;language-text&quot;&gt;prevProps.fetchData&lt;/code&gt;ï¼Œæˆ‘ä»¬å°†æ°¸è¿œä¸ä¼šé‡æ–°è·å–ã€‚è®©æˆ‘ä»¬åˆ é™¤è¿™ä¸ªæ¡ä»¶å‘¢ï¼Ÿ&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token function&quot;&gt;componentDidUpdate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prevProps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å“¦ç­‰ç­‰ï¼Œè¿™ä¼šåœ¨æ¯æ¬¡é‡æ–°æ¸²æŸ“æ—¶è·å–ã€‚(åœ¨ä¸Šé¢çš„æ ‘ä¸­æ·»åŠ ä¸€ä¸ªåŠ¨ç”»æ˜¯å‘ç°å®ƒçš„ä¸€ç§æœ‰è¶£çš„æ–¹å¼ã€‚) ä¹Ÿè®¸è®©æˆ‘ä»¬å°†å®ƒç»‘å®šåˆ°ç‰¹å®šçš„æŸ¥è¯¢ï¼Ÿ&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Child&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fetchData&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œå³ä½¿&lt;code class=&quot;language-text&quot;&gt;query&lt;/code&gt;æ²¡æœ‰æ”¹å˜ï¼Œ&lt;code class=&quot;language-text&quot;&gt;this.props.fetchDataï¼== prevProps.fetchData&lt;/code&gt;ä¹Ÿ&lt;em&gt;å§‹ç»ˆ&lt;/em&gt; ä¸º&lt;code class=&quot;language-text&quot;&gt;true&lt;/code&gt;ï¼æ‰€ä»¥æˆ‘ä»¬æ€»æ˜¯ä¼šé‡æ–°è·å–ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºç±»çš„è¿™ä¸ªéš¾é¢˜ï¼ŒæƒŸä¸€çœŸæ­£çš„è§£å†³æ–¹æ¡ˆæ˜¯å’¬ç´§ç‰™å…³ï¼Œå°†&lt;code class=&quot;language-text&quot;&gt;query&lt;/code&gt;æœ¬èº«ä¼ é€’ç»™&lt;code class=&quot;language-text&quot;&gt;Child&lt;/code&gt;ç»„ä»¶ã€‚&lt;code class=&quot;language-text&quot;&gt;Child&lt;/code&gt;å®é™…ä¸Šå¹¶æ²¡æœ‰æœ€ç»ˆä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;query&lt;/code&gt;ï¼Œä½†å®ƒå¯ä»¥åœ¨æ›´æ”¹æ—¶è§¦å‘é‡æ–°è·å–ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Parent&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    query&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;fetchData&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;https://hn.algolia.com/api/v1/search?query=&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ... Fetch data and do something ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Child&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fetchData&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Child&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;componentDidMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;componentDidUpdate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prevProps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;query &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; prevProps&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åœ¨å¤šå¹´ä½¿ç”¨Reactç±»çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å·²ç»ä¹ æƒ¯äº†ä¼ é€’ä¸å¿…è¦çš„propså¹¶ç ´åçˆ¶ç»„ä»¶çš„å°è£…ï¼Œç›´åˆ°ä¸€å‘¨å‰æˆ‘æ‰æ„è¯†åˆ°ä¸ºä»€ä¹ˆå¿…é¡»è¿™æ ·åšã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¯¹äºç±»ï¼Œå‡½æ•°propsæœ¬èº«å¹¶ä¸æ˜¯æ•°æ®æµçš„çœŸæ­£ç»„æˆéƒ¨åˆ†ã€‚&lt;/strong&gt; æ–¹æ³•è¿‡äºç´§å¯†äºå¯å˜çš„&lt;code class=&quot;language-text&quot;&gt;this&lt;/code&gt;å˜é‡ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸èƒ½ä¾èµ–å®ƒä»¬çš„æ ‡è¯†æ¥è¡¨ç¤ºä»»ä½•å†…å®¹ã€‚ å› æ­¤ï¼Œå³ä½¿æˆ‘ä»¬åªæƒ³è¦ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬ä¹Ÿå¿…é¡»ä¼ é€’ä¸€å †å…¶ä»–æ•°æ®ï¼Œä»¥ä¾¿èƒ½å¤Ÿâ€œåŒºåˆ†â€å®ƒã€‚æˆ‘ä»¬æ— æ³•çŸ¥é“ä»çˆ¶çº§ä¼ é€’çš„&lt;code class=&quot;language-text&quot;&gt;this.props.fetchData&lt;/code&gt;æ˜¯å¦ä¾èµ–äºæŸç§çŠ¶æ€ï¼Œä»¥åŠè¯¥çŠ¶æ€æ˜¯å¦åˆšåˆšæ›´æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;useCallback&lt;/code&gt;ï¼Œå‡½æ•°å¯ä»¥å®Œå…¨å‚ä¸æ•°æ®æµã€‚&lt;/strong&gt; æˆ‘ä»¬å¯ä»¥è¯´ï¼Œå¦‚æœå‡½æ•°è¾“å…¥å‘ç”Ÿäº†å˜åŒ–ï¼Œå‡½æ•°æœ¬èº«å°±ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä½†å¦‚æœæ²¡æœ‰å˜åŒ–ï¼Œå®ƒå°±ä¼šä¿æŒä¸å˜ã€‚ç”±äº&lt;code class=&quot;language-text&quot;&gt;useCallback&lt;/code&gt;æä¾›çš„ç²’åº¦ï¼Œå¯¹&lt;code class=&quot;language-text&quot;&gt;props.fetchData&lt;/code&gt;ç­‰propsçš„æ›´æ”¹å¯ä»¥è‡ªåŠ¨å‘ä¸‹ä¼ æ’­ã€‚ &lt;/p&gt;
&lt;p&gt;åŒæ ·ï¼Œ&lt;a href=&quot;https://github.com/xiaohesong/TIL/blob/master/front-end/react/hooks/hooks-api.md#usememo&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;useMemo&lt;/a&gt;è®©æˆ‘ä»¬å¯¹å¤æ‚å¯¹è±¡ä¹Ÿè¿™æ ·åšï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ColorPicker&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// Doesn&apos;t break Child&apos;s shallow equality prop check&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// unless the color actually changes.&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;color&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setColor&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;pink&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; style &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useMemo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; color &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;color&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Child&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;style&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;æˆ‘æƒ³å¼ºè°ƒçš„æ˜¯ï¼Œåœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;useCallback&lt;/code&gt;éƒ½éå¸¸ç¬¨é‡ã€‚&lt;/strong&gt; å½“ä¸€ä¸ªå‡½æ•°ä¼ é€’ä¸‹å»å¹¶ä»ä¸€äº›å­ç»„ä»¶çš„æ•ˆæœå†…éƒ¨è°ƒç”¨æ—¶å®ƒå¾ˆæœ‰ç”¨ã€‚æˆ–è€…ï¼Œå¦‚æœä½ è¯•å›¾é˜»æ­¢ç ´åå­ç»„ä»¶çš„è®°å¿†ã€‚ä½†Hooksæ›´é€‚åˆäº&lt;a href=&quot;https://reactjs.org/docs/hooks-faq.html#how-to-avoid-passing-callbacks-down&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;é¿å…å›è°ƒå®Œå…¨ä¼ é€’ä¸‹æ¥&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘æ›´å¸Œæœ›&lt;code class=&quot;language-text&quot;&gt;fetchData&lt;/code&gt;ä½äºæˆ‘çš„effect(å®ƒæœ¬èº«å¯ä»¥è¢«æå–åˆ°ä¸€ä¸ªè‡ªå®šä¹‰çš„é’©å­ä¸­)æˆ–é¡¶å±‚å¯¼å…¥ä¸­ã€‚æˆ‘å¸Œæœ›ä¿æŒeffectç®€å•ï¼Œå¹¶ä¸”å…¶ä¸­çš„å›è°ƒå¯¹æ­¤æ²¡æœ‰å¸®åŠ©ã€‚(â€œå¦‚æœåœ¨è¯·æ±‚è¿è¡ŒæœŸé—´æŸäº›&lt;code class=&quot;language-text&quot;&gt;props.onComplete&lt;/code&gt;å›è°ƒå‘ç”Ÿäº†æ›´æ”¹ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿâ€) ä½ å¯ä»¥&lt;a href=&quot;https://overreacted.io/a-complete-guide-to-useeffect/#swimming-against-the-tide&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;æ¨¡æ‹Ÿç±»è¡Œä¸º&lt;/a&gt;ï¼Œä½†è¿™å¹¶ä¸èƒ½è§£å†³ç«äº‰æ¡ä»¶ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¯´è¯´ç«äº‰æ¡ä»¶&quot;&gt;&lt;a href=&quot;#%E8%AF%B4%E8%AF%B4%E7%AB%9E%E4%BA%89%E6%9D%A1%E4%BB%B6&quot; aria-label=&quot;è¯´è¯´ç«äº‰æ¡ä»¶ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;è¯´è¯´ç«äº‰æ¡ä»¶&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨ç±»çš„ç»å…¸æ•°æ®è·å–ç¤ºä¾‹å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Article&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    article&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;componentDidMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; article &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;API&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchArticle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; article &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä½ å¯èƒ½çŸ¥é“ï¼Œè¿™æ®µä»£ç æœ‰äº›é—®é¢˜ã€‚å®ƒä¸å¤„ç†æ›´æ–°ã€‚æ‰€ä»¥ä½ å¯ä»¥åœ¨ç½‘ä¸Šæ‰¾åˆ°çš„ç¬¬äºŒä¸ªç»å…¸ä¾‹å­æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Article&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    article&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;componentDidMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;componentDidUpdate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prevProps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prevProps&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; article &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;API&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchArticle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; article &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™è‚¯å®šæ›´å¥½ï¼ä½†ä»–ä»ç„¶æœ‰äº›é—®é¢˜ã€‚å®ƒæœ‰é—®é¢˜çš„åŸå› æ˜¯è¯·æ±‚é¡ºåºå¯èƒ½å‡ºç°é—®é¢˜ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘æ­£åœ¨è·å–&lt;code class=&quot;language-text&quot;&gt;{idï¼š10}&lt;/code&gt;çš„æ•°æ®ï¼Œåˆ‡æ¢åˆ°&lt;code class=&quot;language-text&quot;&gt;{idï¼š20}&lt;/code&gt;ï¼Œä½†&lt;code class=&quot;language-text&quot;&gt;{idï¼š20}&lt;/code&gt;è¯·æ±‚é¦–å…ˆå‡ºç°ï¼Œå…ˆå‰å¼€å§‹ä½†ç¨åå®Œæˆçš„è¯·æ±‚å°†é”™è¯¯åœ°è¦†ç›–æˆ‘çš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;è¿™è¢«ç§°ä¸ºç«äº‰æ¡ä»¶ï¼Œå®ƒåœ¨ä»£ç ä¸­æ˜¯å…¸å‹çš„ï¼Œå°†&lt;code class=&quot;language-text&quot;&gt;async&lt;/code&gt;/&lt;code class=&quot;language-text&quot;&gt;await&lt;/code&gt;ï¼ˆå‡å®šæœ‰ä¸œè¥¿åœ¨ç­‰å¾…ç»“æœï¼‰ä¸è‡ªé¡¶å‘ä¸‹çš„æ•°æ®æµï¼ˆå½“æˆ‘ä»¬å¤„äºå¼‚æ­¥å‡½æ•°çš„ä¸­é—´æ—¶ï¼Œå±æ€§æˆ–çŠ¶æ€å¯èƒ½ä¼šæ”¹å˜ï¼‰æ··åˆåœ¨ä¸€èµ·ã€‚&lt;/p&gt;
&lt;p&gt;æ•ˆæœå¹¶ä¸èƒ½ç¥å¥‡åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯å¦‚æœä½ è¯•å›¾å°†&lt;code class=&quot;language-text&quot;&gt;async&lt;/code&gt;å‡½æ•°ç›´æ¥ä¼ é€’ç»™æ•ˆæœï¼Œå®ƒä»¬ä¼šè­¦å‘Šä½ ã€‚(æˆ‘ä»¬éœ€è¦æ”¹è¿›è¿™ä¸ªè­¦å‘Šï¼Œä»¥ä¾¿æ›´å¥½åœ°è§£é‡Šä½ å¯èƒ½é‡åˆ°çš„é—®é¢˜ã€‚)&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ ä½¿ç”¨çš„å¼‚æ­¥æ–¹æ³•æ”¯æŒå–æ¶ˆï¼Œé‚£å°±å¤ªæ£’äº†! ä½ å¯ä»¥åœ¨æ¸…ç†å‡½æ•°ä¸­å–æ¶ˆå¼‚æ­¥è¯·æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;æˆ–è€…ï¼Œæœ€ç®€å•çš„æƒå®œä¹‹è®¡æ–¹æ³•æ˜¯ä½¿ç”¨å¸ƒå°”å€¼è·Ÿè¸ªå®ƒï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Article&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; id &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;article&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setArticle&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; didCancel &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; article &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;API&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchArticle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;didCancel&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;        &lt;/span&gt;      	&lt;span class=&quot;token function&quot;&gt;setArticle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;article&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;fetchData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token comment&quot;&gt;// è¿™é‡Œä¹Ÿæ˜¯ä½ çš„å…³æ³¨ç‚¹&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;      
    	didCancel &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;    
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://www.robinwieruch.de/react-hooks-fetch-data/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;è¿™ç¯‡æ–‡ç« &lt;/a&gt;è¯¦ç»†ä»‹ç»äº†å¦‚ä½•å¤„ç†é”™è¯¯å’ŒåŠ è½½çŠ¶æ€ï¼Œä»¥åŠå°†è¯¥é€»è¾‘æå–åˆ°è‡ªå®šä¹‰Hookä¸­ã€‚å¦‚æœä½ æœ‰å…´è¶£äº†è§£æœ‰å…³ä½¿ç”¨Hooksè·å–æ•°æ®çš„æ›´å¤šä¿¡æ¯ï¼Œæˆ‘å»ºè®®ä½ æŸ¥çœ‹ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æé«˜æ ‡å‡†&quot;&gt;&lt;a href=&quot;#%E6%8F%90%E9%AB%98%E6%A0%87%E5%87%86&quot; aria-label=&quot;æé«˜æ ‡å‡† permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;æé«˜æ ‡å‡†&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨ç±»ç”Ÿå‘½å‘¨æœŸæ€ç»´æ¨¡å¼ï¼Œå‰¯ä½œç”¨ä¸æ¸²æŸ“è¾“å‡ºçš„è¡Œä¸ºä¸åŒã€‚æ¸²æŸ“UIç”±propså’Œstateé©±åŠ¨ï¼Œå¹¶ä¿è¯ä¸å®ƒä»¬ä¸€è‡´ï¼Œä½†å‰¯ä½œç”¨ä¸æ˜¯ã€‚è¿™æ˜¯bugçš„å¸¸è§æ¥æºã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt;çš„æ€ç»´æ¨¡å¼ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šåŒæ­¥äº‹ç‰©ã€‚å‰¯ä½œç”¨æˆä¸ºReactæ•°æ®æµçš„ä¸€éƒ¨åˆ†ã€‚å¯¹äºæ¯ä¸ª&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt;è°ƒç”¨ï¼Œä¸€æ—¦ä½ åšå¯¹äº†ï¼Œä½ çš„ç»„ä»¶å°±ä¼šæ›´å¥½åœ°å¤„ç†è¾¹ç¼˜æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œåšå¥½è¿™ä»¶äº‹çš„å‰æœŸæˆæœ¬æ›´é«˜ã€‚è¿™å¯èƒ½å¾ˆçƒ¦äººã€‚ç¼–å†™èƒ½å¤Ÿå¾ˆå¥½åœ°å¤„ç†è¾¹ç¼˜æƒ…å†µçš„åŒæ­¥ä»£ç ï¼Œæœ¬è´¨ä¸Šæ¯”å¼•å‘ä¸æ¸²æŸ“ä¸ä¸€è‡´çš„ä¸€æ¬¡æ€§å‰¯ä½œç”¨æ›´å›°éš¾ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœ&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt;æ˜¯ä½ å¤§å¤šæ•°æ—¶é—´ä½¿ç”¨çš„å·¥å…·ï¼Œè¿™å¯èƒ½ä¼šä»¤äººæ‹…å¿§ã€‚ç„¶è€Œï¼Œå®ƒæ˜¯ä¸€ä¸ªä½å±‚çš„æ„å»ºå—ã€‚ç°åœ¨æ˜¯ä½¿ç”¨é’©å­çš„æ—©æœŸé˜¶æ®µï¼Œæ‰€ä»¥æ¯ä¸ªäººéƒ½ä¸€ç›´åœ¨ä½¿ç”¨ä½çº§åˆ«çš„é’©å­ï¼Œå°¤å…¶æ˜¯åœ¨æ•™ç¨‹ä¸­ã€‚ä½†æ˜¯åœ¨å®è·µä¸­ï¼Œéšç€å¥½çš„APIè·å¾—å‘å±•åŠ¿å¤´ï¼Œç¤¾åŒºå¾ˆå¯èƒ½ä¼šå¼€å§‹è½¬å‘æ›´é«˜çº§åˆ«çš„é’©å­ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘çœ‹åˆ°ä¸åŒçš„åº”ç”¨ç¨‹åºåˆ›å»ºäº†å®ƒä»¬è‡ªå·±çš„é’©å­ï¼Œæ¯”å¦‚å°è£…äº†å®ƒä»¬çš„ä¸€äº›åº”ç”¨ç¨‹åºçš„authé€»è¾‘çš„&lt;code class=&quot;language-text&quot;&gt;useFetch&lt;/code&gt;æˆ–ä½¿ç”¨ä¸»é¢˜ä¸Šä¸‹æ–‡çš„&lt;code class=&quot;language-text&quot;&gt;useTheme&lt;/code&gt;ã€‚ä¸€æ—¦ä½ æœ‰äº†è¿™äº›å·¥å…·ç®±ï¼Œä½ å°±ä¸ä¼šç»å¸¸ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt;ã€‚ä½†å®ƒå¸¦æ¥çš„å¼¹æ€§ä½¿æ¯ä¸ªHookéƒ½èƒ½åœ¨å…¶ä¸Šæ„å»ºã€‚&lt;/p&gt;
&lt;p&gt;åˆ°ç›®å‰ä¸ºæ­¢ï¼Œ&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt;æœ€å¸¸ç”¨äºæ•°æ®è·å–ã€‚ä½†æ˜¯æ•°æ®æå–å¹¶ä¸æ˜¯ä¸€ä¸ªåŒæ­¥é—®é¢˜ã€‚è¿™ä¸€ç‚¹å°¤å…¶æ˜æ˜¾ï¼Œå› ä¸ºæˆ‘ä»¬çš„depsç»å¸¸æ˜¯&lt;code class=&quot;language-text&quot;&gt;[]&lt;/code&gt;ã€‚æˆ‘ä»¬åœ¨åŒæ­¥ä»€ä¹ˆ?&lt;/p&gt;
&lt;p&gt;ä»é•¿è¿œæ¥çœ‹ï¼Œ&lt;a href=&quot;https://reactjs.org/blog/2018/11/27/react-16-roadmap.html#react-16x-mid-2019-the-one-with-suspense-for-data-fetching&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;æ•°æ®è·å–çš„suspense&lt;/a&gt;å°†å…è®¸ç¬¬ä¸‰æ–¹åº“ä»¥ä¸€ç§ä¸€æµçš„æ–¹å¼å‘Šè¯‰Reactæš‚åœæ¸²æŸ“ï¼Œç›´åˆ°å¼‚æ­¥(ä»»ä½•ä¸œè¥¿:ä»£ç ã€æ•°æ®ã€å›¾åƒ)å°±ç»ªã€‚&lt;/p&gt;
&lt;p&gt;éšç€suspenseé€æ¸è¦†ç›–æ›´å¤šçš„æ•°æ®è·å–ç”¨ä¾‹ï¼Œæˆ‘é¢„è®¡å½“ä½ çœŸæ­£æƒ³è¦åŒæ­¥propså’ŒçŠ¶æ€åˆ°æŸä¸ªå‰¯ä½œç”¨æ—¶ï¼Œ&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt;å°†ä½œä¸ºä¸€ä¸ªé«˜çº§ç”¨æˆ·å·¥å…·æ·¡å‡ºèƒŒæ™¯ã€‚ä¸æ•°æ®è·å–ä¸åŒï¼Œå®ƒå¯ä»¥å¾ˆè‡ªç„¶åœ°å¤„ç†è¿™ç§æƒ…å†µï¼Œå› ä¸ºå®ƒæ˜¯ä¸ºè¿™ç§æƒ…å†µè€Œè®¾è®¡çš„ã€‚ä½†åœ¨æ­¤ä¹‹å‰ï¼Œ&lt;a href=&quot;https://www.robinwieruch.de/react-hooks-fetch-data/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;è¿™é‡Œæ‰€ç¤º&lt;/a&gt;çš„è‡ªå®šä¹‰é’©å­æ˜¯é‡ç”¨æ•°æ®è·å–é€»è¾‘çš„å¥½æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç»“æŸ&quot;&gt;&lt;a href=&quot;#%E7%BB%93%E6%9D%9F&quot; aria-label=&quot;ç»“æŸ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ç»“æŸ&lt;/h2&gt;
&lt;p&gt;ç°åœ¨ä½ å·²ç»äº†è§£äº†æˆ‘ä½¿ç”¨æ•ˆæœçš„æ‰€æœ‰çŸ¥è¯†ï¼Œè¯·åœ¨å¼€å§‹æ—¶æŸ¥çœ‹&lt;a href=&quot;#tldr&quot;&gt;TLDR&lt;/a&gt;ã€‚æœ‰æ„ä¹‰å—?æˆ‘é”™è¿‡ä»€ä¹ˆäº†å—?(æˆ‘çš„çº¸è¿˜æ²¡æœ‰ç”¨å®Œå‘¢!)&lt;/p&gt;
&lt;p&gt;æˆ‘å¾ˆæƒ³åœ¨&lt;a href=&quot;https://mobile.twitter.com/search?q=https%3A%2F%2Foverreacted.io%2Fa-complete-guide-to-useeffect%2F&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Twitter&lt;/a&gt;ä¸Šæ”¶åˆ°ä½ çš„æ¥ä¿¡ï¼è°¢è°¢é˜…è¯»ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç¬”è€…ä¸ªäººæ€»ç»“&quot;&gt;&lt;a href=&quot;#%E7%AC%94%E8%80%85%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93&quot; aria-label=&quot;ç¬”è€…ä¸ªäººæ€»ç»“ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ç¬”è€…ä¸ªäººæ€»ç»“&lt;/h2&gt;
&lt;p&gt;å…¶å®è¿™ä¸ªå°±åƒå‰é¢æ‰€è¯´çš„ç±»å’Œå‡½æ•°çš„åŒºåˆ«äº†ã€‚å› ä¸ºåœ¨Reactä¸­ï¼Œpropsæ˜¯ä¸ä¼šæ”¹å˜çš„ï¼Œè€Œthis(state)æ˜¯å¯å˜çš„ã€‚æ‰€ä»¥é€ æˆäº†æ”¹å˜ã€‚ç”±äºpropsæ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ ·é’ˆå¯¹æ¯æ¬¡çš„æ¸²æŸ“ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªç‰¹å®šçš„æ¸²æŸ“(æ¯æ¬¡çš„æ¸²æŸ“)ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºeffectå†…ä½¿ç”¨çš„å‡½æ•°ï¼Œæœ€å¥½æ˜¯æ”¾åœ¨effectä¸­ï¼Œè¿™æ ·å¯ä»¥é¿å…ä»¥åç»„ä»¶å¢åŠ è€Œæœªå¤„ç†æ‰€æœ‰çš„æƒ…å†µã€‚å¦‚æœæœ‰å¤ç”¨ï¼Œå¯ä»¥æŠŠè¿™äº›å‡½æ•°æåˆ°effectå¤–é¢ï¼Œä½¿ç”¨useCallbackåŒ…è£¹èµ·æ¥ã€‚&lt;/p&gt;</content:encoded></item><item><title><![CDATA[ç¼–å†™å¯ä¼¸ç¼©ç»„ä»¶]]></title><description><![CDATA[ç¼–å†™å¼¹æ€§ç»„ä»¶ å½“äººä»¬å¼€å§‹å­¦ä¹ Reactæ—¶ï¼Œä»–ä»¬ç»å¸¸ä¼šæƒ³è¦ä¸€ä»½é£æ ¼æŒ‡å—ã€‚è™½ç„¶åœ¨é¡¹ç›®ä¸­åº”ç”¨ä¸€äº›ä¸€è‡´çš„è§„åˆ™æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œä½†å¾ˆå¤šéƒ½æ˜¯éšæ„çš„ - æ‰€ä»¥Reactå¯¹å®ƒä»¬æ²¡æœ‰å¼ºçƒˆçš„æ„è§ã€‚ ä½ å¯ä»¥ä½¿ç”¨ä¸åŒçš„ç±»å‹ç³»ç»Ÿï¼Œåå‘äºå‡½æ•°å£°æ˜æˆ–ç®­å¤´å‡½æ•°ï¼Œå¯ä»¥æŒ‰å­—æ¯é¡ºåºæˆ–ä½ å–œæ¬¢çš„é¡ºåºå¯¹propsâ€¦]]></description><link>https://github.com/xiaohesong/hi-folks/</link><guid isPermaLink="false">https://github.com/xiaohesong/hi-folks/</guid><pubDate>Tue, 19 Mar 2019 19:40:32 GMT</pubDate><content:encoded>&lt;h1 id=&quot;ç¼–å†™å¼¹æ€§ç»„ä»¶&quot;&gt;&lt;a href=&quot;#%E7%BC%96%E5%86%99%E5%BC%B9%E6%80%A7%E7%BB%84%E4%BB%B6&quot; aria-label=&quot;ç¼–å†™å¼¹æ€§ç»„ä»¶ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ç¼–å†™å¼¹æ€§ç»„ä»¶&lt;/h1&gt;
&lt;p&gt;å½“äººä»¬å¼€å§‹å­¦ä¹ Reactæ—¶ï¼Œä»–ä»¬ç»å¸¸ä¼šæƒ³è¦ä¸€ä»½é£æ ¼æŒ‡å—ã€‚è™½ç„¶åœ¨é¡¹ç›®ä¸­åº”ç”¨ä¸€äº›ä¸€è‡´çš„è§„åˆ™æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œä½†å¾ˆå¤šéƒ½æ˜¯éšæ„çš„ - æ‰€ä»¥Reactå¯¹å®ƒä»¬æ²¡æœ‰å¼ºçƒˆçš„æ„è§ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥ä½¿ç”¨ä¸åŒçš„ç±»å‹ç³»ç»Ÿï¼Œåå‘äºå‡½æ•°å£°æ˜æˆ–ç®­å¤´å‡½æ•°ï¼Œå¯ä»¥æŒ‰å­—æ¯é¡ºåºæˆ–ä½ å–œæ¬¢çš„é¡ºåºå¯¹propsè¿›è¡Œæ’åºã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§çµæ´»æ€§å…è®¸&lt;a href=&quot;https://reactjs.org/docs/add-react-to-a-website.html&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;é›†æˆReact&lt;/a&gt;åˆ°å…·æœ‰ç°æœ‰çº¦å®šçš„é¡¹ç›®ä¸­ã€‚ä½†å®ƒä¹Ÿå¼•å‘äº†æ— ä¼‘æ­¢çš„äº‰è®ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ¯ä¸ªç»„ä»¶éƒ½åº”è¯¥åŠªåŠ›éµå¾ªä¸€äº›é‡è¦çš„è®¾è®¡åŸåˆ™ã€‚ä½†æˆ‘ä¸è®¤ä¸ºé£æ ¼æŒ‡å—å¾ˆå¥½åœ°æ•è·è¿™äº›åŸåˆ™ã€‚æˆ‘ä»¬å…ˆè°ˆè°ˆé£æ ¼æŒ‡å—ï¼Œç„¶åå†&lt;a href=&quot;https://overreacted.io/writing-resilient-components/#writing-resilient-components&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;çœ‹çœ‹çœŸæ­£æœ‰ç”¨çš„åŸåˆ™&lt;/a&gt;ã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;ä¸è¦è¢«æƒ³è±¡ä¸­çš„é—®é¢˜åˆ†æ•£æ³¨æ„åŠ›&quot;&gt;&lt;a href=&quot;#%E4%B8%8D%E8%A6%81%E8%A2%AB%E6%83%B3%E8%B1%A1%E4%B8%AD%E7%9A%84%E9%97%AE%E9%A2%98%E5%88%86%E6%95%A3%E6%B3%A8%E6%84%8F%E5%8A%9B&quot; aria-label=&quot;ä¸è¦è¢«æƒ³è±¡ä¸­çš„é—®é¢˜åˆ†æ•£æ³¨æ„åŠ› permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ä¸è¦è¢«æƒ³è±¡ä¸­çš„é—®é¢˜åˆ†æ•£æ³¨æ„åŠ›&lt;/h2&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬è®¨è®ºç»„ä»¶è®¾è®¡åŸåˆ™ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆè°ˆè°ˆé£æ ¼æŒ‡å—ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªæµè¡Œçš„è§‚ç‚¹ï¼Œä½†æœ‰äººéœ€è¦è¯´å‡ºæ¥!&lt;/p&gt;
&lt;p&gt;åœ¨JavaScriptç¤¾åŒºä¸­ï¼Œæœ‰ä¸€äº›ç”±linterå¼ºåˆ¶æ‰§è¡Œçš„æ ·å¼æŒ‡å—ã€‚æˆ‘ä¸ªäººçš„çœ‹æ³•æ˜¯ï¼Œå®ƒä»¬å¾€å¾€ä¼šäº§ç”Ÿæ¯”å…¶ä»·å€¼æ›´å¤§çš„æ‘©æ“¦ã€‚æˆ‘è®°ä¸æ¸…æœ‰å¤šå°‘æ¬¡æœ‰äººå‘æˆ‘å±•ç¤ºäº†ä¸€äº›ç»å¯¹æœ‰æ•ˆçš„ä»£ç å¹¶è¯´â€œReactå¯¹è¿™ä¸ªæœ‰æŠ±æ€¨â€ï¼Œä½†è¿™æ˜¯ä»–ä»¬çš„lint config é…ç½®åœ¨æŠ±æ€¨!è¿™å¯¼è‡´äº†ä¸‰ä¸ªé—®é¢˜:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;äººä»¬ä¹ æƒ¯äº†æŠŠlinterçœ‹ä½œæ˜¯ä¸€ä¸ª &lt;strong&gt;è¿‡äºçƒ­æƒ…ä¸”å˜ˆæ‚çš„å®ˆå«&lt;/strong&gt; ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„å·¥å…·ã€‚æœ‰ç”¨çš„è­¦å‘Šè¢«é£æ ¼çš„æµ·æ´‹æ·¹æ²¡äº†ã€‚å› æ­¤ï¼Œäººä»¬åœ¨è°ƒè¯•æ—¶ä¸ä¼šæ‰«ælinteræ¶ˆæ¯ï¼Œå¹¶ä¸”ä¼šé”™è¿‡ä¸€äº›æœ‰ç”¨çš„æç¤ºã€‚æ­¤å¤–ï¼Œä¸å¤ªä¹ æƒ¯ç¼–å†™JavaScriptçš„äººï¼ˆä¾‹å¦‚ï¼Œè®¾è®¡äººå‘˜ï¼‰æ›´éš¾ä»¥ä½¿ç”¨ä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;äººä»¬æ²¡æœ‰å­¦ä¼š &lt;strong&gt;åŒºåˆ†æœ‰æ•ˆå’Œæ— æ•ˆç”¨æ³•&lt;/strong&gt; çš„ç‰¹å®šæ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ªæµè¡Œçš„è§„åˆ™ç¦æ­¢åœ¨&lt;code class=&quot;language-text&quot;&gt;componentDidMount&lt;/code&gt;ä¸­è°ƒç”¨&lt;code class=&quot;language-text&quot;&gt;setState&lt;/code&gt;ã€‚ä½†å¦‚æœå®ƒä¸€ç›´æ˜¯â€œä¸å¥½çš„â€ï¼ŒReactæ ¹æœ¬ä¸ä¼šå…è®¸å®ƒè¿™ä¹ˆä½¿ç”¨ï¼å®ƒæœ‰ä¸€ä¸ªåˆæ³•çš„ç”¨ä¾‹ï¼Œé‚£å°±æ˜¯æµ‹é‡DOMèŠ‚ç‚¹å¸ƒå±€â€”â€”ä¾‹å¦‚å®šä½ä¸€ä¸ªå·¥å…·æç¤ºã€‚æˆ‘è§è¿‡æœ‰äººé€šè¿‡æ·»åŠ &lt;code class=&quot;language-text&quot;&gt;setTimeout&lt;/code&gt;â€œç»•è¿‡â€è¿™æ¡è§„åˆ™ï¼Œè¿™å®Œå…¨æ²¡æœ‰æŠ“ä½é‡ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;æœ€ç»ˆï¼Œäººä»¬é‡‡ç”¨äº†â€œå¼ºåˆ¶æ‰§è¡Œè€…å¿ƒæ€â€ï¼Œå¹¶ä¸”å¯¹é‚£äº› &lt;strong&gt;ä¸ä¼šå¸¦æ¥æœ‰æ„ä¹‰çš„å·®å¼‚&lt;/strong&gt; ä½†å¾ˆå®¹æ˜“åœ¨ä»£ç ä¸­æ‰«æçš„äº‹æƒ…äº§ç”Ÿäº†çœ‹æ³•ã€‚â€œä½ ä½¿ç”¨äº†å‡½æ•°å£°æ˜ï¼Œä½†æˆ‘ä»¬çš„é¡¹ç›®ä½¿ç”¨äº†ç®­å¤´å‡½æ•°ã€‚â€æ¯å½“æˆ‘å¯¹æ‰§è¡Œè¿™æ ·çš„è§„åˆ™æœ‰å¼ºçƒˆçš„æ„Ÿè§‰æ—¶ï¼Œæ·±å…¥è§‚å¯Ÿä¸€ä¸‹å°±ä¼šå‘ç°ï¼Œæˆ‘åœ¨è¿™æ¡è§„åˆ™ä¸ŠæŠ•å…¥äº†æƒ…æ„Ÿçš„åŠªåŠ›â€”â€”å¹¶åŠªåŠ›è®©å®ƒæ¶ˆå¤±ã€‚å®ƒè¯±ä½¿æˆ‘äº§ç”Ÿä¸€ç§é”™è¯¯çš„æˆå°±æ„Ÿï¼Œè€Œæ²¡æœ‰æ”¹è¿›æˆ‘çš„ä»£ç ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘æ˜¯è¯´æˆ‘ä»¬åº”è¯¥åœæ­¢linterï¼Ÿä¸€ç‚¹ä¹Ÿä¸ï¼&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é€šè¿‡è‰¯å¥½çš„é…ç½®ï¼Œlinteræ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·ï¼Œå¯ä»¥åœ¨é”™è¯¯å‘ç”Ÿä¹‹å‰æ•è·å®ƒä»¬ã€‚&lt;/strong&gt; å®ƒè¿‡äºä¸“æ³¨äº &lt;em&gt;é£æ ¼&lt;/em&gt; ï¼Œä½¿å…¶å˜å¾—åˆ†æ•£æ³¨æ„åŠ›ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;marie-kondo-your-lint-config&quot;&gt;&lt;a href=&quot;#marie-kondo-your-lint-config&quot; aria-label=&quot;marie kondo your lint config permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Marie Kondo Your Lint Config&lt;/h2&gt;
&lt;p&gt;è¿™æ˜¯æˆ‘å»ºè®®ä½ å‘¨ä¸€åšçš„ã€‚èŠ±åŠä¸ªå°æ—¶å¬é›†ä½ çš„å›¢é˜Ÿï¼Œæ£€æŸ¥é¡¹ç›®é…ç½®ä¸­å¯ç”¨çš„æ¯ä¸€æ¡lintè§„åˆ™ï¼Œç„¶åé—®è‡ªå·±: â€œ&lt;em&gt;è¿™æ¡è§„åˆ™æ˜¯å¦æ›¾å¸®åŠ©æˆ‘ä»¬æŠ“ä½äº†ä¸€ä¸ªé”™è¯¯ï¼Ÿ&lt;/em&gt;â€ å¦‚æœæ²¡æœ‰ï¼Œè¯·å°†å…¶&lt;em&gt;å…³é—­&lt;/em&gt;ã€‚(ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨æ²¡æœ‰æ ·å¼è§„åˆ™çš„&lt;a href=&quot;https://www.npmjs.com/package/eslint-config-react-app&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;eslint-config- response -app&lt;/a&gt;ä»å¤´å¼€å§‹ã€‚)&lt;/p&gt;
&lt;p&gt;è‡³å°‘ï¼Œä½ çš„å›¢é˜Ÿåº”è¯¥æœ‰ä¸€ä¸ªæ¶ˆé™¤å¯¼è‡´æ‘©æ“¦çš„è§„åˆ™çš„è¿‡ç¨‹ã€‚ä¸è¦ä»¥ä¸ºä¸€å¹´å‰ä½ æˆ–åˆ«äººæ·»åŠ åˆ°ä½ çš„linté…ç½®ä¸­çš„ä»»ä½•ä¸œè¥¿éƒ½æ˜¯â€œæœ€ä½³å®è·µâ€ã€‚æé—®å¹¶å¯»æ‰¾ç­”æ¡ˆã€‚ä¸è¦è®©ä»»ä½•äººå‘Šè¯‰ä½ ä½ ä¸å¤Ÿèªæ˜ï¼Œä»¥è‡³äºä¸èƒ½é€‰æ‹©ä½ çš„lintè§„åˆ™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä½†æ ¼å¼å‘¢ï¼Ÿ&lt;/strong&gt; ä½¿ç”¨&lt;a href=&quot;https://prettier.io/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Prettier&lt;/a&gt;å¹¶å¿˜è®°â€œé£æ ¼â€ã€‚å¦‚æœå¦ä¸€ä¸ªå·¥å…·å¯ä»¥ä¸ºä½ ä¿®å¤ç©ºé—´ï¼Œä½ ä¸éœ€è¦ä¸€ä¸ªå·¥å…·æ¥å¯¹ä½ å¤§å–Šå¤§å«ã€‚ä½¿ç”¨linteræŸ¥æ‰¾é”™è¯¯ï¼Œè€Œä¸æ˜¯å¼ºåˆ¶æ‰§è¡Œé”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼Œç¼–ç é£æ ¼çš„æŸäº›æ–¹é¢ä¸æ ¼å¼æ²¡æœ‰ç›´æ¥å…³ç³»ï¼Œä½†å½“æ•´ä¸ªé¡¹ç›®ä¸ä¸€è‡´æ—¶ï¼Œä»ç„¶ä¼šä»¤äººè®¨åŒã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œå®ƒä»¬ä¸­çš„è®¸å¤šéƒ½å¤ªå¾®å¦™äº†ï¼Œæ— æ³•ç”¨lintè§„åˆ™æ•æ‰ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨å›¢é˜Ÿæˆå‘˜ä¹‹é—´ &lt;strong&gt;å»ºç«‹ä¿¡ä»»&lt;/strong&gt; ä»¥åŠä»¥wikié¡µé¢æˆ–ç®€çŸ­è®¾è®¡æŒ‡å—çš„å½¢å¼åˆ†äº«æœ‰ç”¨çš„çŸ¥è¯†éå¸¸é‡è¦çš„åŸå› ã€‚&lt;/p&gt;
&lt;p&gt;å¹¶éä¸€åˆ‡éƒ½å€¼å¾—è‡ªåŠ¨åŒ–ï¼ä» &lt;em&gt;å®é™…é˜…è¯»&lt;/em&gt; è¿™ç§æŒ‡å—çš„åŸºæœ¬åŸç†ä¸­è·å¾—çš„è§è§£å¯èƒ½æ¯”éµå¾ªâ€œè§„åˆ™â€æ›´æœ‰ä»·å€¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä½†å¦‚æœéµå¾ªä¸¥æ ¼çš„é£æ ¼æŒ‡å—ä¼šåˆ†æ•£æ³¨æ„åŠ›ï¼Œé‚£ä¹ˆä»€ä¹ˆæ‰æ˜¯çœŸæ­£é‡è¦çš„å‘¢?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯è¿™ç¯‡æ–‡ç« çš„ä¸»é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç¼–å†™å¼¹æ€§ç»„ä»¶-1&quot;&gt;&lt;a href=&quot;#%E7%BC%96%E5%86%99%E5%BC%B9%E6%80%A7%E7%BB%84%E4%BB%B6-1&quot; aria-label=&quot;ç¼–å†™å¼¹æ€§ç»„ä»¶ 1 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ç¼–å†™å¼¹æ€§ç»„ä»¶&lt;/h2&gt;
&lt;p&gt;å†å¤šçš„ç¼©è¿›æˆ–æŒ‰å­—æ¯é¡ºåºå¯¹å¯¼å…¥è¿›è¡Œæ’åºä¹Ÿæ— æ³•ä¿®å¤ç ´æŸçš„è®¾è®¡ã€‚å› æ­¤ï¼Œæˆ‘ä¸ä¼šå…³æ³¨æŸäº›ä»£ç çš„å¤–è§‚ï¼Œè€Œæ˜¯å…³æ³¨å®ƒçš„&lt;em&gt;å·¥ä½œåŸç†&lt;/em&gt;ã€‚æˆ‘å‘ç°æœ‰ä¸€äº›ç»„ä»¶è®¾è®¡åŸåˆ™éå¸¸æœ‰ç”¨ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%8E%9F%E5%88%991%E4%B8%8D%E8%A6%81%E5%81%9C%E6%AD%A2%E6%95%B0%E6%8D%AE%E6%B5%81&quot;&gt;ä¸è¦åœæ­¢æ•°æ®æµ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%8E%9F%E5%88%992%E5%A7%8B%E7%BB%88%E5%87%86%E5%A4%87%E5%A5%BD%E6%B8%B2%E6%9F%93&quot;&gt;å§‹ç»ˆå‡†å¤‡æ¸²æŸ“&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%8E%9F%E5%88%993%E6%B2%A1%E6%9C%89%E7%BB%84%E4%BB%B6%E6%98%AF%E5%8D%95%E4%BE%8B%E7%9A%84&quot;&gt;æ²¡æœ‰ç»„ä»¶æ˜¯å•ä¾‹çš„&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%8E%9F%E5%88%994%E4%BF%9D%E6%8C%81%E6%9C%AC%E5%9C%B0%E7%8A%B6%E6%80%81%E9%9A%94%E7%A6%BB&quot;&gt;ä¿æŒæœ¬åœ°çŠ¶æ€éš”ç¦»&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å³ä½¿ä½ ä¸ä½¿ç”¨Reactï¼Œä½ ä¹Ÿå¯èƒ½é€šè¿‡åå¤è¯•éªŒå‘ç°ä»»ä½•å…·æœ‰å•å‘æ•°æ®æµçš„UIç»„ä»¶æ¨¡å‹éƒ½éµå¾ªç›¸åŒçš„åŸåˆ™ã€‚&lt;/p&gt;
&lt;h2 id=&quot;åŸåˆ™1ï¼šä¸è¦åœæ­¢æ•°æ®æµ&quot;&gt;&lt;a href=&quot;#%E5%8E%9F%E5%88%991%EF%BC%9A%E4%B8%8D%E8%A6%81%E5%81%9C%E6%AD%A2%E6%95%B0%E6%8D%AE%E6%B5%81&quot; aria-label=&quot;åŸåˆ™1ï¼šä¸è¦åœæ­¢æ•°æ®æµ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;åŸåˆ™1ï¼šä¸è¦åœæ­¢æ•°æ®æµ&lt;/h2&gt;
&lt;h3 id=&quot;ä¸è¦åœ¨æ¸²æŸ“ä¸­åœæ­¢æ•°æ®æµ&quot;&gt;&lt;a href=&quot;#%E4%B8%8D%E8%A6%81%E5%9C%A8%E6%B8%B2%E6%9F%93%E4%B8%AD%E5%81%9C%E6%AD%A2%E6%95%B0%E6%8D%AE%E6%B5%81&quot; aria-label=&quot;ä¸è¦åœ¨æ¸²æŸ“ä¸­åœæ­¢æ•°æ®æµ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ä¸è¦åœ¨æ¸²æŸ“ä¸­åœæ­¢æ•°æ®æµ&lt;/h3&gt;
&lt;p&gt;å½“æœ‰äººä½¿ç”¨ä½ çš„ç»„ä»¶æ—¶ï¼Œä»–ä»¬å¸Œæœ›å¯ä»¥éšç€æ—¶é—´çš„æ¨ç§»ä¼ é€’ä¸åŒçš„propsï¼Œå¹¶ä¸”è¯¥ç»„ä»¶å°†åæ˜ è¿™äº›æ›´æ”¹ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// isOkå¯èƒ½ç”±çŠ¶æ€é©±åŠ¨ï¼Œå¯ä»¥éšæ—¶æ”¹å˜&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;isOk &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;blue&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;red&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;é€šå¸¸ï¼Œè¿™æ˜¯Reacté»˜è®¤å·¥ä½œçš„æ–¹å¼ã€‚å¦‚æœåœ¨&lt;code class=&quot;language-text&quot;&gt;Button&lt;/code&gt;ç»„ä»¶ä¸­ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;color&lt;/code&gt; propï¼Œä½ å°†çœ‹åˆ°ä¸Šé¢ä¸ºè¯¥æ¸²æŸ“æä¾›çš„å€¼ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; color&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; children &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// âœ… `color` is always fresh!&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Button-&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; color&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œå­¦ä¹ Reactæ—¶å¸¸è§çš„é”™è¯¯æ˜¯å°†propså¤åˆ¶åˆ°çŠ¶æ€ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Button&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    color&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color &lt;span class=&quot;token comment&quot;&gt;//è¿™é‡Œ&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; color &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// ğŸ”´ `color` is stale!&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Button-&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; color&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¦‚æœä½ ä½¿ç”¨Reactä¹‹å¤–çš„ç±»ï¼Œä¹ä¸€çœ‹è¿™ä¼¼ä¹æ›´ç›´è§‚ã€‚&lt;strong&gt;ä½†æ˜¯ï¼Œé€šè¿‡å°†propå¤åˆ¶åˆ°çŠ¶æ€ï¼Œä½ å¿½ç•¥äº†å¯¹å®ƒçš„æ‰€æœ‰æ›´æ–°ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// ğŸ”´ ä¸å†é€‚ç”¨äºä¸Šè¿°å®ç°çš„æ›´æ–°&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;isOk &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;blue&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;red&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œè¿™ç§è¡Œä¸ºæ˜¯æ•…æ„çš„ï¼Œè¯·ç¡®ä¿è°ƒç”¨è¯¥prop&lt;code class=&quot;language-text&quot;&gt;initialColor&lt;/code&gt;æˆ–&lt;code class=&quot;language-text&quot;&gt;defaultColor&lt;/code&gt;ï¼Œä»¥æ¾„æ¸…å¯¹å®ƒçš„æ›´æ”¹å°†è¢«å¿½ç•¥ã€‚&lt;/p&gt;
&lt;p&gt;ä½†é€šå¸¸ä½ ä¼šæƒ³ &lt;strong&gt;ç›´æ¥åœ¨ä½ çš„ç»„ä»¶ä¸­è¯»å–props&lt;/strong&gt; ï¼Œå¹¶é¿å…å°†propsï¼ˆæˆ–ä»propsè®¡ç®—çš„ä»»ä½•ä¸œè¥¿ï¼‰å¤åˆ¶åˆ°çŠ¶æ€ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; color&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; children &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// âœ… `color` is always fresh!&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Button-&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; color&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;
&lt;p&gt;è®¡ç®—å€¼æ˜¯äººä»¬æœ‰æ—¶å°è¯•å°†propså¤åˆ¶åˆ°å·çš„å¦ä¸€ä¸ªåŸå› ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬ä»¥èƒŒæ™¯&lt;code class=&quot;language-text&quot;&gt;color&lt;/code&gt;ä¸ºå‚æ•°ï¼Œé€šè¿‡ä»£ä»·é«˜æ˜‚çš„è®¡ç®—æ¥ç¡®å®š &lt;em&gt;æŒ‰é’®æ–‡æœ¬&lt;/em&gt; çš„é¢œè‰²:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Button&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    textColor&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;slowlyCalculateTextColor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos;Button-&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos; Button-text-&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;textColor &lt;span class=&quot;token comment&quot;&gt;// ğŸ”´ Stale on `color` prop updates&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™ä¸ªç»„ä»¶æœ‰é—®é¢˜ï¼Œå› ä¸ºå®ƒä¸ä¼šåœ¨&lt;code class=&quot;language-text&quot;&gt;color&lt;/code&gt; prop æ›´æ”¹æ—¶é‡æ–°è®¡ç®—&lt;code class=&quot;language-text&quot;&gt;this.state.textColor&lt;/code&gt;ã€‚æœ€ç®€å•çš„è§£å†³æ–¹æ³•æ˜¯å°†&lt;code class=&quot;language-text&quot;&gt;textColor&lt;/code&gt;è®¡ç®—ç§»åŠ¨åˆ°&lt;code class=&quot;language-text&quot;&gt;render&lt;/code&gt;æ–¹æ³•ä¸­ï¼Œå¹¶å°†å…¶è®¾ä¸º&lt;code class=&quot;language-text&quot;&gt;PureComponent&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Button&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PureComponent&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; textColor &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;slowlyCalculateTextColor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos;Button-&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos; Button-text-&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; textColor &lt;span class=&quot;token comment&quot;&gt;// âœ… Always fresh&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;é—®é¢˜è§£å†³äº†ï¼ç°åœ¨å¦‚æœpropsæ”¹å˜äº†ï¼Œæˆ‘ä»¬å°†é‡æ–°è®¡ç®—&lt;code class=&quot;language-text&quot;&gt;textColor&lt;/code&gt;ï¼Œä½†æˆ‘ä»¬é¿å…åœ¨ç›¸åŒçš„é“å…·ä¸Šè¿›è¡Œæ˜‚è´µçš„è®¡ç®—ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›è¿›ä¸€æ­¥ä¼˜åŒ–å®ƒã€‚å¦‚æœæ”¹å˜äº†&lt;code class=&quot;language-text&quot;&gt;children&lt;/code&gt; propæ€ä¹ˆåŠï¼Ÿåœ¨è¿™ç§æƒ…å†µä¸‹é‡æ–°è®¡ç®—&lt;code class=&quot;language-text&quot;&gt;textColor&lt;/code&gt;ä¼¼ä¹å¾ˆä¸å¥½ã€‚æˆ‘ä»¬çš„ç¬¬äºŒä¸ªå°è¯•å¯èƒ½æ˜¯è°ƒç”¨&lt;code class=&quot;language-text&quot;&gt;componentDidUpdate&lt;/code&gt;ä¸­çš„è®¡ç®—:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Button&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    textColor&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;slowlyCalculateTextColor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;componentDidUpdate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prevProps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prevProps&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// ğŸ˜” Extra re-render for every update&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        textColor&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;slowlyCalculateTextColor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos;Button-&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos; Button-text-&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;textColor &lt;span class=&quot;token comment&quot;&gt;// âœ… Fresh on final render&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç„¶è€Œï¼Œè¿™å°†æ„å‘³ç€æˆ‘ä»¬çš„ç»„ä»¶åœ¨æ¯æ¬¡æ›´æ”¹åéƒ½ä¼šé‡æ–°å‘ˆç°ã€‚å¦‚æœæˆ‘ä»¬è¦ä¼˜åŒ–å®ƒï¼Œè¿™ä¹Ÿä¸ç†æƒ³ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥ä½¿ç”¨æ—§ç‰ˆ&lt;code class=&quot;language-text&quot;&gt;componentWillReceiveProps&lt;/code&gt;ç”Ÿå‘½å‘¨æœŸã€‚ç„¶è€Œï¼Œäººä»¬ç»å¸¸æŠŠå‰¯ä½œç”¨ä¹Ÿæ”¾åœ¨é‚£é‡Œã€‚è¿™åè¿‡æ¥åˆä¼šç»™å³å°†åˆ°æ¥çš„å¹¶å‘å‘ˆç°ç‰¹æ€§å¸¦æ¥é—®é¢˜ï¼Œæ¯”å¦‚&lt;a href=&quot;https://reactjs.org/blog/2018/03/01/sneak-peek-beyond-react-16.html&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;æ—¶é—´åˆ‡ç‰‡å’ŒSuspense&lt;/a&gt;ã€‚è€Œâ€œæ›´å®‰å…¨â€çš„&lt;code class=&quot;language-text&quot;&gt;getDerivedStateFromProps&lt;/code&gt;æ–¹æ³•å¾ˆç¬¨é‡ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬é€€ä¸€æ­¥å§ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬æƒ³è¦&lt;a href=&quot;https://en.wikipedia.org/wiki/Memoization&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;&lt;em&gt;memoization&lt;/em&gt;&lt;/a&gt;ã€‚æˆ‘ä»¬æœ‰ä¸€äº›è¾“å…¥ï¼Œé™¤éè¾“å…¥å‘ç”Ÿå˜åŒ–ï¼Œå¦åˆ™æˆ‘ä»¬ä¸æƒ³é‡æ–°è®¡ç®—è¾“å‡ºã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ç±»ï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;a href=&quot;https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#what-about-memoization&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;å¸®åŠ©&lt;/a&gt;ç¨‹åºè¿›è¡Œè®°å¿†ã€‚ä½†æ˜¯ï¼ŒHooksæ›´è¿›äº†ä¸€æ­¥ï¼Œä¸ºä½ æä¾›äº†ä¸€ç§å†…ç½®æ–¹æ³•å»è®°å¿†æ˜‚è´µçš„è®¡ç®—ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; color&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; children &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; textColor &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useMemo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;slowlyCalculateTextColor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;color&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;color&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// âœ… Donâ€™t recalculate until `color` changes&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Button-&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; color &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos; Button-text-&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; textColor&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™å°±æ˜¯ä½ éœ€è¦çš„æ‰€æœ‰ä»£ç ï¼&lt;/p&gt;
&lt;p&gt;åœ¨ç±»çš„ç»„ä»¶ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;a href=&quot;https://github.com/alexreardon/memoize-one&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;memoize-one&lt;/code&gt;&lt;/a&gt;ä¹‹ç±»çš„å¸®åŠ©ç¨‹åºã€‚åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œ&lt;code class=&quot;language-text&quot;&gt;useMemo&lt;/code&gt; Hookä¸ºä½ æä¾›ç±»ä¼¼çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬çœ‹åˆ°ï¼Œ&lt;strong&gt;å³ä½¿ä¼˜åŒ–æ˜‚è´µçš„è®¡ç®—ï¼Œä¹Ÿä¸æ˜¯å°†propså¤åˆ¶åˆ°çŠ¶æ€çš„å¥½ç†ç”±ã€‚&lt;/strong&gt; æˆ‘ä»¬çš„æ¸²æŸ“ç»“æœåº”è¯¥éµå®ˆpropsçš„å˜åŒ–ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;ä¸è¦åœ¨å‰¯ä½œç”¨ä¸­åœæ­¢æ•°æ®æµ&quot;&gt;&lt;a href=&quot;#%E4%B8%8D%E8%A6%81%E5%9C%A8%E5%89%AF%E4%BD%9C%E7%94%A8%E4%B8%AD%E5%81%9C%E6%AD%A2%E6%95%B0%E6%8D%AE%E6%B5%81&quot; aria-label=&quot;ä¸è¦åœ¨å‰¯ä½œç”¨ä¸­åœæ­¢æ•°æ®æµ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ä¸è¦åœ¨å‰¯ä½œç”¨ä¸­åœæ­¢æ•°æ®æµ&lt;/h3&gt;
&lt;p&gt;åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»è®¨è®ºè¿‡å¦‚ä½•ä½¿æ¸²æŸ“ç»“æœä¸propså˜åŒ–ä¿æŒä¸€è‡´ã€‚é¿å…å°†é“å…·å¤åˆ¶åˆ°çŠ¶æ€æ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚ä½†æ˜¯ï¼Œé‡è¦çš„æ˜¯ &lt;strong&gt;å‰¯ä½œç”¨ï¼ˆä¾‹å¦‚æ•°æ®æå–ï¼‰ä¹Ÿæ˜¯æ•°æ®æµçš„ä¸€éƒ¨åˆ†ã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;è€ƒè™‘ä¸€ä¸‹è¿™ä¸ªReactç»„ä»¶ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SearchResults&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;componentDidMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;fetchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Do the fetching...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;http://myapi/results?query&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¾ˆå¤šReactç»„ä»¶éƒ½æ˜¯è¿™æ ·çš„ - ä½†å¦‚æœæˆ‘ä»¬çœ‹å¾—æ›´ç»†ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä¼šå‘ç°ä¸€ä¸ªbugã€‚&lt;code class=&quot;language-text&quot;&gt;fetchResults&lt;/code&gt;æ–¹æ³•ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;query&lt;/code&gt;propæ¥è·å–æ•°æ®ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;http://myapi/results?query&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä½†æ˜¯å¦‚æœ&lt;code class=&quot;language-text&quot;&gt;query&lt;/code&gt; propå‘ç”Ÿäº†å˜åŒ–å‘¢ï¼Ÿåœ¨æˆ‘ä»¬çš„ç»„ä»¶ä¸­ï¼Œä»€ä¹ˆéƒ½ä¸ä¼šå‘ç”Ÿã€‚&lt;strong&gt;è¿™æ„å‘³ç€æˆ‘ä»¬ç»„ä»¶çš„å‰¯ä½œç”¨ä¸ä¼šéµå®ˆå…¶propsçš„å˜åŒ–ã€‚&lt;/strong&gt; è¿™æ˜¯Reactåº”ç”¨ç¨‹åºä¸­éå¸¸å¸¸è§çš„é”™è¯¯æ¥æºã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ä¿®å¤æˆ‘ä»¬çš„ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æŸ¥çœ‹&lt;code class=&quot;language-text&quot;&gt;componentDidMount&lt;/code&gt;ä»¥åŠä»ä¸­è°ƒç”¨çš„æ¯ä¸ªæ–¹æ³•ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œæ˜¯&lt;code class=&quot;language-text&quot;&gt;fetchResults&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;getFetchUrl&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è®°ä¸‹è¿™äº›æ–¹æ³•ä½¿ç”¨çš„æ‰€æœ‰propså’ŒçŠ¶æ€ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œè¿™å°±æ˜¯&lt;code class=&quot;language-text&quot;&gt;this.props.query&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¡®ä¿æ¯å½“propsæ”¹å˜æ—¶ï¼Œæˆ‘ä»¬é‡æ–°è¿è¡Œå‰¯ä½œç”¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ &lt;code class=&quot;language-text&quot;&gt;componentDidUpdate&lt;/code&gt;æ–¹æ³•æ¥å®ç°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SearchResults&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;componentDidMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;componentDidUpdate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prevProps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prevProps&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;query &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// âœ… Refetch on change&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;fetchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Do the fetching...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;http://myapi/results?query&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// âœ… Updates are handled&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬çš„ä»£ç éµå®ˆ props çš„æ‰€æœ‰å˜åŒ–ï¼Œç”šè‡³æ˜¯å‰¯ä½œç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œ, è®°ä½ä¸è¦å†æ‰“ç ´å®ƒæ˜¯å¾ˆå…·æœ‰æŒ‘æˆ˜æ€§çš„ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°†&lt;code class=&quot;language-text&quot;&gt;currentPage&lt;/code&gt;æ·»åŠ åˆ°æœ¬åœ°çŠ¶æ€ï¼Œå¹¶åœ¨&lt;code class=&quot;language-text&quot;&gt;getFetchUrl&lt;/code&gt;ä¸­ä½¿ç”¨å®ƒï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SearchResults&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    currentPage&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;componentDidMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;componentDidUpdate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prevProps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prevProps&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;query &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;fetchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Do the fetching...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token string&quot;&gt;&apos;http://myapi/results?query&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;query &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
      &lt;span class=&quot;token string&quot;&gt;&apos;&amp;amp;page=&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;currentPage &lt;span class=&quot;token comment&quot;&gt;// ğŸ”´ Updates are ignored&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å”‰ï¼Œæˆ‘ä»¬çš„ä»£ç å†æ¬¡å‡ºé”™ï¼Œå› ä¸ºæˆ‘ä»¬çš„å‰¯ä½œç”¨ä¸éµå®ˆå¯¹&lt;code class=&quot;language-text&quot;&gt;currentPage&lt;/code&gt;çš„æ›´æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;propså’ŒçŠ¶æ€æ˜¯Reactæ•°æ®æµçš„ä¸€éƒ¨åˆ†ã€‚æ¸²æŸ“å’Œå‰¯ä½œç”¨éƒ½åº”è¯¥åæ˜ æ•°æ®æµçš„å˜åŒ–ï¼Œè€Œä¸æ˜¯å¿½ç•¥å®ƒä»¬ï¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¦ä¿®å¤æˆ‘ä»¬çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥é‡å¤ä¸Šè¿°æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æŸ¥çœ‹&lt;code class=&quot;language-text&quot;&gt;componentDidMount&lt;/code&gt;ä»¥åŠä»ä¸­è°ƒç”¨çš„æ¯ä¸ªæ–¹æ³•ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œæ˜¯&lt;code class=&quot;language-text&quot;&gt;fetchResults&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;getFetchUrl&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è®°ä¸‹è¿™äº›æ–¹æ³•ä½¿ç”¨çš„æ‰€æœ‰propså’ŒçŠ¶æ€ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œè¿™å°±æ˜¯&lt;code class=&quot;language-text&quot;&gt;this.props.query&lt;/code&gt; &lt;strong&gt;å’Œ &lt;code class=&quot;language-text&quot;&gt;this.state.currentPage&lt;/code&gt;&lt;/strong&gt; ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¡®ä¿æ¯å½“propsæ”¹å˜æ—¶ï¼Œæˆ‘ä»¬é‡æ–°è¿è¡Œå‰¯ä½œç”¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ &lt;code class=&quot;language-text&quot;&gt;componentDidUpdate&lt;/code&gt;æ–¹æ³•æ¥å®ç°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è®©æˆ‘ä»¬ä¿®å¤æˆ‘ä»¬çš„ç»„ä»¶æ¥å¤„ç†&lt;code class=&quot;language-text&quot;&gt;currentPage&lt;/code&gt;çŠ¶æ€çš„æ›´æ–°ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SearchResults&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    currentPage&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;componentDidMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;componentDidUpdate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prevProps&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; prevState&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      prevState&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;currentPage &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;currentPage &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// âœ… Refetch on change&lt;/span&gt;
      prevProps&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;query &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;query
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;fetchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Do the fetching...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token string&quot;&gt;&apos;http://myapi/results?query&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;query &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
      &lt;span class=&quot;token string&quot;&gt;&apos;&amp;amp;page=&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;currentPage &lt;span class=&quot;token comment&quot;&gt;// âœ… Updates are handled&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;å¦‚æœæˆ‘ä»¬èƒ½ä»¥æŸç§æ–¹å¼è‡ªåŠ¨æ•æ‰è¿™äº›é”™è¯¯ï¼Œé‚£ä¸æ˜¯å¾ˆå¥½å—ï¼Ÿ&lt;/strong&gt; è¿™ä¸æ˜¯linterèƒ½å¸®æˆ‘ä»¬çš„å—?&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ä¸å¹¸çš„æ˜¯ï¼Œè‡ªåŠ¨æ£€æŸ¥ç±»ç»„ä»¶çš„ä¸€è‡´æ€§å¤ªå›°éš¾äº†ã€‚ä»»ä½•æ–¹æ³•éƒ½å¯ä»¥è°ƒç”¨ä»»ä½•å…¶ä»–æ–¹æ³•ã€‚é™æ€åœ°åˆ†ææ¥è‡ª&lt;code class=&quot;language-text&quot;&gt;componentDidMount&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;componentDidUpdate&lt;/code&gt;çš„è°ƒç”¨å……æ»¡äº†è¯¯æŠ¥ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œ&lt;em&gt;å¯ä»¥&lt;/em&gt; è®¾è®¡ä¸€ä¸ªå¯ä»¥é™æ€åˆ†æä¸€è‡´æ€§çš„APIã€‚&lt;a href=&quot;https://overreacted.io/a-complete-guide-to-useeffect/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;React &lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt; Hook&lt;/a&gt;å°±æ˜¯è¿™æ ·ä¸€ä¸ªAPIçš„ä¸€ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SearchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; query &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setData&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;currentPage&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setCurrentPage&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// Do the fetching...&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getFetchUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos;http://myapi/results?query&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; query &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos;&amp;amp;page=&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; currentPage
      &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;fetchResults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;currentPage&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// âœ… Refetch on change&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬å°†é€»è¾‘æ”¾åœ¨æ•ˆæœ(effect)ä¸­ï¼Œè¿™æ ·å¯ä»¥æ›´å®¹æ˜“åœ°çœ‹åˆ°å®ƒä¾èµ–çš„&lt;em&gt;Reactæ•°æ®æµä¸­çš„å“ªäº›å€¼&lt;/em&gt; ã€‚è¿™äº›å€¼ç§°ä¸ºâ€œä¾èµ–é¡¹â€ï¼Œåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­å®ƒä»¬æ˜¯&lt;code class=&quot;language-text&quot;&gt;[currentPage, query]&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼Œè¿™ä¸ªâ€œæ•ˆæœä¾èµ–é¡¹â€æ•°ç»„å®é™…ä¸Šå¹¶ä¸æ˜¯ä¸€ä¸ªæ–°æ¦‚å¿µã€‚åœ¨ç±»ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»é€šè¿‡æ‰€æœ‰æ–¹æ³•è°ƒç”¨æœç´¢è¿™äº›â€œä¾èµ–é¡¹â€ã€‚&lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt; APIåªæ˜¯æ˜ç¡®äº†ç›¸åŒçš„æ¦‚å¿µã€‚&lt;/p&gt;
&lt;p&gt;åè¿‡æ¥ï¼Œè¿™å¯ä»¥è®©æˆ‘ä»¬è‡ªåŠ¨éªŒè¯å®ƒä»¬ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://overreacted.io/useeffect-bc7a074c528f3b0be1b7e509b6a8683b.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;(è¿™æ˜¯&lt;em&gt;ä¸€ä¸ªæ–°æ¨èçš„&lt;code class=&quot;language-text&quot;&gt;exhaustive-deps&lt;/code&gt; lintè§„åˆ™çš„æ¼”ç¤ºï¼Œå®ƒæ˜¯&lt;code class=&quot;language-text&quot;&gt;eslint-plugin-react-hooks&lt;/code&gt;çš„ä¸€éƒ¨åˆ†&lt;/em&gt;ã€‚å®ƒå¾ˆå¿«å°†åŒ…å«åœ¨&lt;em&gt;Create React App&lt;/em&gt;ä¸­ã€‚)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¯·æ³¨æ„ï¼Œæ— è®ºæ˜¯å°†ç»„ä»¶ç¼–å†™ä¸ºç±»è¿˜æ˜¯å‡½æ•°ï¼Œéƒ½å¿…é¡»éµå®ˆæ•ˆæœçš„æ‰€æœ‰propå’Œstateæ›´æ–°ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ç±»APIï¼Œä½ å¿…é¡»è‡ªå·±è€ƒè™‘ä¸€è‡´æ€§ï¼Œå¹¶éªŒè¯&lt;code class=&quot;language-text&quot;&gt;componentDidUpdate&lt;/code&gt;æ˜¯å¦å¤„ç†å¯¹æ¯ä¸ªç›¸å…³propæˆ–stateçš„æ›´æ”¹ã€‚å¦åˆ™ï¼Œä½ çš„ç»„ä»¶å¯¹propå’ŒçŠ¶æ€æ›´æ”¹ä¸å…·æœ‰å¼¹æ€§ã€‚è¿™ç”šè‡³ä¸æ˜¯ç‰¹å®šäºReactçš„é—®é¢˜ã€‚å®ƒé€‚ç”¨äºä»»ä½•å…è®¸ä½ å•ç‹¬å¤„ç†â€œåˆ›å»ºâ€å’Œâ€œæ›´æ–°â€çš„UIåº“ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;useeffect&lt;/code&gt; APIé€šè¿‡é¼“åŠ±ä¸€è‡´æ€§æ¥ç¿»è½¬é»˜è®¤å€¼ã€‚&lt;/strong&gt; &lt;a href=&quot;https://overreacted.io/a-complete-guide-to-useeffect/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ä¸€å¼€å§‹å¯èƒ½ä¼šæ„Ÿåˆ°é™Œç”Ÿ&lt;/a&gt;ï¼Œä½†ç»“æœæ˜¯ä½ çš„ç»„ä»¶å¯¹é€»è¾‘æ›´æ”¹æ›´å…·å¼¹æ€§ã€‚ç”±äºâ€œä¾èµ–å…³ç³»â€ç°åœ¨æ˜¯æ˜ç¡®çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨lintè§„åˆ™éªŒè¯æ•ˆæœæ˜¯å¦ä¸€è‡´ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªlinteræ¥æ•è·bugï¼&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;ä¸è¦åœ¨ä¼˜åŒ–ä¸­åœæ­¢æ•°æ®æµ&quot;&gt;&lt;a href=&quot;#%E4%B8%8D%E8%A6%81%E5%9C%A8%E4%BC%98%E5%8C%96%E4%B8%AD%E5%81%9C%E6%AD%A2%E6%95%B0%E6%8D%AE%E6%B5%81&quot; aria-label=&quot;ä¸è¦åœ¨ä¼˜åŒ–ä¸­åœæ­¢æ•°æ®æµ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ä¸è¦åœ¨ä¼˜åŒ–ä¸­åœæ­¢æ•°æ®æµ&lt;/h3&gt;
&lt;p&gt;è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œä½ å¯èƒ½ä¼šæ„å¤–åœ°å¿½ç•¥å¯¹propsçš„æ›´æ”¹ã€‚å½“ä½ æ‰‹åŠ¨ä¼˜åŒ–ç»„ä»¶æ—¶ï¼Œå¯èƒ½ä¼šå‘ç”Ÿæ­¤é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;sè¯·æ³¨æ„ï¼Œä½¿ç”¨ç±»ä¼¼&lt;code class=&quot;language-text&quot;&gt;pureComponent&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;react.memo&lt;/code&gt;è¿™æ ·çš„æµ…æ¯”è¾ƒçš„ä¼˜åŒ–æ–¹æ³•ä½œä¸ºé»˜è®¤æ¯”è¾ƒæ˜¯å®‰å…¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä½†æ˜¯ï¼Œå¦‚æœä½ å°è¯•é€šè¿‡ç¼–å†™è‡ªå·±çš„æ¯”è¾ƒæ¥â€œä¼˜åŒ–â€ç»„ä»¶ï¼Œåˆ™å¯èƒ½ä¼šé”™è¯¯åœ°å¿˜è®°æ¯”è¾ƒå‡½æ•°propsï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Button&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;shouldComponentUpdate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prevProps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ğŸ”´ Doesn&apos;t compare this.props.onClick &lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; prevProps&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; onClick &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;onClick&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// ğŸ”´ Doesn&apos;t reflect updates&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; textColor &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;slowlyCalculateTextColor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;onClick&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Button-&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos; Button-text-&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; textColor&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä¸€å¼€å§‹å¾ˆå®¹æ˜“å¿½ç•¥è¿™ä¸ªé”™è¯¯ï¼Œå› ä¸ºåœ¨ç±»ä¸­ï¼Œä½ é€šå¸¸ä¼šä¼ é€’ä¸€ä¸ª&lt;em&gt;æ–¹æ³•&lt;/em&gt;ï¼Œæ‰€ä»¥æ— è®ºå¦‚ä½•å®ƒéƒ½å…·æœ‰ç›¸åŒçš„æ ‡è¯†:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MyForm&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;handleClick&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// âœ… Always the same function&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Do something&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;Hello!&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;green&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;handleClick&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
          Press me
        &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;Button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬çš„ä¼˜åŒ–ä¸ä¼šç«‹å³ä¸­æ–­ã€‚ç„¶è€Œï¼Œå¦‚æœå®ƒéšç€æ—¶é—´çš„æ¨ç§»è€Œæ”¹å˜ï¼Œå®ƒå°†ç»§ç»­â€œçœ‹åˆ°â€æ—§çš„&lt;code class=&quot;language-text&quot;&gt;onClick&lt;/code&gt;å€¼ï¼Œä½†å…¶ä»–propsæ²¡æœ‰æ”¹å˜ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MyForm&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    isEnabled&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;handleClick&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; isEnabled&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Do something&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;Hello!&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;green&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token comment&quot;&gt;// ğŸ”´ Button ignores updates to the onClick prop&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isEnabled &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;handleClick &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;

          Press me
        &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;Button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå•å‡»è¯¥æŒ‰é’®åº”ç¦ç”¨å®ƒ - ä½†è¿™ä¸ä¼šå‘ç”Ÿï¼Œå› ä¸º&lt;code class=&quot;language-text&quot;&gt;Button&lt;/code&gt;ç»„ä»¶å¿½ç•¥å¯¹&lt;code class=&quot;language-text&quot;&gt;onClick&lt;/code&gt; propçš„ä»»ä½•æ›´æ–°ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœå‡½æ•°æ ‡è¯†æœ¬èº«ä¾èµ–äºå¯èƒ½éšæ—¶é—´å˜åŒ–çš„å†…å®¹ï¼Œä¾‹å¦‚æœ¬ç¤ºä¾‹ä¸­çš„&lt;code class=&quot;language-text&quot;&gt;draft.content&lt;/code&gt;ï¼Œåˆ™å¯èƒ½ä¼šæ›´åŠ æ··ä¹±ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;drafts&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;draft &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Button&lt;/span&gt;
      &lt;span class=&quot;token attr-name&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;blue&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token attr-name&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;draft&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token attr-name&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// ğŸ”´ Button ignores updates to the onClick prop&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;handlePublish&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; draft&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;content&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      Publish
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;Button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è™½ç„¶&lt;code class=&quot;language-text&quot;&gt;draft.content&lt;/code&gt;å¯èƒ½ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œå‘ç”Ÿå˜åŒ–ï¼Œä½†æˆ‘ä»¬çš„&lt;code class=&quot;language-text&quot;&gt;Button&lt;/code&gt;ç»„ä»¶å¿½ç•¥äº†å¯¹&lt;code class=&quot;language-text&quot;&gt;onClick&lt;/code&gt; propçš„æ›´æ”¹ï¼Œå› æ­¤å®ƒå°†ç»§ç»­çœ‹åˆ°&lt;code class=&quot;language-text&quot;&gt;onClick&lt;/code&gt;ç»‘å®šæ–¹æ³•çš„â€œç¬¬ä¸€ç‰ˆâ€å’ŒåŸå§‹&lt;code class=&quot;language-text&quot;&gt;draft.content&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•é¿å…è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘å»ºè®®é¿å…æ‰‹åŠ¨å®ç°&lt;code class=&quot;language-text&quot;&gt;shouldComponentUpdate&lt;/code&gt;å¹¶é¿å…æŒ‡å®š&lt;code class=&quot;language-text&quot;&gt;React.memo()&lt;/code&gt;çš„è‡ªå®šä¹‰æ¯”è¾ƒã€‚&lt;code class=&quot;language-text&quot;&gt;React.memo&lt;/code&gt;ä¸­çš„é»˜è®¤æµ…æ¯”è¾ƒå°†éµå®ˆæ›´æ”¹çš„å‡½æ•°æ ‡è¯†ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; onClick&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; color&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; children &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; textColor &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;slowlyCalculateTextColor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt;
      &lt;span class=&quot;token attr-name&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;onClick&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Button-&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; color &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos; Button-text-&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; textColor&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åœ¨ç±»ä¸­ï¼Œ&lt;code class=&quot;language-text&quot;&gt;PureComponent&lt;/code&gt;å…·æœ‰ç›¸åŒçš„è¡Œä¸ºã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç¡®ä¿äº†å°†ä¸åŒçš„å‡½æ•°ä½œä¸ºpropä¼ é€’å°†å§‹ç»ˆæœ‰æ•ˆã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ åšæŒè‡ªå®šä¹‰ä¸€ä¸ªæ¯”è¾ƒï¼Œ&lt;strong&gt;è¯·ç¡®ä¿ä½ ä¸è¦è·³è¿‡å‡½æ•°&lt;/strong&gt; ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token function&quot;&gt;shouldComponentUpdate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prevProps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// âœ… Compares this.props.onClick &lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; prevProps&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;onClick &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; prevProps&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;onClick
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ­£å¦‚æˆ‘å‰é¢æåˆ°çš„ï¼Œåœ¨ç±»ç»„ä»¶ä¸­å¾ˆå®¹æ˜“å¿½ç•¥è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºæ–¹æ³•æ ‡è¯†é€šå¸¸æ˜¯ç¨³å®šçš„(ä½†å¹¶ä¸æ€»æ˜¯ç¨³å®šçš„â€”â€”è¿™å°±æ˜¯bugå˜å¾—éš¾ä»¥è°ƒè¯•çš„åœ°æ–¹)ã€‚æœ‰äº†Hooksï¼Œæƒ…å†µæœ‰ç‚¹ä¸åŒï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ¯ä¸ªæ¸²æŸ“çš„å‡½æ•°éƒ½ä¸åŒï¼Œå› æ­¤ä½ å¯ä»¥&lt;a href=&quot;https://github.com/facebook/react/issues/14972#issuecomment-468280039&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ç«‹å³&lt;/a&gt;å‘ç°æ­¤é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;useCallback&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;useContext&lt;/code&gt;ï¼Œä½ å¯ä»¥&lt;a href=&quot;https://reactjs.org/docs/hooks-faq.html#how-to-avoid-passing-callbacks-down&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;å®Œå…¨é¿å…ä¼ é€’å‡½æ•°&lt;/a&gt;ã€‚è¿™ä½¿æ‚¨å¯ä»¥ä¼˜åŒ–æ¸²æŸ“è€Œæ— éœ€æ‹…å¿ƒå‡½æ•°ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;æ€»ç»“æœ¬èŠ‚ï¼Œ&lt;strong&gt;ä¸è¦åœæ­¢æ•°æ®æµï¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ— è®ºä½•æ—¶ä½¿ç”¨propså’ŒçŠ¶æ€ï¼Œè¯·è€ƒè™‘å¦‚æœå®ƒä»¬å‘ç”Ÿå˜åŒ–ä¼šå‘ç”Ÿä»€ä¹ˆã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç»„ä»¶ä¸åº”ä»¥ä¸åŒæ–¹å¼å¤„ç†åˆå§‹æ¸²æŸ“å’Œæ›´æ–°ã€‚è¿™ä½¿å®ƒèƒ½å¤Ÿé€‚åº”é€»è¾‘ä¸Šçš„å˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºç±»ï¼Œåœ¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­ä½¿ç”¨propså’Œstateæ—¶å¾ˆå®¹æ˜“å¿˜è®°æ›´æ–°ã€‚Hooksä¼šç£ä¿ƒä½ å»åšæ­£ç¡®çš„äº‹æƒ…â€”â€”ä½†æ˜¯å¦‚æœä½ è¿˜ä¸ä¹ æƒ¯è¿™æ ·åšçš„è¯ï¼Œå°±éœ€è¦ä¸€äº›å¿ƒç†ä¸Šçš„è°ƒæ•´ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;åŸåˆ™2ï¼šå§‹ç»ˆå‡†å¤‡å¥½æ¸²æŸ“&quot;&gt;&lt;a href=&quot;#%E5%8E%9F%E5%88%992%EF%BC%9A%E5%A7%8B%E7%BB%88%E5%87%86%E5%A4%87%E5%A5%BD%E6%B8%B2%E6%9F%93&quot; aria-label=&quot;åŸåˆ™2ï¼šå§‹ç»ˆå‡†å¤‡å¥½æ¸²æŸ“ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;åŸåˆ™2ï¼šå§‹ç»ˆå‡†å¤‡å¥½æ¸²æŸ“&lt;/h2&gt;
&lt;p&gt;Reactç»„ä»¶ä½¿ä½ å¯ä»¥ç¼–å†™æ¸²æŸ“ä»£ç è€Œæ— éœ€æ‹…å¿ƒèŠ±è´¹å¤ªå¤šæ—¶é—´ã€‚ä½ æè¿°äº†UIåœ¨ä»»ä½•ç»™å®šæ—¶åˆ» &lt;em&gt;åº”è¯¥&lt;/em&gt; å±•ç°çš„å¤–è§‚ï¼Œè€ŒReactä½¿å®ƒæˆä¸ºç°å®ã€‚å¥½å¥½åˆ©ç”¨å§ï¼&lt;/p&gt;
&lt;p&gt;ä¸è¦è¯•å›¾åœ¨ç»„ä»¶è¡Œä¸ºä¸­å¼•å…¥ä¸å¿…è¦çš„æ—¶é—´å‡è®¾ã€‚&lt;strong&gt;ä½ çš„ç»„ä»¶åº”è¯¥éšæ—¶å¯ä»¥é‡æ–°æ¸²æŸ“ã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;æ€æ ·æ‰èƒ½è¿åè¿™ä¸€åŸåˆ™ï¼ŸReactå¹¶ä¸å®¹æ˜“å®ç°ï¼Œä½†æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨é—ç•™ç»„ä»¶willReceivePropsç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ¥å®ç°ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TextInput&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    value&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ğŸ”´ Resets local state on every parent render&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;componentWillReceiveProps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nextProps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; nextProps&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;handleChange&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;onChange&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;handleChange&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†&lt;code class=&quot;language-text&quot;&gt;value&lt;/code&gt;ä¿å­˜åœ¨æœ¬åœ°çŠ¶æ€ï¼Œä½†æˆ‘ä»¬ä¹Ÿä»propsè·å¾—&lt;code class=&quot;language-text&quot;&gt;value&lt;/code&gt;ã€‚æ¯å½“æˆ‘ä»¬â€œæ”¶åˆ°æ–°propsâ€æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šé‡ç½®çŠ¶æ€å†…çš„&lt;code class=&quot;language-text&quot;&gt;value&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¿™ç§æ¨¡å¼çš„é—®é¢˜åœ¨äºå®ƒå®Œå…¨ä¾èµ–äºå¶ç„¶çš„æ—¶é—´å®‰æ’ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¹Ÿè®¸ä»Šå¤©è¿™ä¸ªç»„ä»¶çš„çˆ¶ç»„ä»¶å¾ˆå°‘æ›´æ–°ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„&lt;code class=&quot;language-text&quot;&gt;TextInput&lt;/code&gt;åªåœ¨ä¸€äº›é‡è¦çš„äº‹æƒ…å‘ç”Ÿæ—¶â€œæ¥æ”¶propsâ€ï¼Œæ¯”å¦‚ä¿å­˜è¡¨å•ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯æ˜å¤©ä½ å¯èƒ½ä¼šå‘&lt;code class=&quot;language-text&quot;&gt;TextInput&lt;/code&gt;çš„çˆ¶çº§æ·»åŠ ä¸€äº›åŠ¨ç”»ã€‚å¦‚æœå®ƒçš„çˆ¶çº§ç»å¸¸é‡æ–°æ¸²æŸ“ï¼Œå®ƒå°†ç»§ç»­â€œ&lt;a href=&quot;https://codesandbox.io/s/m3w9zn1z8x&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;å¹èµ°&lt;/a&gt;â€å­çº§çŠ¶æ€ï¼ä½ å¯ä»¥åœ¨â€œ&lt;a href=&quot;https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ä½ å¯èƒ½ä¸éœ€è¦æ´¾ç”ŸçŠ¶æ€&lt;/a&gt;â€ä¸­é˜…è¯»æœ‰å…³æ­¤é—®é¢˜çš„æ›´å¤šä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é‚£æˆ‘ä»¬æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¿®å¤æˆ‘ä»¬çš„å¿ƒç†æ¨¡å‹ã€‚æˆ‘ä»¬éœ€è¦åœæ­¢å°†â€œæ¥æ”¶propsâ€è§†ä¸ºä¸â€œæ¸²æŸ“â€ä¸åŒçš„ä¸œè¥¿ã€‚ç”±çˆ¶çº§å¼•èµ·çš„é‡æ–°æ¸²æŸ“ä¸åº”ä¸ç”±æˆ‘ä»¬è‡ªå·±çš„æœ¬åœ°çŠ¶æ€æ›´æ”¹å¼•èµ·çš„é‡æ–°æ¸²æŸ“ä¸åŒã€‚&lt;strong&gt;ç»„ä»¶åº”è¯¥èƒ½å¤Ÿå¼¹æ€§çš„åœ°è¿›è¡Œè¾ƒå°‘æˆ–æ›´é¢‘ç¹çš„æ¸²æŸ“ï¼Œå› ä¸ºå¦åˆ™å®ƒä»¬ä¼šä¸ç‰¹å®šçš„çˆ¶å¯¹è±¡è¿‡åº¦è€¦åˆã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;(&lt;a href=&quot;https://codesandbox.io/s/m3w9zn1z8x&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;è¿™ä¸ªæ¼”ç¤º&lt;/a&gt;&lt;em&gt;å±•ç¤ºäº†é‡æ–°æ¸²æŸ“å¦‚ä½•ç ´åè„†å¼±çš„ç»„ä»¶&lt;/em&gt;ã€‚)&lt;/p&gt;
&lt;p&gt;å½“ä½ &lt;em&gt;çœŸæ­£&lt;/em&gt;æƒ³ä»propsä¸­æ´¾ç”ŸçŠ¶æ€æ—¶ï¼Œæœ‰å‡ ç§&lt;a href=&quot;https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#preferred-solutions&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ä¸åŒ&lt;/a&gt;çš„&lt;a href=&quot;https://reactjs.org/docs/hooks-faq.html#how-do-i-implement-getderivedstatefromprops&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;è§£å†³æ–¹æ¡ˆ&lt;/a&gt;ï¼Œé€šå¸¸ä½ åº”è¯¥ä½¿ç”¨å®Œå…¨å—æ§çš„ç»„ä»¶:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Option 1: Fully controlled component.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;TextInput&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; onChange &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt;
      &lt;span class=&quot;token attr-name&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token attr-name&quot;&gt;onChange&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;onChange&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æˆ–è€…ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªä¸å—æ§åˆ¶çš„ç»„ä»¶å’Œä¸€ä¸ªé”®æ¥é‡ç½®å®ƒ:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Option 2: Fully uncontrolled component.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;TextInput&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setValue&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt;
      &lt;span class=&quot;token attr-name&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token attr-name&quot;&gt;onChange&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;e &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// We can reset its internal state later by changing the key:&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;TextInput&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;formId&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æœ¬èŠ‚çš„å†…å®¹æ˜¯ï¼Œä½ çš„ç»„ä»¶ä¸åº”è¯¥å› ä¸ºå®ƒæˆ–å…¶çˆ¶çº§æ›´é¢‘ç¹åœ°é‡æ–°æ¸²æŸ“è€Œä¸­æ–­ã€‚å¦‚æœä½ é¿å…ä½¿ç”¨ä¼ ç»Ÿçš„&lt;code class=&quot;language-text&quot;&gt;componentWillReceiveProps&lt;/code&gt;ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œåˆ™React APIè®¾è®¡å¯ä»¥è½»æ¾å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;è¦å¯¹ç»„ä»¶è¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œå¯ä»¥å°†æ­¤ä»£ç ä¸´æ—¶æ·»åŠ åˆ°å…¶çˆ¶çº§ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token function&quot;&gt;componentDidMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// Don&apos;t forget to remove this immediately!&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;setInterval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forceUpdate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;ä¸è¦ç•™ä¸‹è¿™äº›ä»£ç &lt;/strong&gt;  - è¿™åªæ˜¯ä¸€ç§å¿«é€Ÿçš„æ–¹æ³•ï¼Œå¯ä»¥æ£€æŸ¥å½“çˆ¶çº§é‡æ–°æ¸²æŸ“çš„æ¬¡æ•°è¶…å‡ºé¢„æœŸæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚å®ƒä¸åº”è¯¥æ‰“ç ´å­çº§ï¼&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ä½ å¯èƒ½ä¼šæƒ³ï¼šâ€œæˆ‘ä¼šåœ¨propsæ”¹å˜æ—¶ç»§ç»­é‡ç½®çŠ¶æ€ï¼Œä½†ä¼šé˜»æ­¢ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;PureComponent&lt;/code&gt;è¿›è¡Œä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“â€ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ®µä»£ç åº”è¯¥æœ‰ç”¨ï¼Œå¯¹å§ï¼Ÿ&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// ğŸ¤” Should prevent unnecessary re-renders... right?&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TextInput&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PureComponent&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    value&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ğŸ”´ Resets local state on every parent render&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;componentWillReceiveProps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nextProps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; nextProps&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;handleChange&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;onChange&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;handleChange&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;èµ·åˆï¼Œçœ‹èµ·æ¥è¿™ä¸ªç»„ä»¶ä¼¼ä¹è§£å†³äº†åœ¨çˆ¶çº§é‡æ–°æ¸²æŸ“æ—¶â€œå¹èµ°â€çŠ¶æ€çš„é—®é¢˜ã€‚æ¯•ç«Ÿï¼Œå¦‚æœpropsæ˜¯ç›¸åŒçš„ï¼Œæˆ‘ä»¬åªæ˜¯è·³è¿‡æ›´æ–° - å› æ­¤ä¸ä¼šè°ƒç”¨&lt;code class=&quot;language-text&quot;&gt;componentWillReceiveProps&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œè¿™ç»™äº†æˆ‘ä»¬ä¸€ç§è™šå‡çš„å®‰å…¨æ„Ÿã€‚&lt;strong&gt;è¿™ä¸ªç»„ä»¶ä»ç„¶ä¸èƒ½é€‚åº”propæ”¹å˜ã€‚&lt;/strong&gt;  ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æ·»åŠ &lt;em&gt;å¦ä¸€ä¸ª&lt;/em&gt;ç»å¸¸å˜åŒ–çš„propï¼Œæ¯”å¦‚åŠ¨ç”»&lt;code class=&quot;language-text&quot;&gt;style&lt;/code&gt;ï¼Œæˆ‘ä»¬ä»ç„¶ä¼šâ€œä¸¢å¤±â€å†…éƒ¨çŠ¶æ€:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;TextInput&lt;/span&gt;
  &lt;span class=&quot;token attr-name&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;opacity&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; someValueFromState&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token attr-name&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ğŸ”´ componentWillReceiveProps in TextInput&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// resets to this value on every animation tick.&lt;/span&gt;
    value
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ‰€ä»¥è¿™ç§æ–¹æ³•ä»ç„¶å­˜åœ¨ç¼ºé™·ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸åº”ä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;PureComponent&lt;/code&gt;ï¼Œ&lt;code class=&quot;language-text&quot;&gt;shouldComponentUpdate&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;React.memo&lt;/code&gt;ç­‰å„ç§ä¼˜åŒ–æ¥æ§åˆ¶&lt;em&gt;è¡Œä¸º&lt;/em&gt;ã€‚ åªåœ¨æœ‰å¸®åŠ©çš„åœ°æ–¹ä½¿ç”¨å®ƒä»¬æ¥æé«˜&lt;em&gt;æ€§èƒ½&lt;/em&gt;ã€‚å¦‚æœåˆ é™¤ä¸€ä¸ªä¼˜åŒ–ä¼šç ´åä¸€ä¸ªç»„ä»¶ï¼Œé‚£ä¹ˆå®ƒå°±å¤ªè„†å¼±äº†ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œçš„è§£å†³æ–¹æ¡ˆä¸æˆ‘ä»¬ä¹‹å‰æè¿°çš„ç›¸åŒã€‚ä¸è¦å°†â€œæ¥å—é“å…·â€è§†ä¸ºç‰¹æ®Šäº‹ä»¶ã€‚é¿å…â€œåŒæ­¥â€propså’ŒçŠ¶æ€ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ¯ä¸ªå€¼éƒ½åº”è¯¥å®Œå…¨æ§åˆ¶ï¼ˆé€šè¿‡propsï¼‰ï¼Œæˆ–å®Œå…¨ä¸å—æ§åˆ¶ï¼ˆåœ¨æœ¬åœ°çŠ¶æ€ï¼‰ã€‚&lt;a href=&quot;https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#preferred-solutions&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;å°½å¯èƒ½&lt;/a&gt;é¿å…æ´¾ç”ŸçŠ¶æ€ã€‚&lt;strong&gt;å¹¶éšæ—¶å‡†å¤‡æ¸²æŸ“ï¼&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;åŸåˆ™3ï¼šæ²¡æœ‰ç»„ä»¶æ˜¯å•ä¾‹çš„&quot;&gt;&lt;a href=&quot;#%E5%8E%9F%E5%88%993%EF%BC%9A%E6%B2%A1%E6%9C%89%E7%BB%84%E4%BB%B6%E6%98%AF%E5%8D%95%E4%BE%8B%E7%9A%84&quot; aria-label=&quot;åŸåˆ™3ï¼šæ²¡æœ‰ç»„ä»¶æ˜¯å•ä¾‹çš„ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;åŸåˆ™3ï¼šæ²¡æœ‰ç»„ä»¶æ˜¯å•ä¾‹çš„&lt;/h2&gt;
&lt;p&gt;æœ‰æ—¶æˆ‘ä»¬å‡è®¾æŸä¸ªç»„ä»¶åªæ˜¾ç¤ºä¸€æ¬¡ã€‚å¦‚å¯¼èˆªæ ã€‚è¿™å¯èƒ½åœ¨ä¸€æ®µæ—¶é—´å†…æ˜¯æ­£ç¡®çš„ã€‚ç„¶è€Œï¼Œè¿™ç§å‡è®¾å¸¸å¸¸ä¼šå¯¼è‡´è®¾è®¡é—®é¢˜ï¼Œè€Œè¿™äº›é—®é¢˜è¦åˆ°å¾ˆä¹…ä»¥åæ‰ä¼šæµ®å‡ºæ°´é¢ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œä½ å¯èƒ½éœ€è¦åœ¨è·¯ç”±æ›´æ”¹(ä¸Šä¸€&lt;code class=&quot;language-text&quot;&gt;Page&lt;/code&gt;å’Œä¸‹ä¸€&lt;code class=&quot;language-text&quot;&gt;Page&lt;/code&gt;)çš„ä¸¤ä¸ª&lt;code class=&quot;language-text&quot;&gt;Page&lt;/code&gt;ç»„ä»¶ä¹‹é—´å®ç°åŠ¨ç”»ã€‚å®ƒä»¬éƒ½éœ€è¦åœ¨åŠ¨ç”»æœŸé—´æŒ‚è½½(mounted)ã€‚ä½†æ˜¯ï¼Œä½ å¯èƒ½ä¼šå‘ç°ï¼Œæ¯ä¸ªç»„ä»¶éƒ½å‡å®šå®ƒæ˜¯å±å¹•ä¸Šå”¯ä¸€çš„é¡µé¢ã€‚&lt;/p&gt;
&lt;p&gt;æ£€æŸ¥è¿™äº›é—®é¢˜å¾ˆå®¹æ˜“ã€‚åªæ˜¯ä¸ºäº†å¥½ç©ï¼Œå°è¯•æ¸²æŸ“ä½ çš„åº”ç”¨ç¨‹åºä¸¤æ¬¡:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;ReactDOM&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;MyApp&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;MyApp&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;root&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç‚¹å‡»ä»–ã€‚(åœ¨è¿™ä¸ªå®éªŒä¸­ï¼Œä½ å¯èƒ½éœ€è¦è°ƒæ•´ä¸€äº›CSSã€‚)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä½ çš„åº”ç”¨ä»ç„¶æŒ‰é¢„æœŸè¿è¡Œå—ï¼Ÿ&lt;/strong&gt; ä½ çœ‹åˆ°å¥‡æ€ªçš„å´©æºƒå’Œé”™è¯¯å—ï¼Ÿå¶å°”å¯¹å¤æ‚ç»„ä»¶è¿›è¡Œå‹åŠ›æµ‹è¯•æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œå¹¶ç¡®ä¿å®ƒä»¬çš„å¤šä¸ªå‰¯æœ¬ä¸ä¼šç›¸äº’å†²çªã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘è‡ªå·±å†™è¿‡å‡ æ¬¡çš„ä¸€ä¸ªæœ‰é—®é¢˜çš„æ¨¡å¼çš„ä¾‹å­æ˜¯åœ¨&lt;code class=&quot;language-text&quot;&gt;componentWillUnmount&lt;/code&gt;ä¸­æ‰§è¡Œå…¨å±€çŠ¶æ€â€œæ¸…ç†â€:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token function&quot;&gt;componentWillUnmount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// Resets something in Redux store&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;resetForm&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å½“ç„¶ï¼Œå¦‚æœé¡µé¢ä¸Šæœ‰ä¸¤ä¸ªè¿™æ ·çš„ç»„ä»¶ï¼Œå¸è½½å…¶ä¸­ä¸€ä¸ªç»„ä»¶ä¼šç ´åå¦ä¸€ä¸ªç»„ä»¶ã€‚åœ¨&lt;em&gt;mount&lt;/em&gt;ä¸Šé‡ç½®â€œå…¨å±€â€çŠ¶æ€ä¹Ÿå¥½ä¸åˆ°å“ªé‡Œå»:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token function&quot;&gt;componentDidMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// Resets something in Redux store&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;resetForm&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ&lt;em&gt;mounting&lt;/em&gt;ç¬¬äºŒä¸ªformå°†ç ´åç¬¬ä¸€ä¸ªformã€‚&lt;/p&gt;
&lt;p&gt;è¿™äº›æ¨¡å¼å¾ˆå¥½åœ°æŒ‡ç¤ºäº†æˆ‘ä»¬çš„ç»„ä»¶åœ¨å“ªäº›åœ°æ–¹æ˜¯è„†å¼±çš„ã€‚&lt;strong&gt;æ˜¾ç¤ºæˆ–éšè—æ ‘ä¸åº”è¯¥ç ´åè¯¥æ ‘ä¹‹å¤–çš„ç»„ä»¶ã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;æ— è®ºä½ æ˜¯å¦è®¡åˆ’å°†æ­¤ç»„ä»¶å‘ˆç°ä¸¤æ¬¡ï¼Œä»é•¿è¿œæ¥çœ‹ï¼Œè§£å†³è¿™äº›é—®é¢˜éƒ½æ˜¯å€¼å¾—çš„ã€‚å®ƒä¼šè®©ä½ çš„è®¾è®¡æ›´å…·å¼¹æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&quot;åŸåˆ™4ï¼šä¿æŒæœ¬åœ°çŠ¶æ€éš”ç¦»&quot;&gt;&lt;a href=&quot;#%E5%8E%9F%E5%88%994%EF%BC%9A%E4%BF%9D%E6%8C%81%E6%9C%AC%E5%9C%B0%E7%8A%B6%E6%80%81%E9%9A%94%E7%A6%BB&quot; aria-label=&quot;åŸåˆ™4ï¼šä¿æŒæœ¬åœ°çŠ¶æ€éš”ç¦» permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;åŸåˆ™4ï¼šä¿æŒæœ¬åœ°çŠ¶æ€éš”ç¦»&lt;/h2&gt;
&lt;p&gt;è€ƒè™‘ç¤¾äº¤åª’ä½“&lt;code class=&quot;language-text&quot;&gt;Post&lt;/code&gt;ç»„ä»¶ã€‚å®ƒæœ‰ä¸€ä¸ª&lt;code class=&quot;language-text&quot;&gt;Comment&lt;/code&gt;åˆ—è¡¨ï¼ˆå¯ä»¥å±•å¼€ï¼‰å’Œä¸€ä¸ª&lt;code class=&quot;language-text&quot;&gt;NewComment&lt;/code&gt;è¾“å…¥æ¡†ã€‚&lt;/p&gt;
&lt;p&gt;Reactç»„ä»¶å¯èƒ½å…·æœ‰æœ¬åœ°çŠ¶æ€ã€‚ä½†æ˜¯å“ªä¸ªçŠ¶æ€æ‰æ˜¯æœ¬åœ°çš„ï¼Ÿå¸–å­å†…å®¹æœ¬èº«æ˜¯å¦ä¸ºæœ¬åœ°çŠ¶æ€ï¼Ÿé‚£ä¹ˆè¯„è®ºåˆ—è¡¨å‘¢ï¼Ÿæˆ–è€…æ‰©å±•çš„è¯„è®ºçš„è®°å½•ï¼Ÿæˆ–è¯„è®ºæ¡†è¾“å…¥çš„å€¼ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ ä¹ æƒ¯äº†æŠŠä¸€åˆ‡éƒ½æ”¾åœ¨â€œçŠ¶æ€ç®¡ç†å™¨â€ä¸­ï¼Œé‚£ä¹ˆå›ç­”è¿™ä¸ªé—®é¢˜å¯èƒ½ä¼šå¾ˆæœ‰æŒ‘æˆ˜æ€§ã€‚æ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å†³å®šæ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¦‚æœä½ ä¸ç¡®å®šæŸä¸ªçŠ¶æ€æ˜¯å¦å±äºæœ¬åœ°çŠ¶æ€ï¼Œè¯·é—®è‡ªå·±ï¼šâ€œå¦‚æœè¿™ä¸ªç»„ä»¶è¢«æ¸²æŸ“ä¸¤æ¬¡ï¼Œé‚£ä¹ˆè¿™ç§äº’åŠ¨æ˜¯å¦ä¼šåæ˜ åœ¨å¦ä¸€ä¸ªå‰¯æœ¬ä¸­ï¼Ÿâ€ æ¯å½“ç­”æ¡ˆä¸ºâ€œå¦â€æ—¶ï¼Œä½ å°±ä¼šæ‰¾åˆ°ä¸€äº›æœ¬åœ°çš„çŠ¶æ€ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æ¸²æŸ“äº†ç›¸åŒçš„&lt;code class=&quot;language-text&quot;&gt;Post&lt;/code&gt;ä¸¤æ¬¡ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒé‡Œé¢ä¸åŒçš„å¯ä»¥æ”¹å˜çš„ä¸œè¥¿ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Post content.&lt;/em&gt; æˆ‘ä»¬æƒ³è¦åœ¨ä¸€æ£µæ ‘ä¸­ç¼–è¾‘å¸–å­(post)ä»¥åœ¨å¦ä¸€æ£µæ ‘ä¸­æ›´æ–°å®ƒã€‚å› æ­¤ï¼Œå®ƒå¯èƒ½ &lt;strong&gt;ä¸åº”è¯¥&lt;/strong&gt; æ˜¯&lt;code class=&quot;language-text&quot;&gt;Post&lt;/code&gt;ç»„ä»¶çš„æœ¬åœ°çŠ¶æ€ã€‚(ç›¸åï¼Œå¸–å­å†…å®¹å¯èƒ½å­˜åœ¨äºApolloï¼ŒRelayæˆ–Reduxç­‰ç¼“å­˜ä¸­ã€‚)&lt;/li&gt;
&lt;li&gt;&lt;em&gt;List of comments.&lt;/em&gt; è¿™ç±»ä¼¼äºpost contentã€‚æˆ‘ä»¬å¸Œæœ›åœ¨ä¸€æ£µæ ‘ä¸­æ·»åŠ ä¸€æ¡æ–°è¯„è®ºï¼Œä»¥åæ˜ åœ¨å¦ä¸€æ£µæ ‘ä¸­ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šä¸ºå®ƒä½¿ç”¨æŸç§ç¼“å­˜ï¼Œå®ƒ &lt;strong&gt;ä¸åº”è¯¥&lt;/strong&gt; æ˜¯æˆ‘ä»¬&lt;code class=&quot;language-text&quot;&gt;Post&lt;/code&gt;çš„æœ¬åœ°çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Which comments are expanded.&lt;/em&gt; å¦‚æœåœ¨ä¸€ä¸ªæ ‘ä¸­å±•å¼€è¯„è®ºä¹Ÿä¼šåœ¨å¦ä¸€ä¸ªæ ‘ä¸­å±•å¼€ï¼Œè¿™å°†ä¼šå¾ˆå¥‡æ€ªã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ç‰¹å®šçš„&lt;code class=&quot;language-text&quot;&gt;Comment&lt;/code&gt;UI &lt;em&gt;è¡¨ç¤º&lt;/em&gt; ï¼Œè€Œä¸æ˜¯æŠ½è±¡çš„â€œè¯„è®ºå®ä½“â€ã€‚å› æ­¤ï¼Œâ€œå±•å¼€â€æ ‡å¿— &lt;strong&gt;åº”è¯¥&lt;/strong&gt; æ˜¯&lt;code class=&quot;language-text&quot;&gt;Comment&lt;/code&gt;çš„æœ¬åœ°çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;The value of new comment input.&lt;/em&gt; å¦‚æœåœ¨ä¸€ä¸ªè¾“å…¥ä¸­é”®å…¥è¯„è®ºä¹Ÿä¼šæ›´æ–°å¦ä¸€ä¸ªæ ‘ä¸­çš„è¾“å…¥ï¼Œé‚£å°†ä¼šå¾ˆå¥‡æ€ªã€‚é™¤éè¾“å…¥æ˜ç¡®åœ°ç»„åˆåœ¨ä¸€èµ·ï¼Œå¦åˆ™é€šå¸¸äººä»¬æœŸæœ›å®ƒä»¬æ˜¯ç‹¬ç«‹çš„ã€‚å› æ­¤è¾“å…¥å€¼ &lt;strong&gt;åº”è¯¥&lt;/strong&gt; æ˜¯&lt;code class=&quot;language-text&quot;&gt;NewComment&lt;/code&gt;ç»„ä»¶çš„æœ¬åœ°çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘ä¸å»ºè®®å¯¹è¿™äº›è§„åˆ™è¿›è¡Œæ•™æ¡å¼çš„è§£é‡Šã€‚å½“ç„¶ï¼Œåœ¨ä¸€ä¸ªæ›´ç®€å•çš„åº”ç”¨ç¨‹åºä¸­ï¼Œä½ å¯èƒ½å¸Œæœ›å¯¹æ‰€æœ‰å†…å®¹éƒ½ä½¿ç”¨æœ¬åœ°çŠ¶æ€ï¼ŒåŒ…æ‹¬é‚£äº›â€œç¼“å­˜â€ã€‚æˆ‘åªæ˜¯ä»&lt;a href=&quot;https://github.com/xiaohesong/TIL/blob/master/front-end/react/overreact/ui-element-problem-and-build-yourself.md&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;æœ€åŸºæœ¬çš„åŸåˆ™&lt;/a&gt;è°ˆèµ·ç†æƒ³çš„ç”¨æˆ·ä½“éªŒã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¿å…è®©çœŸæ­£çš„æœ¬åœ°çŠ¶æ€å…¨å±€åŒ–ã€‚&lt;/strong&gt; è¿™å°±æ¶‰åŠåˆ°æˆ‘ä»¬çš„â€œå¼¹æ€§â€ä¸»é¢˜ï¼š ç»„ä»¶ä¹‹é—´å¾ˆå°‘å‘ç”ŸåŒæ­¥ã€‚å¦å¤–ï¼Œè¿™è¿˜ä¿®å¤äº†å¤§é‡çš„æ€§èƒ½é—®é¢˜ã€‚å½“ä½ çš„çŠ¶æ€å¤„äºæ­£ç¡®çš„ä½ç½®æ—¶ï¼Œâ€œè¿‡åº¦æ¸²æŸ“â€å°±ä¸æ˜¯ä»€ä¹ˆé—®é¢˜äº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ¦‚æ‹¬&quot;&gt;&lt;a href=&quot;#%E6%A6%82%E6%8B%AC&quot; aria-label=&quot;æ¦‚æ‹¬ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;æ¦‚æ‹¬&lt;/h2&gt;
&lt;p&gt;è®©æˆ‘ä»¬å†ä¸€æ¬¡å›é¡¾è¿™äº›åŸåˆ™ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%8E%9F%E5%88%991%E4%B8%8D%E8%A6%81%E5%81%9C%E6%AD%A2%E6%95%B0%E6%8D%AE%E6%B5%81&quot;&gt;ä¸è¦åœæ­¢æ•°æ®æµ&lt;/a&gt;ã€‚propså’ŒçŠ¶æ€å¯ä»¥æ”¹å˜ï¼Œç»„ä»¶åº”è¯¥åœ¨å‘ç”Ÿæ—¶å¤„ç†è¿™äº›æ”¹å˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%8E%9F%E5%88%992%E5%A7%8B%E7%BB%88%E5%87%86%E5%A4%87%E5%A5%BD%E6%B8%B2%E6%9F%93&quot;&gt;å§‹ç»ˆå‡†å¤‡æ¸²æŸ“&lt;/a&gt;ã€‚ç»„ä»¶ä¸åº”è¯¥ç ´åï¼Œå› ä¸ºå®ƒæˆ–å¤šæˆ–å°‘ç»å¸¸å‘ˆç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%8E%9F%E5%88%993%E6%B2%A1%E6%9C%89%E7%BB%84%E4%BB%B6%E6%98%AF%E5%8D%95%E4%BE%8B%E7%9A%84&quot;&gt;æ²¡æœ‰ç»„ä»¶æ˜¯å•ä¾‹çš„&lt;/a&gt;ã€‚å³ä½¿ä¸€ä¸ªç»„ä»¶åªæ¸²æŸ“ä¸€æ¬¡ï¼Œå¦‚æœæ¸²æŸ“ä¸¤æ¬¡ä¸ä¼šç ´åå®ƒï¼Œé‚£ä¹ˆä½ çš„è®¾è®¡ä¹Ÿä¼šå¾—åˆ°æ”¹è¿›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%8E%9F%E5%88%994%E4%BF%9D%E6%8C%81%E6%9C%AC%E5%9C%B0%E7%8A%B6%E6%80%81%E9%9A%94%E7%A6%BB&quot;&gt;ä¿æŒæœ¬åœ°çŠ¶æ€éš”ç¦»&lt;/a&gt;ã€‚è€ƒè™‘å“ªä¸ªçŠ¶æ€æ˜¯ç‰¹å®šUIè¡¨ç¤ºçš„æœ¬åœ°çŠ¶æ€â€”â€”ä¸è¦å°†è¯¥çŠ¶æ€æå‡åˆ°ä¸å¿…è¦çš„é«˜åº¦ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;è¿™äº›åŸåˆ™å¯å¸®åŠ©ä½ ç¼–å†™&lt;a href=&quot;https://overreacted.io/optimized-for-change/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ä¼˜åŒ–æ›´æ”¹&lt;/a&gt;çš„ç»„ä»¶ã€‚å¾ˆå®¹æ˜“æ·»åŠ ã€æ›´æ”¹å’Œåˆ é™¤å®ƒä»¬ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æœ€é‡è¦çš„æ˜¯ï¼Œä¸€æ—¦æˆ‘ä»¬çš„ç»„ä»¶æ¢å¤äº†å¼¹æ€§ï¼Œæˆ‘ä»¬å°±ä¼šå›åˆ°ä¸€ä¸ªç´§è¿«çš„ä¸¤éš¾å¢ƒåœ°ï¼Œå³propsæ˜¯å¦åº”è¯¥æŒ‰å­—æ¯æ’åºã€‚&lt;/p&gt;</content:encoded></item><item><title><![CDATA[ä»ä»£ç å®è·µæ½œå…¥reactå†…éƒ¨]]></title><description><![CDATA[æœ¬æ–‡æ‘˜è‡ª reactå­¦ä¹ é›†åˆ æœ¬èŠ‚æ˜¯  stack reconciler ç¨‹åºçš„å®ç°è¯´æ˜çš„é›†åˆã€‚ æœ¬æ–‡æœ‰ä¸€å®šçš„æŠ€æœ¯å«é‡ï¼Œè¦å¯¹Reactå…¬å…±APIä»¥åŠå®ƒå¦‚ä½•åˆ†ä¸ºæ ¸å¿ƒï¼Œæ¸²æŸ“å™¨å’Œåè°ƒ(å’Œè§£ï¼Œreconciler)ç¨‹åºæœ‰å¾ˆæ·±çš„ç†è§£ã€‚å¦‚æœä½ å¯¹Reactâ€¦]]></description><link>https://github.com/xiaohesong/implementation-react-notes/</link><guid isPermaLink="false">https://github.com/xiaohesong/implementation-react-notes/</guid><pubDate>Sun, 06 Jan 2019 09:40:32 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡æ‘˜è‡ª&lt;a href=&quot;https://github.com/xiaohesong/TIL/tree/master/front-end/react&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;reactå­¦ä¹ é›†åˆ&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;æœ¬èŠ‚æ˜¯ &lt;a href=&quot;https://reactjs.org/docs/codebase-overview.html#stack-reconciler&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;stack reconciler&lt;/a&gt;ç¨‹åºçš„å®ç°è¯´æ˜çš„é›†åˆã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ¬æ–‡æœ‰ä¸€å®šçš„æŠ€æœ¯å«é‡ï¼Œè¦å¯¹Reactå…¬å…±APIä»¥åŠå®ƒå¦‚ä½•åˆ†ä¸ºæ ¸å¿ƒï¼Œæ¸²æŸ“å™¨å’Œåè°ƒ(å’Œè§£ï¼Œreconciler)ç¨‹åºæœ‰å¾ˆæ·±çš„ç†è§£ã€‚å¦‚æœä½ å¯¹Reactä»£ç åº“ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œè¯·é¦–å…ˆ&lt;a href=&quot;https://github.com/xiaohesong/TIL/blob/master/front-end/react/codebase-overview.md&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;é˜…è¯»ä»£ç åº“æ¦‚è¿°&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒè¿˜å‡è®¾ä½ äº†è§£Reactç»„ä»¶ï¼Œå®ƒä»¬çš„&lt;a href=&quot;https://github.com/xiaohesong/TIL/blob/master/front-end/react/component-element-instance.md&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;å®ä¾‹å’Œå…ƒç´ ä¹‹é—´çš„å·®å¼‚&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;stack reconciler&lt;/code&gt;ç”¨äº15ç‰ˆæœ¬å’Œæ—©æœŸ. å®ƒçš„ä»£ç åœ¨ &lt;a href=&quot;https://github.com/facebook/react/tree/15-stable/src/renderers/shared/stack/reconciler&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;src/renderers/shared/stack/reconciler&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&quot;è§†é¢‘ï¼šä»å¤´å¼€å§‹æ„å»ºreact&quot;&gt;&lt;a href=&quot;#%E8%A7%86%E9%A2%91%EF%BC%9A%E4%BB%8E%E5%A4%B4%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BAreact&quot; aria-label=&quot;è§†é¢‘ï¼šä»å¤´å¼€å§‹æ„å»ºreact permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;è§†é¢‘ï¼šä»å¤´å¼€å§‹æ„å»ºReact&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://twitter.com/zpao&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Paul Oâ€™Shannessy&lt;/a&gt;è°ˆåˆ°äº†ä»å¤´å¼€å§‹æ„å»ºreactï¼Œè¿™åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå¯å‘äº†è¿™ä¸ªæ–‡æ¡£ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡æ¡£å’Œä»–çš„æ¼”è®²éƒ½æ˜¯å¯¹å®é™…ä»£ç åº“çš„ç®€åŒ–ï¼Œå› æ­¤ä½ å¯ä»¥é€šè¿‡ç†Ÿæ‚‰å®ƒä»¬æ¥è·å¾—æ›´å¥½çš„ç†è§£ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#%E6%A6%82%E8%BF%B0&quot; aria-label=&quot;æ¦‚è¿° permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;æ¦‚è¿°&lt;/h3&gt;
&lt;p&gt;reconciler(åè°ƒï¼Œè°ƒè§£)æœ¬èº«ä¸å­˜åœ¨å…¬å…±çš„APIã€‚åƒReact DOMå’ŒReact Nativeè¿™æ ·çš„&lt;a href=&quot;https://reactjs.org/docs/codebase-overview.html#stack-renderers&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;æ¸²æŸ“å™¨&lt;/a&gt;ä½¿ç”¨å®ƒæ ¹æ®ç”¨æˆ·ç¼–å†™çš„Reactç»„ä»¶æœ‰æ•ˆåœ°æ›´æ–°ç”¨æˆ·ç•Œé¢ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æŒ‚è½½mountingä½œä¸ºé€’å½’è¿‡ç¨‹&quot;&gt;&lt;a href=&quot;#%E6%8C%82%E8%BD%BDmounting%E4%BD%9C%E4%B8%BA%E9%80%92%E5%BD%92%E8%BF%87%E7%A8%8B&quot; aria-label=&quot;æŒ‚è½½mountingä½œä¸ºé€’å½’è¿‡ç¨‹ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;æŒ‚è½½(mounting)ä½œä¸ºé€’å½’è¿‡ç¨‹&lt;/h3&gt;
&lt;p&gt;è®©æˆ‘ä»¬è€ƒè™‘ç¬¬ä¸€æ¬¡æŒ‚è½½ç»„ä»¶:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;ReactDOM&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;App &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; rootEl&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;React DOMä¼šå°†&lt;code class=&quot;language-text&quot;&gt;&amp;lt;App /&amp;gt;&lt;/code&gt;ä¼ é€’ç»™è°ƒèŠ‚å™¨(reconciler)ã€‚è¯·è®°ä½ï¼Œ&lt;code class=&quot;language-text&quot;&gt;&amp;lt;App /&amp;gt;&lt;/code&gt;æ˜¯ä¸€ä¸ªReactå…ƒç´ ï¼Œå³å¯¹è¦å‘ˆç°çš„å†…å®¹çš„æè¿°ã€‚ä½ å¯ä»¥å°†å…¶è§†ä¸ºæ™®é€šå¯¹è±¡(ç¬”è€…ï¼šä¸äº†è§£çš„å¯ä»¥æŸ¥çœ‹&lt;a href=&quot;https://github.com/xiaohesong/TIL/blob/master/front-end/react/component-element-instance.md#top-down-reconciliation&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;è¿™ç¯‡æ–‡ç« &lt;/a&gt;)ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;App &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// { type: App, props: {} }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è°ƒè§£å™¨ä¼šæ£€æŸ¥è¿™ä¸ª&lt;code class=&quot;language-text&quot;&gt;App&lt;/code&gt;æ˜¯ç±»è¿˜æ˜¯å‡½æ•°(å¯¹äºè¿™ä¸ªå¾—å®ç°å¯ä»¥æŸ¥çœ‹&lt;a href=&quot;https://github.com/xiaohesong/TIL/blob/master/front-end/react/overreact/how-to-known-component-is-func-or-class.md&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;å¦‚ä½•çŸ¥é“æ˜¯å‡½æ•°è¿˜æ˜¯ç±»&lt;/a&gt;è¿™ç¯‡æ–‡ç« )ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœ&lt;code class=&quot;language-text&quot;&gt;App&lt;/code&gt;æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™è°ƒè§£å™¨å°†è°ƒç”¨&lt;code class=&quot;language-text&quot;&gt;App(props)&lt;/code&gt;æ¥è·å–æ¸²æŸ“å…ƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœ&lt;code class=&quot;language-text&quot;&gt;App&lt;/code&gt;æ˜¯ä¸€ä¸ªç±»ï¼Œé‚£ä¹ˆè°ƒè§£å™¨ä¼šé€šè¿‡&lt;code class=&quot;language-text&quot;&gt;new App(props)&lt;/code&gt;å»å®ä¾‹åŒ–&lt;code class=&quot;language-text&quot;&gt;App&lt;/code&gt;ï¼Œè°ƒç”¨&lt;code class=&quot;language-text&quot;&gt;componentWillMount&lt;/code&gt;ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œç„¶åè°ƒç”¨&lt;code class=&quot;language-text&quot;&gt;render&lt;/code&gt;æ–¹æ³•æ¥è·å–æ¸²æŸ“çš„å…ƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;æ— è®ºå“ªç§æ–¹å¼ï¼Œè°ƒè§£å™¨éƒ½å°†å¾—çŸ¥&lt;code class=&quot;language-text&quot;&gt;App&lt;/code&gt;â€œæ¸²æŸ“åˆ°â€çš„å…ƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªè¿‡ç¨‹æ˜¯é€’å½’çš„ã€‚&lt;code class=&quot;language-text&quot;&gt;App&lt;/code&gt;å¯èƒ½ä¼šæ¸²æŸ“&lt;code class=&quot;language-text&quot;&gt;&amp;lt;Greeting /&amp;gt;&lt;/code&gt;,&lt;code class=&quot;language-text&quot;&gt;&amp;lt;Greeting /&amp;gt;&lt;/code&gt;å¯èƒ½ä¼šæ¸²æŸ“&lt;code class=&quot;language-text&quot;&gt;&amp;lt;Button /&amp;gt;&lt;/code&gt;,ä¸€ç›´è¿™æ ·ã€‚è°ƒè§£å™¨å°†åœ¨äº†è§£æ¯ä¸ªç»„ä»¶å‘ˆç°çš„å†…å®¹æ—¶ä»¥é€’å½’æ–¹å¼â€œå‘ä¸‹é’»å–â€ç”¨æˆ·å®šä¹‰çš„ç»„ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥å°†æ­¤è¿‡ç¨‹æƒ³è±¡ä¸ºä¼ªä»£ç ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// React.Componentä¸‹é¢çš„ç±»æœ‰è¿™ä¸ªæ ‡ç­¾	&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;Boolean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prototype&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;Boolean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prototype&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isReactComponent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// è¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªReactå…ƒç´  (ä¾‹å¦‚ &amp;lt;App /&gt;)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// å¹¶ä¸”è¿”å›ä¸€ä¸ªå·²ç»æŒ‚è½½äº†æ ‘çš„DOMæˆ–åŸç”ŸèŠ‚ç‚¹&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;element&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; type &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; element&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; props &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; element&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// æˆ‘ä»¬å°†ç¡®å®šæ¸²æŸ“å…ƒç´ çš„ç±»å‹&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// å‡½æ•°å°±ç›´æ¥è°ƒç”¨&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ç±»å°±å®ä¾‹åŒ–åè°ƒç”¨render().&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; renderedElement&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ç±»ç»„ä»¶&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; publicInstance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// è®¾ç½®props&lt;/span&gt;
    publicInstance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; props&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// å¿…è¦æ—¶è°ƒç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;publicInstance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;componentWillMount&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      publicInstance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;componentWillMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// é€šè¿‡è°ƒç”¨render()è·å¾—æ¸²æŸ“çš„å…ƒç´ &lt;/span&gt;
    renderedElement &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; publicInstance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// å‡½æ•°ç»„ä»¶&lt;/span&gt;
    renderedElement &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// è¿™ä¸ªè¿‡ç¨‹æ˜¯é€’å½’çš„ å› ä¸ºä¸€ä¸ªç»„ä»¶å¯èƒ½è¿”å›çš„å…ƒç´ çš„ç±»å‹æ˜¯å¦å¤–ä¸€ä¸ªç»„ä»¶&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;renderedElement&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    
  &lt;span class=&quot;token comment&quot;&gt;// æ³¨æ„ï¼šè¿™ä¸ªå®ç°æ˜¯ä¸å®Œæ•´çš„ï¼Œå¹¶ä¸”ä¼šæ— é™çš„é‡å¤ä¸‹å»&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// å®ƒåªå¤„ç†&amp;lt;App/&gt;æˆ–&amp;lt;Button/&gt;ç­‰å…ƒç´ ã€‚&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// å®ƒè¿˜æ²¡æœ‰å¤„ç†åƒ&amp;lt;div/&gt;æˆ–&amp;lt;p/&gt;è¿™æ ·çš„å…ƒç´ ã€‚&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; rootEl &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;root&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; node &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;App &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
rootEl&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼š&lt;/strong&gt; è¿™çœŸçš„ä»…ä»…åªæ˜¯ä¸€ä¸ªä¼ªä»£ç ï¼Œå®ƒä¸çœŸå®çš„å®ç°å¹¶ä¸ç›¸ä¼¼ã€‚å®ƒè¿˜ä¼šå¯¼è‡´å †æ ˆæº¢å‡ºï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰è®¨è®ºä½•æ—¶åœæ­¢é€’å½’ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ä¸Šé¢ä¾‹å­ä¸­çš„ä¸€äº›å…³é”®æƒ³æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Reactçš„elementsåªæ˜¯ä¸€ä¸ªçº¯å¯¹è±¡ï¼Œç”¨æ¥æè¿°ç»„ä»¶çš„ç±»å‹(å¦‚ï¼š&lt;code class=&quot;language-text&quot;&gt;App&lt;/code&gt;)å’Œä»–çš„props.&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·å®šä¹‰çš„ç»„ä»¶(å¦‚ï¼š&lt;code class=&quot;language-text&quot;&gt;App&lt;/code&gt;)å¯ä»¥æ˜¯å‡½æ•°æˆ–è€…ç±»ï¼Œä½†æ˜¯ä»–ä»¬éƒ½ä¼šæ¸²æŸ“è¿™äº›å…ƒç´ ã€‚&lt;/li&gt;
&lt;li&gt;â€œMountingâ€æ˜¯ä¸€ä¸ªé€’å½’è¿‡ç¨‹ï¼Œå®ƒåœ¨ç»™å®šé¡¶çº§Reactå…ƒç´ (ä¾‹å¦‚&lt;code class=&quot;language-text&quot;&gt;&amp;lt;App /&amp;gt;&lt;/code&gt;)çš„æƒ…å†µä¸‹åˆ›å»ºDOMæˆ–Nativeæ ‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;mountingè®¡ç®—æœºhostå…ƒç´ &quot;&gt;&lt;a href=&quot;#mounting%E8%AE%A1%E7%AE%97%E6%9C%BAhost%E5%85%83%E7%B4%A0&quot; aria-label=&quot;mountingè®¡ç®—æœºhostå…ƒç´  permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Mountingè®¡ç®—æœº(Host)å…ƒç´ &lt;/h3&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬æ²¡æœ‰åœ¨å±å¹•ä¸Šå‘ˆç°æŸäº›å†…å®¹ï¼Œåˆ™æ­¤è¿‡ç¨‹å°†æ¯«æ— ç”¨å¤„ã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº†ç”¨æˆ·å®šä¹‰çš„ï¼ˆâ€œå¤åˆâ€ï¼‰ç»„ä»¶ä¹‹å¤–ï¼ŒReactå…ƒç´ è¿˜å¯ä»¥è¡¨ç¤ºç‰¹å®šäºå¹³å°çš„ï¼ˆâ€œè®¡ç®—æœºâ€ï¼‰ç»„ä»¶ã€‚ä¾‹å¦‚ï¼Œ&lt;code class=&quot;language-text&quot;&gt;Button&lt;/code&gt;å¯èƒ½ä¼šä»å…¶renderæ–¹æ³•è¿”å›&lt;code class=&quot;language-text&quot;&gt;&amp;lt;div /&amp;gt;&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœelementçš„&lt;code class=&quot;language-text&quot;&gt;type&lt;/code&gt;å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬è®¤ä¸ºæ­£åœ¨å¤„ç†ä¸€ä¸ªè®¡ç®—æœºå…ƒç´ ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// { type: &apos;div&apos;, props: {} }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ²¡æœ‰ä¸è®¡ç®—æœºå…ƒç´ å…³è”çš„ç”¨æˆ·å®šä¹‰ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;å½“åè°ƒç¨‹åº(è°ƒè§£å™¨)é‡åˆ°è¿™äº›è®¡ç®—æœºå…ƒç´ æ—¶ï¼Œå®ƒä¼šè®©æ¸²æŸ“å™¨(renderer)è´Ÿè´£mountingå®ƒã€‚ä¾‹å¦‚ï¼ŒReact DOMå°†åˆ›å»ºä¸€ä¸ªDOMèŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœè®¡ç®—æœºå…ƒç´ å…·æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™åè°ƒå™¨ä»¥ä¸ä¸Šè¿°ç›¸åŒçš„ç®—æ³•é€’å½’åœ°mountså®ƒä»¬ã€‚å­èŠ‚ç‚¹æ˜¯å¦æ˜¯è®¡ç®—æœºå…ƒç´ (&lt;code class=&quot;language-text&quot;&gt;&amp;lt;div&amp;gt;&amp;lt;hr /&amp;gt;&amp;lt;/div&amp;gt;&lt;/code&gt;)æˆ–ç”¨æˆ·åˆæˆçš„ç»„ä»¶(&lt;code class=&quot;language-text&quot;&gt;&amp;lt;div&amp;gt;&amp;lt;Button /&amp;gt;&amp;lt;/div&amp;gt;&lt;/code&gt;),éƒ½æ²¡æœ‰å…³ç³»ï¼Œéƒ½ä¼šå»è®©æ¸²æŸ“å™¨å»è´Ÿè´£mountingå®ƒã€‚&lt;/p&gt;
&lt;p&gt;ç”±å­ç»„ä»¶ç”Ÿæˆçš„DOMèŠ‚ç‚¹å°†é™„åŠ åˆ°çˆ¶DOMèŠ‚ç‚¹ï¼Œå¹¶ä¸”å°†é€’å½’åœ°ç»„è£…å®Œæ•´çš„DOMç»“æ„ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„:&lt;/strong&gt; è°ƒè§£å™¨æœ¬èº«ä¸DOMæ— å…³ã€‚mounting(å®‰è£…)çš„ç¡®åˆ‡ç»“æœï¼ˆæœ‰æ—¶åœ¨æºä»£ç ä¸­ç§°ä¸ºâ€œmount imageâ€ï¼‰å–å†³äºæ¸²æŸ“å™¨ï¼Œå¯ä»¥æ˜¯DOMèŠ‚ç‚¹ï¼ˆReact DOMï¼‰ï¼Œå­—ç¬¦ä¸²ï¼ˆReact DOM Serverï¼‰æˆ–è¡¨ç¤ºåŸç”Ÿè§†å›¾ï¼ˆReact Nativeï¼‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬è¦æ‰©å±•ä»£ç æ¥å¤„ç†è®¡ç®—æœºå…ƒç´ ï¼Œå®ƒå°†å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ç»§æ‰¿è‡ª React.Component ç±»æœ‰ä¸€ä¸ªæ ‡ç­¾ isReactComponent&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;Boolean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prototype&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;Boolean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prototype&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isReactComponent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// è¿™ä¸ªå‡½æ•°åªå¤„ç†å¤åˆçš„å…ƒç´ &lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// æ¯”å¦‚åƒæ˜¯&amp;lt;App /&gt;, &amp;lt;Button /&gt;è¿™äº›ï¼Œä½†ä¸æ˜¯&amp;lt;div /&gt;è¿™äº›&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mountComposite&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;element&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; type &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; element&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; props &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; element&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; renderedElement&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ç»„ä»¶æ˜¯ç±»çš„æƒ…å†µï¼Œå°±å»å®ä¾‹åŒ–ä»–&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; publicInstance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// è®¾ç½®props&lt;/span&gt;
    publicInstance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; props&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// å¿…è¦çš„æ—¶å€™è°ƒç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;publicInstance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;componentWillMount&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      publicInstance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;componentWillMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    renderedElement &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; publicInstance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;function&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ç»„ä»¶æ˜¯ä¸ªå‡½æ•°&lt;/span&gt;
    renderedElement &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// è¿™æ˜¯é€’å½’çš„&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ä½†å½“å…ƒç´ æ˜¯å®¿ä¸»ï¼ˆä¾‹å¦‚&amp;lt;div/&gt;ï¼‰è€Œä¸æ˜¯å¤åˆï¼ˆä¾‹å¦‚&amp;lt;App/&gt;ï¼‰æ—¶ï¼Œæˆ‘ä»¬å°†æœ€ç»ˆå®Œæˆé€’å½’ï¼š&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;renderedElement&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// è¿™ä¸ªå‡½æ•°ä»…ä»…å¤„ç†è®¡ç®—æœºå…ƒç´ &lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// ä¾‹å¦‚å®ƒå¤„ç†&amp;lt;div /&gt;å’Œ&amp;lt;p /&gt;è¿™äº›ï¼Œä½†ä¸å¤„ç†&amp;lt;App /&gt;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mountHost&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;element&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; type &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; element&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; props &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; element&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; children &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;children &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;Array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isArray&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    children &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  children &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; children&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Boolean&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    
  &lt;span class=&quot;token comment&quot;&gt;// è¿™æ®µä»£ç ä¸åº”è¯¥åœ¨åè°ƒå™¨ä¸­ã€‚&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ä¸åŒçš„æ¸²æŸ“å™¨å¯èƒ½å¯¹èŠ‚ç‚¹è¿›è¡Œä¸åŒçš„åˆå§‹åŒ–ã€‚&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ä¾‹å¦‚ï¼ŒReact Nativeå°†åˆ›å»ºiOSæˆ–Androidè§†å›¾ã€‚&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; node &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;propName &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;propName &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;children&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setAttribute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;propName&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; props&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;propName&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// å®‰è£…å­å…ƒç´ &lt;/span&gt;
  children&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;childElement &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// å­å…ƒç´ å¯èƒ½æ˜¯è®¡ç®—æœºå…ƒç´ (æ¯”å¦‚&amp;lt;div /&gt;)ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ä¸€ä¸ªåˆæˆç»„ä»¶(æ¯”å¦‚&amp;lt;Button /&gt;)&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// æˆ‘ä»¬éƒ½ä¼šé€’å½’æŒ‚è½½å®‰è£…&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; childNode &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;childElement&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// ä¸‹é¢è¿™ä¸ªä¹Ÿæ˜¯ä¸€ä¸ªç‰¹å®šäºå¹³å°çš„&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// å®ƒä¼šæ ¹æ®ä¸åŒçš„æ¸²æŸ“å™¨æ¥å¤„ç†ï¼Œè¿™é‡Œåªæ˜¯ä¸€ä¸ªå‡è®¾ä»–æ˜¯ä¸€ä¸ªdomæ¸²æŸ“å™¨&lt;/span&gt;
    node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;childNode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// è¿”å›ä½œä¸ºå®‰è£…ç»“æœçš„DOMèŠ‚ç‚¹&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// è¿™ä¹Ÿæ˜¯é€’å½’çš„ç»“æŸçš„åœ°æ–¹&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;element&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; type &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; element&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;function&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ç”¨æˆ·å®šä¹‰çš„ç»„ä»¶(åˆæˆçš„ç»„ä»¶)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mountComposite&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;element&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;string&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// è®¡ç®—æœºç»„ä»¶(ä¾‹å¦‚: &amp;lt;div /&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mountHost&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;element&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; rootEl &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;root&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; node &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;App &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
rootEl&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™æ˜¯æœ‰æ•ˆçš„ï¼Œä½†ä»è¿œæœªè¾¾åˆ°åè°ƒè€…çš„å®é™…è¿è¡Œæ–¹å¼ã€‚å…³é”®çš„ç¼ºå¤±éƒ¨åˆ†æ˜¯å¯¹æ›´æ–°çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;h3 id=&quot;ä»‹ç»å†…éƒ¨å®ä¾‹&quot;&gt;&lt;a href=&quot;#%E4%BB%8B%E7%BB%8D%E5%86%85%E9%83%A8%E5%AE%9E%E4%BE%8B&quot; aria-label=&quot;ä»‹ç»å†…éƒ¨å®ä¾‹ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ä»‹ç»å†…éƒ¨å®ä¾‹&lt;/h3&gt;
&lt;p&gt;reactçš„å…³é”®ç‰¹ç‚¹æ˜¯ä½ å¯ä»¥é‡æ–°æ¸²æŸ“æ‰€æœ‰ä¸œè¥¿ï¼Œå®ƒä¸ä¼šé‡æ–°åˆ›å»ºDOMæˆ–é‡ç½®çŠ¶æ€ã€‚&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;ReactDOM&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;App &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; rootEl&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// åº”è¯¥é‡ç”¨ç°æœ‰çš„DOM:&lt;/span&gt;
ReactDOM&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;App &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; rootEl&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¸Šé¢çš„å®ç°åªçŸ¥é“å¦‚ä½•æŒ‚è½½åˆå§‹æ ‘ã€‚å®ƒæ— æ³•å¯¹å…¶æ‰§è¡Œæ›´æ–°ï¼Œå› ä¸ºå®ƒä¸å­˜å‚¨æ‰€æœ‰å¿…éœ€çš„ä¿¡æ¯ï¼Œä¾‹å¦‚æ‰€æœ‰&lt;code class=&quot;language-text&quot;&gt;publicInstance&lt;/code&gt;sï¼Œæˆ–å“ªäº›DOM&lt;code class=&quot;language-text&quot;&gt;èŠ‚ç‚¹&lt;/code&gt;å¯¹åº”äºå“ªäº›ç»„ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;å †æ ˆåè°ƒå™¨ä»£ç åº“é€šè¿‡ä½¿&lt;code class=&quot;language-text&quot;&gt;mount&lt;/code&gt;å‡½æ•°æˆä¸ºä¸€ä¸ªç±»ä¸Šé¢çš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•å­˜åœ¨ä¸€äº›ç¼ºç‚¹ï¼Œæˆ‘ä»¬åœ¨æ­£åœ¨è¿›è¡Œçš„&lt;a href=&quot;https://reactjs.org/docs/codebase-overview.html#fiber-reconciler&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;åè°ƒé‡å†™ä»»åŠ¡ä¸­&lt;/a&gt;æ­£æœç€ç›¸åçš„æ–¹å‘å»å‘å±•(ç¬”è€…ï¼šç›®å‰fiberå·²ç»å‡ºæ¥äº†)ã€‚&lt;strong&gt;ä¸è¿‡&lt;/strong&gt; è¿™å°±æ˜¯å®ƒç°åœ¨çš„è¿ä½œæ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å°†åˆ›å»ºä¸¤ä¸ªç±»ï¼š&lt;code class=&quot;language-text&quot;&gt;DOMComponent&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;CompositeComponent&lt;/code&gt;ï¼Œè€Œä¸æ˜¯å•ç‹¬çš„&lt;code class=&quot;language-text&quot;&gt;mountHost&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;mountComposite&lt;/code&gt;å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;ä¸¤ä¸ªç±»éƒ½æœ‰ä¸€ä¸ªæ¥å—å…ƒç´ çš„æ„é€ å‡½æ•°ï¼Œä»¥åŠä¸€ä¸ªè¿”å›å·²å®‰è£…èŠ‚ç‚¹çš„&lt;code class=&quot;language-text&quot;&gt;mount()&lt;/code&gt;æ–¹æ³•ã€‚æˆ‘ä»¬å°†ç”¨å®ä¾‹åŒ–ç±»çš„å·¥å‚æ›¿æ¢é¡¶çº§&lt;code class=&quot;language-text&quot;&gt;mount()&lt;/code&gt;å‡½æ•°ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;instantiateComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;element&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; type &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; element&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;function&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ç”¨æˆ·å®šä¹‰çš„ç»„ä»¶&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CompositeComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;element&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;string&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ç‰¹å®šäºå¹³å°çš„ç»„ä»¶ï¼Œå¦‚è®¡ç®—æœºç»„ä»¶(&amp;lt;div /&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DOMComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;element&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;  
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;é¦–å…ˆï¼Œè®©æˆ‘ä»¬è€ƒè™‘ä¸‹&lt;code class=&quot;language-text&quot;&gt;CompositeComponent&lt;/code&gt;çš„å®ç°:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CompositeComponent&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;element&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;currentElement &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; element&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;renderedComponent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;publicInstance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;getPublicInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// å¯¹äºå¤åˆçš„ç»„ä»¶ï¼Œæš´éœ²ç±»çš„å®ä¾‹&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;publicInstance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; element &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;currentElement&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; type &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; element&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; props &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; element&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; publicInstance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; renderedElement&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// Component class&lt;/span&gt;
      publicInstance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// Set the props&lt;/span&gt;
      publicInstance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; props&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// Call the lifecycle if necessary&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;publicInstance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;componentWillMount&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        publicInstance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;componentWillMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      renderedElement &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; publicInstance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;function&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// Component function&lt;/span&gt;
      publicInstance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      renderedElement &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Save the public instance&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;publicInstance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; publicInstance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// æ ¹æ®å…ƒç´ å®ä¾‹åŒ–å­å†…éƒ¨å®ä¾‹&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ä»–å°†æ˜¯DOMComponent,ä¾‹å¦‚&amp;lt;div /&gt;, &amp;lt;p /&gt;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// æˆ–è€…æ˜¯CompositeComponent,ä¾‹å¦‚&amp;lt;App /&gt;ï¼Œ&amp;lt;Button /&gt;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; renderedComponent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;instantiateComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;renderedElement&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;renderedComponent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; renderedComponent&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Mount the rendered output&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; renderedComponent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™ä¸æˆ‘ä»¬ä¹‹å‰çš„&lt;code class=&quot;language-text&quot;&gt;mountComposite()&lt;/code&gt;å®ç°æ²¡ä»€ä¹ˆä¸åŒï¼Œä½†ç°åœ¨æˆ‘ä»¬å¯ä»¥å­˜å‚¨ä¸€äº›ä¿¡æ¯ï¼Œä¾‹å¦‚&lt;code class=&quot;language-text&quot;&gt;this.currentElement&lt;/code&gt;,&lt;code class=&quot;language-text&quot;&gt;this.renderedComponent&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;this.publicInstance&lt;/code&gt;,åœ¨æ›´æ–°æœŸé—´ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼Œ&lt;code class=&quot;language-text&quot;&gt;CompositeComponent&lt;/code&gt;çš„å®ä¾‹ä¸ç”¨æˆ·æä¾›çš„&lt;code class=&quot;language-text&quot;&gt;element.type&lt;/code&gt;çš„å®ä¾‹ä¸åŒã€‚&lt;code class=&quot;language-text&quot;&gt;CompositeComponent&lt;/code&gt;æ˜¯æˆ‘ä»¬çš„åè°ƒç¨‹åºçš„å®ç°ç»†èŠ‚ï¼Œæ°¸è¿œä¸ä¼šå‘ç”¨æˆ·å…¬å¼€ã€‚ç”¨æˆ·å®šä¹‰çš„ç±»æ˜¯æˆ‘ä»¬ä»&lt;code class=&quot;language-text&quot;&gt;element.type&lt;/code&gt;è¯»å–çš„ï¼Œ&lt;code class=&quot;language-text&quot;&gt;CompositeComponent&lt;/code&gt;ä¼šåˆ›å»ºè¿™ä¸ªç±»çš„å®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸ºé¿å…æ··æ·†ï¼Œæˆ‘ä»¬å°†&lt;code class=&quot;language-text&quot;&gt;CompositeComponent&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;DOMComponent&lt;/code&gt;çš„å®ä¾‹å«åšâ€œå†…éƒ¨å®ä¾‹â€ã€‚&lt;/strong&gt; å®ƒä»¬å­˜åœ¨ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†ä¸€äº›é•¿æœŸå­˜åœ¨çš„æ•°æ®ä¸å®ƒä»¬ç›¸å…³è”ã€‚åªæœ‰æ¸²æŸ“å™¨å’Œè°ƒè§£å™¨çŸ¥é“å®ƒä»¬å­˜åœ¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç›¸åï¼Œæˆ‘ä»¬å°†ç”¨æˆ·å®šä¹‰ç±»çš„å®ä¾‹ç§°ä¸ºâ€œå…¬å…±å®ä¾‹(public instance)â€ã€‚&lt;/strong&gt; å…¬å…±å®ä¾‹æ˜¯ä½ åœ¨&lt;code class=&quot;language-text&quot;&gt;render()&lt;/code&gt;å’Œç»„ä»¶å…¶ä»–çš„æ–¹æ³•ä¸­çœ‹åˆ°çš„&lt;code class=&quot;language-text&quot;&gt;this&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;è‡³äº&lt;code class=&quot;language-text&quot;&gt;mountHost()&lt;/code&gt;æ–¹æ³•ï¼Œé‡æ„æˆäº†åœ¨&lt;code class=&quot;language-text&quot;&gt;DOMComponent&lt;/code&gt;ç±»ä¸Šçš„&lt;code class=&quot;language-text&quot;&gt;mount()&lt;/code&gt;æ–¹æ³•ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DOMComponent&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;element&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;currentElement &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; element&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;renderedChildren &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;node &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;getPublicInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// For DOM components, only expose the DOM node.&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; element &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;currentElement&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; type &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; element&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; props &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; element&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; children &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;children &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;Array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isArray&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      children &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Create and save the node&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; node &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;node &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Set the attributes&lt;/span&gt;
    Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;propName &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;propName &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;children&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setAttribute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;propName&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; props&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;propName&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// åˆ›å»ºå¹¶ä¿å­˜åŒ…å«çš„å­å…ƒç´ &lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// è¿™äº›å­å…ƒç´ ï¼Œæ¯ä¸ªéƒ½å¯ä»¥æ˜¯DOMComponentæˆ–CompositeComponent&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// è¿™äº›åŒ¹é…æ˜¯ä¾èµ–äºå…ƒç´ ç±»å‹çš„è¿”å›å€¼(stringæˆ–function)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; renderedChildren &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; children&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;instantiateComponent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;renderedChildren &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; renderedChildren&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Collect DOM nodes they return on mount&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; childNodes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; renderedChildren&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;child &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; child&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    childNodes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;childNode &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;childNode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// DOMèŠ‚ç‚¹ä½œä¸ºmountçš„èŠ‚ç‚¹è¿”å›&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä¸ä¸Šé¢çš„ç›¸æ¯”ï¼Œ&lt;code class=&quot;language-text&quot;&gt;mountHost()&lt;/code&gt;é‡æ„ä¹‹åçš„ä¸»è¦åŒºåˆ«æ˜¯ç°åœ¨å°†&lt;code class=&quot;language-text&quot;&gt;this.node&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;this.renderedChildren&lt;/code&gt;ä¸å†…éƒ¨DOMç»„ä»¶å®ä¾‹ç›¸å…³è”ã€‚æˆ‘ä»¬ä¼šç”¨ä»–æ¥ç”¨äºåœ¨åé¢åšéç ´åæ€§çš„æ›´æ–°ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œæ¯ä¸ªå†…éƒ¨å®ä¾‹ï¼ˆå¤åˆæˆ–ä¸»æœºï¼‰ç°åœ¨éƒ½æŒ‡å‘å…¶å­çº§å†…éƒ¨å®ä¾‹ã€‚ä¸ºäº†å¸®åŠ©å¯è§†åŒ–ï¼Œå¦‚æœå‡½æ•°&lt;code class=&quot;language-text&quot;&gt;&amp;lt;App&amp;gt;&lt;/code&gt;ç»„ä»¶å‘ˆç°&lt;code class=&quot;language-text&quot;&gt;&amp;lt;Button&amp;gt;&lt;/code&gt;ç±»ç»„ä»¶ï¼Œè€Œ&lt;code class=&quot;language-text&quot;&gt;Button&lt;/code&gt;ç±»å‘ˆç°&lt;code class=&quot;language-text&quot;&gt;&amp;lt;div&amp;gt;&lt;/code&gt;ï¼Œåˆ™å†…éƒ¨å®ä¾‹æ ‘å°†å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;object CompositeComponent&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  currentElement&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;App &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  publicInstance&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  renderedComponent&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;object CompositeComponent&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    currentElement&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Button &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    publicInstance&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;object Button&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    renderedComponent&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;object DOMComponent&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      currentElement&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      node&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;object HTMLDivElement&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      renderedChildren&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åœ¨DOMä¸­ï¼Œä½ åªèƒ½çœ‹åˆ°&lt;code class=&quot;language-text&quot;&gt;&amp;lt;div&amp;gt;&lt;/code&gt;ã€‚ä½†æ˜¯ï¼Œå†…éƒ¨å®ä¾‹æ ‘åŒ…å«å¤åˆå’Œä¸»æœºå†…éƒ¨å®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;å¤åˆå†…éƒ¨å®ä¾‹éœ€è¦å­˜å‚¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“å‰å…ƒç´ &lt;/li&gt;
&lt;li&gt;å…¬å…±å®ä¾‹ï¼Œå¦‚æœå½“å‰å…ƒç´ ç±»å‹æ˜¯ä¸ªç±»&lt;/li&gt;
&lt;li&gt;å•ä¸ªå‘ˆç°çš„å†…éƒ¨å®ä¾‹ã€‚å®ƒå¯ä»¥æ˜¯&lt;code class=&quot;language-text&quot;&gt;DOMComponent&lt;/code&gt;æˆ–&lt;code class=&quot;language-text&quot;&gt;CompositeComponent&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è®¡ç®—æœºå†…éƒ¨å®ä¾‹éœ€è¦å­˜å‚¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“å‰å…ƒç´ &lt;/li&gt;
&lt;li&gt;DOMèŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰å­çº§çš„å†…éƒ¨å®ä¾‹ï¼Œè¿™äº›å­çº§ä¸­çš„æ¯ä¸€ä¸ªéƒ½å¯ä»¥æ˜¯&lt;code class=&quot;language-text&quot;&gt;DOMComponent&lt;/code&gt;æˆ–&lt;code class=&quot;language-text&quot;&gt;CompositeComponent&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœä½ æ­£åœ¨åŠªåŠ›æƒ³è±¡å¦‚ä½•åœ¨æ›´å¤æ‚çš„åº”ç”¨ç¨‹åºä¸­æ„å»ºå†…éƒ¨å®ä¾‹æ ‘ï¼Œ&lt;a href=&quot;https://github.com/facebook/react-devtools&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;React DevTools&lt;/a&gt;å¯ä»¥ç»™ä½ ä¸€ä¸ªè¿‘ä¼¼çš„ç»“æœï¼Œå› ä¸ºå®ƒçªæ˜¾ç°è‰²çš„è®¡ç®—æœºå®ä¾‹ï¼Œä»¥åŠå¸¦ç´«è‰²çš„å¤åˆå®ä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://reactjs.org/static/implementation-notes-tree-d96fec10d250eace9756f09543bf5d58-a6f54.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å®Œæˆè¿™ä¸ªé‡æ„ï¼Œæˆ‘ä»¬å°†å¼•å…¥ä¸€ä¸ªå°†å®Œæ•´æ ‘å®‰è£…åˆ°å®¹å™¨èŠ‚ç‚¹çš„å‡½æ•°ï¼Œå°±åƒ&lt;code class=&quot;language-text&quot;&gt;ReactDOM.render()&lt;/code&gt;ä¸€æ ·ã€‚ä»–è¿”å›ä¸€ä¸ªå…¬å…±å®ä¾‹ï¼Œä¹Ÿåƒ&lt;code class=&quot;language-text&quot;&gt;ReactDOM.render()&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mountTree&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;element&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; containerNode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// åˆ›å»ºé¡¶å±‚çš„å†…éƒ¨å®ä¾‹&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; rootComponent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;instantiateComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;element&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// æŒ‚è½½é¡¶å±‚çš„ç»„ä»¶åˆ°å®¹å™¨&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; node &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; rootComponent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  containerNode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// è¿”å›ä»–æä¾›çš„å…¬å…±å®ä¾‹&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; publicInstance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; rootComponent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getPublicInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; publicInstance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; rootEl &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;root&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;mountTree&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;App &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; rootEl&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;å¸è½½&quot;&gt;&lt;a href=&quot;#%E5%8D%B8%E8%BD%BD&quot; aria-label=&quot;å¸è½½ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;å¸è½½&lt;/h3&gt;
&lt;p&gt;æ—¢ç„¶æˆ‘ä»¬æœ‰å†…éƒ¨å®ä¾‹æ¥ä¿å­˜å®ƒä»¬çš„å­èŠ‚ç‚¹å’ŒDOMèŠ‚ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å®ç°å¸è½½ã€‚å¯¹äºå¤åˆç»„ä»¶ï¼Œå¸è½½ä¼šè°ƒç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å¹¶è¿›è¡Œé€’å½’ã€‚&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;class CompositeComponent {

  // ...

  unmount() {
    // å¿…è¦çš„æ—¶å€™è°ƒç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•
    var publicInstance = this.publicInstance;
    if (publicInstance) {
      if (publicInstance.componentWillUnmount) {
        publicInstance.componentWillUnmount();
      }
    }

    // Unmount the single rendered component
    var renderedComponent = this.renderedComponent;
    renderedComponent.unmount();
  }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¯¹äº&lt;code class=&quot;language-text&quot;&gt;DOMComponent&lt;/code&gt;,å¸è½½ä¼šå‘Šè¯‰æ¯ä¸ªå­èŠ‚ç‚¹è¿›è¡Œå¸è½½:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DOMComponent&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;unmount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// å¸è½½æ‰€æœ‰çš„å­çº§&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; renderedChildren &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;renderedChildren&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    renderedChildren&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;child &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; child&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unmount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å®é™…ä¸Šï¼Œå¸è½½DOMç»„ä»¶ä¹Ÿä¼šåˆ é™¤äº‹ä»¶ä¾¦å¬å™¨å¹¶æ¸…é™¤ä¸€äº›ç¼“å­˜ï¼Œä½†æˆ‘ä»¬å°†è·³è¿‡è¿™äº›ç»†èŠ‚ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç°åœ¨å¯ä»¥æ·»åŠ ä¸€ä¸ªåä¸º&lt;code class=&quot;language-text&quot;&gt;unmountTree(containerNode)&lt;/code&gt;çš„æ–°é¡¶çº§å‡½æ•°ï¼Œå®ƒç±»ä¼¼äº&lt;code class=&quot;language-text&quot;&gt;ReactDOM.unmountComponentAtNode()&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;unmountTree&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;containerNode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ä»DOMèŠ‚ç‚¹è¯»å–å†…éƒ¨å®ä¾‹&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// (ç›®å‰è¿™ä¸ªä¸ä¼šæ­£å¸¸å·¥ä½œï¼Œ æˆ‘ä»¬å°†éœ€è¦æ”¹å˜mountTree()æ–¹æ³•å»å­˜å‚¨)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; node &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; containerNode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;firstChild&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; rootComponent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_internalInstance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// æ¸…é™¤å®¹å™¨å¹¶ä¸”å¸è½½æ ‘&lt;/span&gt;
  rootComponent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unmount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  containerNode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHTML &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä¸ºäº†è®©ä»–å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦ä»DOMèŠ‚ç‚¹è¯»å–å†…éƒ¨æ ¹å®ä¾‹ã€‚æˆ‘ä»¬å°†ä¿®æ”¹&lt;code class=&quot;language-text&quot;&gt;mountTree()&lt;/code&gt;ä»¥å°†&lt;code class=&quot;language-text&quot;&gt;_internalInstance&lt;/code&gt;å±æ€§æ·»åŠ åˆ°DOMæ ¹èŠ‚ç‚¹ã€‚æˆ‘ä»¬è¿˜å°†è®©&lt;code class=&quot;language-text&quot;&gt;mountTree()&lt;/code&gt;å»é”€æ¯ä»»ä½•ç°æœ‰æ ‘ï¼Œä»¥ä¾¿å¯ä»¥å¤šæ¬¡è°ƒç”¨å®ƒï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mountTree&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;element&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; containerNode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// é”€æ¯å­˜åœ¨çš„æ ‘&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;containerNode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;firstChild&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;unmountTree&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;containerNode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// åˆ›å»ºé¡¶å±‚çš„å†…éƒ¨å®ä¾‹&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; rootComponent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;instantiateComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;element&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// æŒ‚è½½é¡¶å±‚çš„ç»„ä»¶åˆ°å®¹å™¨&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; node &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; rootComponent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  containerNode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// ä¿å­˜å†…éƒ¨å®ä¾‹çš„å¼•ç”¨&lt;/span&gt;
  node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_internalInstance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; rootComponent&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// è¿”å›ä»–æä¾›çš„å…¬å…±å®ä¾‹&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; publicInstance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; rootComponent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getPublicInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; publicInstance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç°åœ¨ï¼Œé‡å¤è¿è¡Œ&lt;code class=&quot;language-text&quot;&gt;unmountTree()&lt;/code&gt;æˆ–è¿è¡Œ&lt;code class=&quot;language-text&quot;&gt;mountTree()&lt;/code&gt;ï¼Œåˆ é™¤æ—§æ ‘å¹¶åœ¨ç»„ä»¶ä¸Šè¿è¡Œ&lt;code class=&quot;language-text&quot;&gt;componentWillUnmount()&lt;/code&gt;ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ›´æ–°&quot;&gt;&lt;a href=&quot;#%E6%9B%B4%E6%96%B0&quot; aria-label=&quot;æ›´æ–° permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;æ›´æ–°&lt;/h3&gt;
&lt;p&gt;åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†å¸è½½ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ¯ä¸ªpropæ›´æ”¹å¯¼è‡´å¸è½½å¹¶å®‰è£…æ•´ä¸ªæ ‘ï¼Œåˆ™Reactå°±ä¼šæ˜¾å¾—ä¸æ˜¯å¾ˆå¥½ç”¨äº†ã€‚åè°ƒç¨‹åºçš„ç›®æ ‡æ˜¯å°½å¯èƒ½é‡ç”¨ç°æœ‰å®ä¾‹æ¥ä¿ç•™DOMå’ŒçŠ¶æ€ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; rootEl &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;root&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;mountTree&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;App &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; rootEl&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// åº”è¯¥é‡ç”¨å­˜åœ¨çš„DOM&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;mountTree&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;App &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; rootEl&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬å°†ä½¿ç”¨å¦ä¸€ç§æ–¹æ³•æ‰©å±•æˆ‘ä»¬çš„å†…éƒ¨å®ä¾‹ã€‚é™¤äº†&lt;code class=&quot;language-text&quot;&gt;mount()&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;unmount()&lt;/code&gt;ä¹‹å¤–ï¼Œ&lt;code class=&quot;language-text&quot;&gt;DOMComponent&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;CompositeComponent&lt;/code&gt;éƒ½å°†å®ç°ä¸€ä¸ªåä¸º&lt;code class=&quot;language-text&quot;&gt;receive(nextElement)&lt;/code&gt;çš„æ–°æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CompositeComponent&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;receive&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nextElement&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DOMComponent&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;receive&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nextElement&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å®ƒçš„ä»»åŠ¡æ˜¯å°½ä¸€åˆ‡å¯èƒ½ä½¿ç»„ä»¶ï¼ˆåŠå…¶ä»»ä½•å­ç»„ä»¶ï¼‰ä¸nextElementæä¾›çš„æè¿°ä¿æŒåŒæ­¥ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ç»å¸¸è¢«æè¿°ä¸ºâ€œè™šæ‹ŸDOMåŒºåˆ«â€çš„éƒ¨åˆ†ï¼Œå°½ç®¡çœŸæ­£å‘ç”Ÿçš„æ˜¯æˆ‘ä»¬é€’å½’åœ°éå†å†…éƒ¨æ ‘å¹¶è®©æ¯ä¸ªå†…éƒ¨å®ä¾‹æ¥æ”¶æ›´æ–°ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ›´æ–°å¤åˆç»„ä»¶&quot;&gt;&lt;a href=&quot;#%E6%9B%B4%E6%96%B0%E5%A4%8D%E5%90%88%E7%BB%84%E4%BB%B6&quot; aria-label=&quot;æ›´æ–°å¤åˆç»„ä»¶ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;æ›´æ–°å¤åˆç»„ä»¶&lt;/h3&gt;
&lt;p&gt;å½“å¤åˆç»„ä»¶æ¥æ”¶æ–°å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬è¿è¡Œ&lt;code class=&quot;language-text&quot;&gt;componentWillUpdate()&lt;/code&gt;ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åæˆ‘ä»¬ä½¿ç”¨æ–°çš„propsé‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œå¹¶è·å–ä¸‹ä¸€ä¸ªæ¸²æŸ“å…ƒç´ ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CompositeComponent&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;receive&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nextElement&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; prevProps &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;currentElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; publicInstance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;publicInstance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; prevRenderedComponent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;renderedComponent&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; prevRenderedElement &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; prevRenderedComponent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;currentElement&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// æ›´æ–°è‡ªæœ‰çš„å…ƒç´ &lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;currentElement &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; nextElement&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; type &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; nextElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; nextProps &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; nextElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// å¼„æ¸…æ¥šä¸‹ä¸€ä¸ªrender()çš„è¾“å‡ºæ˜¯ä»€ä¹ˆ&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; nextRenderedElement&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// ç±»ç»„ä»¶&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// å¿…è¦çš„æ—¶å€™è°ƒç”¨ç”Ÿå‘½å‘¨æœŸ&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;publicInstance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;componentWillUpdate&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        publicInstance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;componentWillUpdate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nextProps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// æ›´æ–°props&lt;/span&gt;
      publicInstance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; nextProps&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// Re-render&lt;/span&gt;
      nextRenderedElement &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; publicInstance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;function&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// å‡½æ•°å¼ç»„ä»¶&lt;/span&gt;
      nextRenderedElement &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nextProps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ¸²æŸ“å…ƒç´ çš„&lt;code class=&quot;language-text&quot;&gt;type&lt;/code&gt;ã€‚å¦‚æœè‡ªä¸Šæ¬¡æ¸²æŸ“å&lt;code class=&quot;language-text&quot;&gt;type&lt;/code&gt;æœªæ›´æ”¹ï¼Œåˆ™ä¸‹é¢çš„ç»„ä»¶ä¹Ÿå¯ä»¥åœ¨ä¹‹å‰çš„åŸºç¡€ä¸Šæ›´æ–°ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œå¦‚æœç¬¬ä¸€æ¬¡è¿”å›&lt;code class=&quot;language-text&quot;&gt;&amp;lt;Button color =â€œred&amp;quot;/&amp;gt;&lt;/code&gt;ï¼Œç¬¬äºŒæ¬¡è¿”å›&lt;code class=&quot;language-text&quot;&gt;&amp;lt;Button color =â€œblue&amp;quot;/&amp;gt;&lt;/code&gt;ï¼Œæˆ‘ä»¬å¯ä»¥å‘Šè¯‰ç›¸åº”çš„å†…éƒ¨å®ä¾‹&lt;code class=&quot;language-text&quot;&gt;receive()&lt;/code&gt;ä¸‹ä¸€ä¸ªå…ƒç´ ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;	&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// å¦‚æœæ¸²æŸ“çš„å…ƒç´ ç±»å‹æ²¡æœ‰æ”¹å˜,&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// é‡ç”¨ç°æœ‰çš„ç»„ä»¶å®ä¾‹&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prevRenderedElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; nextRenderedElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      prevRenderedComponent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;receive&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nextRenderedElement&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œå¦‚æœä¸‹ä¸€ä¸ªæ¸²æŸ“å…ƒç´ çš„ç±»å‹ä¸å…ˆå‰æ¸²æŸ“çš„å…ƒç´ ä¸åŒï¼Œæˆ‘ä»¬æ— æ³•æ›´æ–°å†…éƒ¨å®ä¾‹ã€‚&lt;code class=&quot;language-text&quot;&gt;&amp;lt;button /&amp;gt;&lt;/code&gt;ä¸å¯èƒ½å˜æˆ&lt;code class=&quot;language-text&quot;&gt;&amp;lt;input /&amp;gt;&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸åï¼Œæˆ‘ä»¬å¿…é¡»å¸è½½ç°æœ‰çš„å†…éƒ¨å®ä¾‹å¹¶æŒ‚è½½ä¸å‘ˆç°çš„å…ƒç´ ç±»å‹ç›¸å¯¹åº”çš„æ–°å®ä¾‹ã€‚ä¾‹å¦‚ï¼Œå½“å…ˆå‰å‘ˆç°&lt;code class=&quot;language-text&quot;&gt;&amp;lt;button /&amp;gt;&lt;/code&gt;çš„ç»„ä»¶å‘ˆç°&lt;code class=&quot;language-text&quot;&gt;&amp;lt;input /&amp;gt;&lt;/code&gt;æ—¶ï¼Œä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;	&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

	&lt;span class=&quot;token comment&quot;&gt;// å¦‚æœæˆ‘ä»¬åˆ°è¾¾äº†è¿™ä¸€ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å¸è½½ä¹‹å‰æŒ‚è½½çš„ç»„ä»¶&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// æŒ‚è½½æ–°çš„ä¸€ä¸ªï¼Œå¹¶ä¸”äº¤æ¢ä»–ä»¬çš„èŠ‚ç‚¹&lt;/span&gt;

	&lt;span class=&quot;token comment&quot;&gt;// æ‰¾åˆ°æ—§çš„èŠ‚ç‚¹ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å»æ›¿æ¢ä»–&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; prevNode &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; prevRenderedComponent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getHostNode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token comment&quot;&gt;// å¸è½½æ—§çš„å­çº§å¹¶ä¸”æŒ‚è½½æ–°çš„å­çº§&lt;/span&gt;
    prevRenderedComponent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unmount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; nextRenderedComponent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;instantiateComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nextRenderedElement&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; nextNode &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; nextRenderedComponent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// æ›¿æ¢å¯¹å­çº§çš„å¼•ç”¨&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;renderedComponent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; nextRenderedComponent&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token comment&quot;&gt;// æ–°çš„èŠ‚ç‚¹æ›¿æ¢æ—§çš„&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// è®°ä½ï¼šä¸‹é¢çš„ä»£ç æ˜¯ç‰¹å®šäºå¹³å°çš„ï¼Œç†æƒ³æƒ…å†µä¸‹æ˜¯åœ¨CompositeComponentä¹‹å¤–çš„&lt;/span&gt;
    prevNode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;parentNode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replaceChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nextNode&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; prevNode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œå½“å¤åˆç»„ä»¶æ¥æ”¶åˆ°æ–°å…ƒç´ æ—¶ï¼Œå®ƒå¯ä»¥å°†æ›´æ–°å§”æ‰˜ç»™å…¶å‘ˆç°çš„å†…éƒ¨å®ä¾‹ï¼Œæˆ–è€…å¸è½½å®ƒå¹¶åœ¨å…¶ä½ç½®å®‰è£…æ–°çš„å®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å¦ä¸€ä¸ªæ¡ä»¶ä¸‹ï¼Œç»„ä»¶å°†é‡æ–°å®‰è£…è€Œä¸æ˜¯æ¥æ”¶å…ƒç´ ï¼Œå³å…ƒç´ çš„&lt;code class=&quot;language-text&quot;&gt;key&lt;/code&gt;å·²æ›´æ”¹ã€‚æˆ‘ä»¬ä¸è®¨è®ºæœ¬æ–‡æ¡£ä¸­çš„&lt;code class=&quot;language-text&quot;&gt;key&lt;/code&gt;å¤„ç†ï¼Œå› ä¸ºå®ƒä¸ºåŸæœ¬å°±å¾ˆå¤æ‚çš„æ•™ç¨‹å¢åŠ äº†æ›´å¤šçš„å¤æ‚æ€§ã€‚&lt;/p&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸€ä¸ªåä¸º&lt;code class=&quot;language-text&quot;&gt;getHostNode()&lt;/code&gt;çš„æ–¹æ³•æ·»åŠ åˆ°å†…éƒ¨å®ä¾‹åå®šä¸­ï¼Œä»¥ä¾¿å¯ä»¥åœ¨æ›´æ–°æœŸé—´æ‰¾åˆ°ç‰¹å®šäºå¹³å°çš„èŠ‚ç‚¹å¹¶æ›¿æ¢å®ƒã€‚å®ƒçš„å®ç°å¯¹äºä¸¤ä¸ªç±»éƒ½å¾ˆç®€å•ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CompositeComponent&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;getHostNode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// è¯·æ±‚æ¸²æŸ“çš„ç»„ä»¶æä¾›ä»–&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// è¿™å°†å‘ä¸‹é€’å½’å¤åˆç»„ä»¶&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;renderedComponent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getHostNode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DOMComponent&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;getHostNode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;  
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;æ›´æ¢è®¡ç®—æœºç»„ä»¶&quot;&gt;&lt;a href=&quot;#%E6%9B%B4%E6%8D%A2%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E4%BB%B6&quot; aria-label=&quot;æ›´æ¢è®¡ç®—æœºç»„ä»¶ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;æ›´æ¢è®¡ç®—æœºç»„ä»¶&lt;/h3&gt;
&lt;p&gt;è®¡ç®—æœºç»„ä»¶å®ç°ï¼Œä¾‹å¦‚&lt;code class=&quot;language-text&quot;&gt;DOMComponent&lt;/code&gt;, ä»¥ä¸åŒæ–¹å¼æ›´æ–°ã€‚å½“ä»–ä»¬æ”¶åˆ°å…ƒç´ æ—¶ï¼Œä»–ä»¬éœ€è¦æ›´æ–°åº•å±‚ç‰¹å®šäºå¹³å°çš„è§†å›¾ã€‚åœ¨React DOMçš„æƒ…å†µä¸‹ï¼Œè¿™æ„å‘³ç€æ›´æ–°DOMå±æ€§ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DOMComponent&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;receive&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nextElement&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; node &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; prevElement &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;currentElement&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; prevProps &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; prevElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; nextProps &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; nextElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;    
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;currentElement &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; nextElement&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// ç§»é™¤æ—§çš„å±æ€§&lt;/span&gt;
    Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prevProps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;propName &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;propName &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;children&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;nextProps&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hasOwnProperty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;propName&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;removeAttribute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;propName&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// è®¾ç½®æ¥ä¸‹æ¥çš„å±æ€§&lt;/span&gt;
    Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nextProps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;propName &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;propName &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;children&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setAttribute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;propName&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; nextProps&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;propName&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç„¶åï¼Œè®¡ç®—æœºç»„ä»¶éœ€è¦æ›´æ–°ä»–ä»¬çš„å­ç»„ä»¶ã€‚ä¸å¤åˆç»„ä»¶ä¸åŒï¼Œå®ƒä»¬å¯èƒ½åŒ…å«å¤šä¸ªå­ç»„ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ä¸ªç®€åŒ–çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å†…éƒ¨å®ä¾‹æ•°ç»„å¹¶å¯¹å…¶è¿›è¡Œè¿­ä»£ï¼Œæ ¹æ®æ¥æ”¶çš„ç±»å‹æ˜¯å¦ä¸ä¹‹å‰çš„ç±»å‹åŒ¹é…æ¥æ›´æ–°æˆ–æ›¿æ¢å†…éƒ¨å®ä¾‹ã€‚é™¤äº†æ’å…¥å’Œåˆ é™¤ä¹‹å¤–ï¼ŒçœŸæ­£çš„åè°ƒç¨‹åºè¿˜ä¼šä½¿ç”¨å…ƒç´ çš„é”®è·Ÿè¸ªç§»åŠ¨ï¼Œä½†æˆ‘ä»¬å°†çœç•¥æ­¤é€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨åˆ—è¡¨ä¸­æ”¶é›†å­çº§çš„DOMæ“ä½œï¼Œä»¥ä¾¿æ‰¹é‡æ‰§è¡Œå®ƒä»¬ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;	&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// è¿™ä¸ªæ˜¯React elementsæ•°ç»„&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; prevChildren &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; prevProps&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;children &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;Array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isArray&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prevChildren&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      prevChildren &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;prevChildren&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; nextChildren &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; nextProps&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;children &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;Array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isArray&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nextChildren&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      nextChildren &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;nextChildren&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// è¿™æ˜¯å†…éƒ¨å®ä¾‹çš„æ•°ç»„:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; prevRenderedChildren &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;renderedChildren&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; nextRenderedChildren &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token comment&quot;&gt;// å½“æˆ‘ä»¬è¿­ä»£å­çº§çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†ä¼šæ·»åŠ æ“ä½œåˆ°æ•°ç»„&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; operationQueue &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token comment&quot;&gt;//æ³¨æ„ï¼šä¸‹é¢çš„éƒ¨åˆ†éå¸¸ç®€å•ï¼&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;//å®ƒçš„å­˜åœ¨åªæ˜¯ä¸ºäº†è¯´æ˜æ•´ä¸ªæµç¨‹ï¼Œè€Œä¸æ˜¯ç»†èŠ‚ã€‚&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; nextChildren&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// å°è¯•è·å–æ­¤å­çº§çš„ç°æœ‰å†…éƒ¨å®ä¾‹&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; prevChild &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; prevRenderedChildren&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      &lt;span class=&quot;token comment&quot;&gt;// å¦‚æœè¿™ä¸ªç´¢å¼•ä¸‹ä¸å­˜åœ¨å†…éƒ¨å®ä¾‹ï¼Œé‚£å°±æŠŠå­çº§è¢«è¿½åŠ åˆ°åé¢ã€‚&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// åˆ›å»ºä¸€ä¸ªæ–°çš„å†…éƒ¨å®ä¾‹ï¼ŒæŒ‚è½½ä»–å¹¶ä½¿ç”¨ä»–çš„èŠ‚ç‚¹&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;prevChild&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; nextChild &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;instantiateComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nextChildren&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; node &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; nextChild&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;// è®°å½•æˆ‘ä»¬éœ€è¦è¿½åŠ çš„èŠ‚ç‚¹&lt;/span&gt;
        operationQueue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;ADD&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        nextRenderedChildren&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nextChild&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;continue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

      &lt;span class=&quot;token comment&quot;&gt;// æˆ‘ä»¬å¯ä»¥åªæ›´æ–°å…ƒç´ ç±»å‹åŒ¹é…çš„å®ä¾‹(ä¸‹é¢æ˜¯å…ƒç´ ç±»å‹ç›¸åŒ)&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// ä¾‹å¦‚ &amp;lt;Button size=&apos;small&apos; /&gt;å¯ä»¥è¢«æ›´æ–°æˆ&amp;lt;Button size=&apos;large&apos; /&gt;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// ä½†æ˜¯ä¸å¯ä»¥æ›´æ–°æˆ&amp;lt;App /&gt;(å³å…ƒç´ ç±»å‹ä¸åŒ¹é…)&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; canUpdate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; prevChildren&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; nextChildren&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      &lt;span class=&quot;token comment&quot;&gt;// å¦‚æœä¸èƒ½æ›´æ–°è¿™ä¸ªå­˜åœ¨çš„å®ä¾‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¿…é¡»ç§»é™¤ä»–&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// å¹¶ä¸”æŒ‚è½½ä¸€ä¸ªæ–°çš„å»ä»£æ›¿ä»–&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;canUpdate&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; prevNode &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; prevChild&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getHostNode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        prevChild&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unmount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; nextChild &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;instantiateComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nextChildren&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; nextNode &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; nextChild&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;// è®°å½•æˆ‘ä»¬éœ€è¦äº¤æ¢çš„èŠ‚ç‚¹&lt;/span&gt;
        operationQueue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;REPLACE&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; prevNode&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; nextNode&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        nextRenderedChildren&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nextChild&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;continue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

      &lt;span class=&quot;token comment&quot;&gt;// å¦‚æœæˆ‘ä»¬å¯ä»¥æ›´æ–°ä¸€ä¸ªå­˜åœ¨çš„å†…éƒ¨å®ä¾‹&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// åªéœ€è¦è®©ä»–æ¥æ”¶ä¸‹ä¸€ä¸ªå…ƒç´ å¹¶ä¸”å¤„ç†ä»–è‡ªå·±çš„æ›´æ–°&lt;/span&gt;
      prevChild&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;receive&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nextChildren&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      nextRenderedChildren&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prevChild&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

	&lt;span class=&quot;token comment&quot;&gt;// æœ€åå¸è½½ä¸å­˜åœ¨çš„å…ƒç´ çš„å­çº§&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; j &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; nextChildren&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; j &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; prevChildren&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; j&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; prevChild &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; prevRenderedChildren&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; node &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; prevChild&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getHostNode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      prevChild&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unmount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      &lt;span class=&quot;token comment&quot;&gt;// è®°å½•æˆ‘ä»¬éœ€è¦ç§»é™¤çš„èŠ‚ç‚¹&lt;/span&gt;
      operationQueue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;REMOVE&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

	&lt;span class=&quot;token comment&quot;&gt;// å°†æ¸²æŸ“çš„å­çº§åˆ—è¡¨æŒ‡åˆ°æ›´æ–°çš„ç‰ˆæœ¬é‡Œ&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;renderedChildren &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; nextRenderedChildren&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä½œä¸ºæœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬æ‰§è¡ŒDOMæ“ä½œã€‚åŒæ ·ï¼ŒçœŸæ­£çš„åè°ƒä»£ç æ›´å¤æ‚ï¼Œå› ä¸ºå®ƒä¹Ÿå¤„ç†ç§»åŠ¨ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;	&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Process the operation queue.&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;operationQueue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; operation &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; operationQueue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;shift&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;operation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;ADD&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;operation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;REPLACE&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replaceChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;operation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nextNode&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; operation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prevNode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;REMOVE&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;removeChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;operation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™å°±æ˜¯æ›´æ–°è®¡ç®—æœºç»„ä»¶(DOMComponent)&lt;/p&gt;
&lt;h3 id=&quot;é¡¶å±‚æ›´æ–°&quot;&gt;&lt;a href=&quot;#%E9%A1%B6%E5%B1%82%E6%9B%B4%E6%96%B0&quot; aria-label=&quot;é¡¶å±‚æ›´æ–° permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;é¡¶å±‚æ›´æ–°&lt;/h3&gt;
&lt;p&gt;ç°åœ¨&lt;code class=&quot;language-text&quot;&gt;CompositeComponent&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;DOMComponent&lt;/code&gt;éƒ½å®ç°äº†&lt;code class=&quot;language-text&quot;&gt;receive(nextElement)&lt;/code&gt;æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ”¹é¡¶çº§&lt;code class=&quot;language-text&quot;&gt;mountTree()&lt;/code&gt;å‡½æ•°ï¼Œä»¥ä¾¿åœ¨å…ƒç´ ç±»å‹ä¸ä¸Šæ¬¡ç›¸åŒæ—¶ä½¿ç”¨å®ƒï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mountTree&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;element&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; containerNode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// æ£€æŸ¥å­˜åœ¨çš„æ ‘&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;containerNode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;firstChild&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; prevNode &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; containerNode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;firstChild&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; prevRootComponent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; prevNode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_internalInstance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; prevElement &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; prevRootComponent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;currentElement&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// å¦‚æœæˆ‘ä»¬å¯ä»¥ï¼Œå¤ç”¨å­˜åœ¨çš„æ ¹ç»„ä»¶&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prevElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; element&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      prevRootComponent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;receive&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;element&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// å…¶ä»–çš„æƒ…å†µå¸è½½å­˜åœ¨çš„æ ‘&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;unmountTree&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;containerNode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç°åœ¨ä»¥ç›¸åŒçš„ç±»å‹è°ƒç”¨&lt;code class=&quot;language-text&quot;&gt;mountTree()&lt;/code&gt;ä¸¤æ¬¡ï¼Œä¸ä¼šæœ‰ç ´åæ€§çš„æ›´æ–°äº†:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; rootEl &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;root&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;mountTree&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;App &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; rootEl&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// Reuses the existing DOM:&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;mountTree&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;App &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; rootEl&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™äº›æ˜¯Reactå†…éƒ¨å·¥ä½œåŸç†çš„åŸºç¡€çŸ¥è¯†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æˆ‘ä»¬é—æ¼äº†ä»€ä¹ˆ&quot;&gt;&lt;a href=&quot;#%E6%88%91%E4%BB%AC%E9%81%97%E6%BC%8F%E4%BA%86%E4%BB%80%E4%B9%88&quot; aria-label=&quot;æˆ‘ä»¬é—æ¼äº†ä»€ä¹ˆ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;æˆ‘ä»¬é—æ¼äº†ä»€ä¹ˆ&lt;/h3&gt;
&lt;p&gt;ä¸çœŸå®ä»£ç åº“ç›¸æ¯”ï¼Œæœ¬æ–‡æ¡£å¾—åˆ°äº†ç®€åŒ–ã€‚æˆ‘ä»¬æ²¡æœ‰è§£å†³å‡ ä¸ªé‡è¦æ–¹é¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç»„ä»¶å¯ä»¥å‘ˆç°&lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt;ï¼Œå¹¶ä¸”åè°ƒç¨‹åºå¯ä»¥å¤„ç†æ•°ç»„ä¸­çš„â€œç©ºâ€å¹¶å‘ˆç°è¾“å‡ºã€‚&lt;/li&gt;
&lt;li&gt;åè°ƒç¨‹åºè¿˜ä»å…ƒç´ ä¸­è¯»å–&lt;code class=&quot;language-text&quot;&gt;key&lt;/code&gt;ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥ç¡®å®šå“ªä¸ªå†…éƒ¨å®ä¾‹å¯¹åº”äºæ•°ç»„ä¸­çš„å“ªä¸ªå…ƒç´ ã€‚å®é™…Reactå®ç°ä¸­çš„å¤§éƒ¨åˆ†å¤æ‚æ€§ä¸æ­¤ç›¸å…³ã€‚&lt;/li&gt;
&lt;li&gt;é™¤äº†å¤åˆå’Œè®¡ç®—æœºå†…éƒ¨å®ä¾‹ç±»ä¹‹å¤–ï¼Œè¿˜æœ‰â€œtextâ€å’Œâ€œemptyâ€ç»„ä»¶çš„ç±»ã€‚å®ƒä»¬ä»£è¡¨æ–‡æœ¬èŠ‚ç‚¹å’Œé€šè¿‡å‘ˆç°&lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt;è·å¾—çš„â€œç©ºæ§½â€ã€‚&lt;/li&gt;
&lt;li&gt;æ¸²æŸ“å™¨ä½¿ç”¨&lt;a href=&quot;https://reactjs.org/docs/codebase-overview.html#dynamic-injection&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;æ³¨å…¥&lt;/a&gt;å°†è®¡ç®—æœºå†…éƒ¨ç±»ä¼ é€’ç»™åè°ƒç¨‹åºã€‚ä¾‹å¦‚ï¼Œ&lt;code class=&quot;language-text&quot;&gt;React DOM&lt;/code&gt;å‘Šè¯‰åè°ƒç¨‹åºä½¿ç”¨&lt;code class=&quot;language-text&quot;&gt;ReactDOMComponent&lt;/code&gt;ä½œä¸ºè®¡ç®—æœºå†…éƒ¨å®ä¾‹å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;æ›´æ–°å­é¡¹åˆ—è¡¨çš„é€»è¾‘è¢«æå–åˆ°åä¸º&lt;code class=&quot;language-text&quot;&gt;ReactMultiChild&lt;/code&gt;çš„&lt;code class=&quot;language-text&quot;&gt;mixin&lt;/code&gt;ä¸­ï¼Œå®ƒç”±&lt;code class=&quot;language-text&quot;&gt;React DOM&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;React Native&lt;/code&gt;ä¸­çš„è®¡ç®—æœºå†…éƒ¨å®ä¾‹ç±»å®ç°ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;åè°ƒç¨‹åºè¿˜åœ¨å¤åˆç»„ä»¶ä¸­å®ç°å¯¹&lt;code class=&quot;language-text&quot;&gt;setState()&lt;/code&gt;çš„æ”¯æŒã€‚äº‹ä»¶å¤„ç†ç¨‹åºå†…çš„å¤šä¸ªæ›´æ–°å°†è¢«æ‰¹å¤„ç†ä¸ºå•ä¸ªæ›´æ–°ã€‚&lt;/li&gt;
&lt;li&gt;åè°ƒå™¨è¿˜è´Ÿè´£å°†å¼•ç”¨é™„åŠ å’Œåˆ†ç¦»åˆ°å¤åˆç»„ä»¶å’Œè®¡ç®—æœºèŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨DOMå‡†å¤‡å¥½ä¹‹åè°ƒç”¨çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ˆä¾‹å¦‚&lt;code class=&quot;language-text&quot;&gt;componentDidMount()&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;componentDidUpdate()&lt;/code&gt;ï¼‰å°†è¢«æ”¶é›†åˆ°â€œå›è°ƒé˜Ÿåˆ—â€ä¸­å¹¶åœ¨å•ä¸ªæ‰¹å¤„ç†ä¸­æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;Reactå°†æœ‰å…³å½“å‰æ›´æ–°çš„ä¿¡æ¯æ”¾å…¥åä¸ºâ€œtransactionâ€çš„å†…éƒ¨å¯¹è±¡ä¸­ã€‚transactionå¯¹äºè·Ÿè¸ªå¾…å¤„ç†ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„é˜Ÿåˆ—ã€è­¦å‘Šå½“å‰DOMçš„åµŒå¥—ä»¥åŠç‰¹å®šæ›´æ–°çš„â€œå…¨å±€â€å…¶ä»–ä»»ä½•å†…å®¹éƒ½å¾ˆæœ‰ç”¨ã€‚äº‹åŠ¡è¿˜ç¡®ä¿Reactåœ¨æ›´æ–°åâ€œæ¸…ç†æ‰€æœ‰å†…å®¹â€ã€‚ä¾‹å¦‚ï¼Œ&lt;code class=&quot;language-text&quot;&gt;React DOM&lt;/code&gt;æä¾›çš„äº‹åŠ¡ç±»åœ¨ä»»ä½•æ›´æ–°åæ¢å¤è¾“å…¥é€‰æ‹©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;è¿›å…¥ä»£ç &quot;&gt;&lt;a href=&quot;#%E8%BF%9B%E5%85%A5%E4%BB%A3%E7%A0%81&quot; aria-label=&quot;è¿›å…¥ä»£ç  permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;è¿›å…¥ä»£ç &lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/facebook/react/blob/83381c1673d14cd16cf747e34c945291e5518a86/src/renderers/dom/client/ReactMount.js&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ReactMount&lt;/a&gt;æ˜¯æœ¬æ•™ç¨‹ä¸­çš„&lt;code class=&quot;language-text&quot;&gt;mountTree()&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;unmountTree()&lt;/code&gt;ä¹‹ç±»çš„ä»£ç ã€‚ä»–è´Ÿè´£å®‰è£…å’Œå¸è½½é¡¶å±‚çš„ç»„ä»¶ã€‚&lt;a href=&quot;https://github.com/facebook/react/blob/83381c1673d14cd16cf747e34c945291e5518a86/src/renderers/native/ReactNativeMount.js&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;ReactNativeMount&lt;/code&gt;&lt;/a&gt;æ˜¯React Nativeçš„æ¨¡æ‹Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/facebook/react/blob/83381c1673d14cd16cf747e34c945291e5518a86/src/renderers/dom/shared/ReactDOMComponent.js&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;ReactDOMComponent&lt;/code&gt;&lt;/a&gt;ç­‰åŒäºæœ¬æ•™ç¨‹ä¸­çš„&lt;code class=&quot;language-text&quot;&gt;DOMComponent&lt;/code&gt;ã€‚å®ƒå®ç°äº†React DOMæ¸²æŸ“å™¨çš„è®¡ç®—æœºç»„ä»¶ç±»ã€‚&lt;a href=&quot;https://github.com/facebook/react/blob/83381c1673d14cd16cf747e34c945291e5518a86/src/renderers/native/ReactNativeBaseComponent.js&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;ReactNativeBaseComponent&lt;/code&gt;&lt;/a&gt;æ˜¯å¯¹React Nativeçš„æ¨¡æ‹Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/facebook/react/blob/83381c1673d14cd16cf747e34c945291e5518a86/src/renderers/shared/stack/reconciler/ReactCompositeComponent.js&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;ReactCompositeComponent&lt;/code&gt;&lt;/a&gt;æ˜¯ç­‰åŒäºæœ¬æ•™ç¨‹ä¸­çš„&lt;code class=&quot;language-text&quot;&gt;CompositeComponent&lt;/code&gt;ã€‚ä»–å¤„ç†ç”¨æˆ·è‡ªå®šä¹‰çš„ç»„ä»¶å¹¶ç»´æŠ¤çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/facebook/react/blob/83381c1673d14cd16cf747e34c945291e5518a86/src/renderers/shared/stack/reconciler/instantiateReactComponent.js&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;instantiateReactComponent&lt;/code&gt;&lt;/a&gt;ç”¨äºé€‰æ‹©è¦ä¸ºå…ƒç´ æ„é€ çš„å†…éƒ¨å®ä¾‹ç±»ã€‚å®ƒç­‰åŒäºæœ¬æ•™ç¨‹ä¸­çš„&lt;code class=&quot;language-text&quot;&gt;instantiateComponent()&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/facebook/react/blob/83381c1673d14cd16cf747e34c945291e5518a86/src/renderers/shared/stack/reconciler/ReactReconciler.js&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;ReactReconciler&lt;/code&gt;&lt;/a&gt;é‡Œæ˜¯&lt;code class=&quot;language-text&quot;&gt;mountComponent()&lt;/code&gt;,&lt;code class=&quot;language-text&quot;&gt;receiveComponent()&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;unmountComponent()&lt;/code&gt;æ–¹æ³•ã€‚å®ƒè°ƒç”¨å†…éƒ¨å®ä¾‹ä¸Šçš„åº•å±‚å®ç°ï¼Œä½†ä¹ŸåŒ…æ‹¬ä¸€äº›ç”±æ‰€æœ‰å†…éƒ¨å®ä¾‹å®ç°å…±äº«çš„ä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/facebook/react/blob/83381c1673d14cd16cf747e34c945291e5518a86/src/renderers/shared/stack/reconciler/ReactChildReconciler.js&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;ReactChildReconciler&lt;/code&gt;&lt;/a&gt;å®ç°ç‹¬ç«‹äºæ¸²æŸ“å™¨å¤„ç†å­çº§çš„æ’å…¥ï¼Œåˆ é™¤å’Œç§»åŠ¨çš„æ“ä½œé˜Ÿåˆ—ã€‚&lt;/li&gt;
&lt;li&gt;ç”±äºé—ç•™åŸå› ï¼Œ&lt;code class=&quot;language-text&quot;&gt;mount()&lt;/code&gt;ï¼Œ&lt;code class=&quot;language-text&quot;&gt;receive()&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;unmount()&lt;/code&gt;åœ¨Reactä»£ç åº“ä¸­å®é™…ä¸Šç§°ä¸º&lt;code class=&quot;language-text&quot;&gt;mountComponent()&lt;/code&gt;ï¼Œ&lt;code class=&quot;language-text&quot;&gt;receiveComponent()&lt;/code&gt;å’Œ&lt;code class=&quot;language-text&quot;&gt;unmountComponent()&lt;/code&gt;ï¼Œä½†å®ƒä»¬æ¥æ”¶å…ƒç´ ã€‚&lt;/li&gt;
&lt;li&gt;å†…éƒ¨å®ä¾‹ä¸Šçš„å±æ€§ä»¥ä¸‹åˆ’çº¿å¼€å¤´ï¼Œä¾‹å¦‚&lt;code class=&quot;language-text&quot;&gt;_currentElement&lt;/code&gt;ã€‚å®ƒä»¬è¢«è®¤ä¸ºæ˜¯æ•´ä¸ªä»£ç åº“ä¸­çš„åªè¯»å…¬å…±å­—æ®µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;æœªæ¥çš„å‘å±•æ–¹å‘&quot;&gt;&lt;a href=&quot;#%E6%9C%AA%E6%9D%A5%E7%9A%84%E5%8F%91%E5%B1%95%E6%96%B9%E5%90%91&quot; aria-label=&quot;æœªæ¥çš„å‘å±•æ–¹å‘ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;æœªæ¥çš„å‘å±•æ–¹å‘&lt;/h3&gt;
&lt;p&gt;å †æ ˆåè°ƒå™¨(stack reconciler)å…·æœ‰å›ºæœ‰çš„å±€é™æ€§ï¼Œä¾‹å¦‚åŒæ­¥å¹¶ä¸”æ— æ³•ä¸­æ–­å·¥ä½œæˆ–å°†å…¶æ‹†åˆ†ä¸ºå—ã€‚&lt;a href=&quot;https://reactjs.org/docs/codebase-overview.html#fiber-reconciler&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;æ–°çš„ Fiber reconciler&lt;/a&gt;æ­£åœ¨è¿›è¡Œä¸­(ç¬”ï¼šå½“ç„¶ï¼Œå¤§å®¶éƒ½çŸ¥é“ï¼Œç›®å‰å·²ç»å®Œæˆäº†)ï¼Œä»–ä»¬æœ‰&lt;a href=&quot;https://github.com/acdlite/react-fiber-architecture&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;å®Œå…¨ä¸åŒçš„æ¶æ„&lt;/a&gt;ã€‚åœ¨æœªæ¥ï¼Œæˆ‘ä»¬æ‰“ç®—ç”¨å®ƒæ›¿æ¢å †æ ˆåè°ƒç¨‹åºï¼Œä½†ç›®å‰å®ƒè¿œéåŠŸèƒ½æ ¡éªŒã€‚&lt;/p&gt;
&lt;h3 id=&quot;ä¸‹ä¸€æ­¥&quot;&gt;&lt;a href=&quot;#%E4%B8%8B%E4%B8%80%E6%AD%A5&quot; aria-label=&quot;ä¸‹ä¸€æ­¥ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ä¸‹ä¸€æ­¥&lt;/h3&gt;
&lt;p&gt;é˜…è¯»&lt;a href=&quot;https://github.com/xiaohesong/TIL/blob/master/front-end/react/react%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99.md&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ä¸‹ä¸€èŠ‚&lt;/a&gt;ï¼Œäº†è§£æˆ‘ä»¬ç”¨äºReactå¼€å‘çš„æŒ‡å¯¼åŸåˆ™ã€‚&lt;/p&gt;
&lt;p&gt;åŸæ–‡ï¼š &lt;a href=&quot;https://reactjs.org/docs/implementation-notes.html#video-building-react-from-scratch&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Implementation Notes&lt;/a&gt;&lt;/p&gt;</content:encoded></item></channel></rss>